  ‚îú‚îÄ‚îÄ robots.ts
    | --- START: robots.ts ---
    | import { baseUrl } from 'app/sitemap'
    | 
    | export default function robots() {
    |   return {
    |     rules: [
    |       {
    |         userAgent: '*',
    |       },
    |     ],
    |     sitemap: `${baseUrl}/sitemap.xml`,
    |   }
    | }
    | --- END ---

  ‚îú‚îÄ‚îÄ ClientContentWrapper.tsx
    | --- START: ClientContentWrapper.tsx ---
    | 'use client';
    | 
    | import { Analytics } from '@vercel/analytics/react';
    | import { SpeedInsights } from '@vercel/speed-insights/next';
    | import { Navbar } from './components/nav';
    | import { Footer } from './components/footer';
    | import { Providers } from './Providers'; 
    | import React from 'react';
    | 
    | // This component provides the necessary client context (Providers) and wraps the main content.
    | export function ClientContentWrapper({
    |   children,
    |   lang = 'en', // 1. Added lang prop with a default fallback to 'en'
    | }: {
    |   children: React.ReactNode;
    |   lang?: string; // 2. Defined it as optional in the interface to prevent parent errors
    | }) {
    |   return (
    |   <Providers> 
    |       <main className="flex-auto min-w-0 mt-6 flex flex-col px-2 md:px-0">
    |         {/* 3. Passed the lang prop to Navbar and Footer */}
    |         {children}
    |         <Analytics />
    |         <SpeedInsights />
    |       </main>
    |     </Providers>
    |   );
    | }
    | --- END ---

  ‚îú‚îÄ‚îÄ global.css
    | --- START: global.css ---
    | 
    | 
    | @import "tailwindcss";
    | 
    | ::selection {
    |   background-color: #47a3f3;
    |   color: #fefefe;
    | }
    | 
    | :root {
    |   --sh-class: #2d5e9d;
    |   --sh-identifier: #354150;
    |   --sh-sign: #8996a3;
    |   --sh-string: #007f7a;
    |   --sh-keyword: #e02518;
    |   --sh-comment: #a19595;
    |   --sh-jsxliterals: #6266d1;
    |   --sh-property: #e25a1c;
    |   --sh-entity: #e25a1c;
    | }
    | 
    | @media (prefers-color-scheme: dark) {
    |   :root {
    |     --sh-class: #4c97f8;
    |     --sh-identifier: white;
    |     --sh-keyword: #f47067;
    |     --sh-string: #0fa295;
    |   }
    |   html {
    |     color-scheme: dark;
    |   }
    | }
    | 
    | html {
    |   min-width: 360px;
    | }
    | 
    | /* CUSTOM UTILITY: Higher contrast for secondary text (dates/summaries) */
    | .text-secondary {
    |   @apply text-neutral-600 dark:text-neutral-300;
    | }
    | 
    | .prose .anchor {
    |   @apply absolute invisible no-underline;
    |   margin-left: -1em;
    |   padding-right: 0.5em;
    |   width: 80%;
    |   max-width: 700px;
    |   cursor: pointer;
    | }
    | 
    | .anchor:hover {
    |   @apply visible;
    | }
    | 
    | /* LINKS: Setting high-contrast link colors for both themes */
    | .prose a {
    |   @apply underline transition-all text-neutral-800 decoration-neutral-400 underline-offset-2 decoration-[0.1em];
    | }
    | 
    | .dark .prose a {
    |   @apply text-neutral-50 decoration-neutral-600;
    | }
    | 
    | .prose .anchor:after {
    |   @apply text-neutral-300 dark:text-neutral-700;
    |   content: '#';
    | }
    | 
    | .prose *:hover > .anchor {
    |   @apply visible;
    | }
    | 
    | .prose pre {
    |   @apply bg-neutral-50 dark:bg-neutral-900 rounded-lg overflow-x-auto border border-neutral-200 dark:border-neutral-900 py-2 px-3 text-sm;
    | }
    | 
    | .prose code {
    |   @apply px-1 py-0.5 rounded-lg;
    | }
    | 
    | .prose pre code {
    |   @apply p-0;
    |   border: initial;
    |   line-height: 1.5;
    | }
    | 
    | .prose code span {
    |   @apply font-medium;
    | }
    | 
    | .prose img {
    |   @apply m-0;
    | }
    | 
    | /* --- TEXT COLOR FIXES FOR DARK MODE --- */
    | 
    | /* 1. Paragraphs (p) - Using text-neutral-200 for better dark mode readability */
    | .prose p {
    |   @apply my-4 text-neutral-800; 
    | }
    | .dark .prose p {
    |   @apply text-neutral-200; 
    | }
    | 
    | /* 2. Headings (h1, h2, h3, h4) */
    | .prose h1,
    | .prose h2,
    | .prose h3,
    | .prose h4 {
    |   @apply text-lg font-medium tracking-tight mt-6 mb-2 text-neutral-900;
    | }
    | .dark .prose h1,
    | .dark .prose h2,
    | .dark .prose h3,
    | .dark .prose h4 {
    |   @apply text-neutral-50;
    | }
    | 
    | /* 3. Strong Text (Bolding) */
    | .prose strong {
    |   @apply font-medium text-neutral-900;
    | }
    | .dark .prose strong {
    |   @apply text-neutral-50;
    | }
    | 
    | /* 4. Lists (ul, ol) */
    | .prose ul,
    | .prose ol {
    |   @apply pl-6 text-neutral-800;
    | }
    | .dark .prose ul,
    | .dark .prose ol {
    |   @apply text-neutral-200;
    | }
    | 
    | .prose ul {
    |   @apply list-disc;
    | }
    | 
    | .prose ol {
    |   @apply list-decimal;
    | }
    | 
    | /* --- LAYOUT & SCROLLBARS --- */
    | 
    | .prose > :first-child {
    |   margin-top: 1.25em !important;
    |   margin-bottom: 1.25em !important;
    | }
    | 
    | pre::-webkit-scrollbar {
    |   display: none;
    | }
    | 
    | pre {
    |   -ms-overflow-style: none;
    |   scrollbar-width: none;
    | }
    | 
    | /* Remove Safari input shadow on mobile */
    | input[type='text'],
    | input[type='email'] {
    |   -webkit-appearance: none;
    |   -moz-appearance: none;
    |   appearance: none;
    | }
    | 
    | table {
    |   display: block;
    |   max-width: fit-content;
    |   overflow-x: auto;
    |   white-space: nowrap;
    | } 
    | 
    | .title {
    |   text-wrap: balance;
    | }
    | 
    | .prose p {
    |   @apply my-6 text-neutral-800 dark:text-neutral-300 leading-7 text-lg;
    | }
    | 
    | /* Smooth scrolling for anchor links */
    | html {
    |   scroll-behavior: smooth;
    | }
    | 
    | /* Improve Card Hover effects to make the site feel "alive" */
    | .review-card {
    |   @apply transition-transform duration-300 hover:-translate-y-1;
    | }
    | --- END ---


  [DIR] components/
  ‚îú‚îÄ‚îÄ actions.ts
    | --- START: actions.ts ---
    | // app/actions.ts
    | 'use server';
    | 
    | // --- 1. Internal Helper: Get Spotify Token ---
    | export async function getAccessToken() {
    |   const refresh_token = process.env.SPOTIFY_REFRESH_TOKEN;
    |   const client_id = process.env.SPOTIFY_CLIENT_ID;
    |   const client_secret = process.env.SPOTIFY_CLIENT_SECRET;
    | 
    |   if (!refresh_token || !client_id || !client_secret) {
    |     return { error: "Missing Spotify environment variables" };
    |   }
    | 
    |   const basic = Buffer.from(`${client_id}:${client_secret}`).toString('base64');
    |   const response = await fetch('https://accounts.spotify.com/api/token', {
    |     method: 'POST',
    |     headers: {
    |       Authorization: `Basic ${basic}`,
    |       'Content-Type': 'application/x-www-form-urlencoded',
    |     },
    |     body: new URLSearchParams({
    |       grant_type: 'refresh_token',
    |       refresh_token,
    |     }),
    |   });
    | 
    |   return response.json();
    | }
    | 
    | // --- 2. Playlist Feature: Fetch Metadata & Vibe Stats ---
    | export async function fetchPlaylistMetadata(url: string) {
    |   const { access_token } = await getAccessToken();
    |   if (!access_token) return { error: "No access token" };
    | 
    |   try {
    |     // Parse Playlist ID from URL
    |     const match = url.match(/playlist\/([a-zA-Z0-9]+)/);
    |     if (!match) return { error: "Invalid Spotify URL" };
    |     const playlistId = match[1];
    | 
    |     // Fetch Playlist Details
    |     const res = await fetch(`https://api.spotify.com/v1/playlists/${playlistId}`, {
    |       headers: { Authorization: `Bearer ${access_token}` },
    |     });
    |     
    |     if (!res.ok) return { error: "Failed to fetch playlist" };
    |     const data = await res.json();
    | 
    |     // Extract Artists
    |     const artists = data.tracks.items
    |       .map((item: any) => item.track?.artists[0]?.name)
    |       .filter(Boolean);
    | 
    |     // Fetch Audio Features for "Vibe Stats" (Limit 20)
    |     const trackIds = data.tracks.items
    |        .slice(0, 20)
    |        .map((t: any) => t.track?.id)
    |        .filter(Boolean)
    |        .join(',');
    |     
    |     let tempo = 0, energy = 0, mood = "Neutral";
    |     
    |     if (trackIds) {
    |       const featuresRes = await fetch(`https://api.spotify.com/v1/audio-features?ids=${trackIds}`, {
    |          headers: { Authorization: `Bearer ${access_token}` },
    |       });
    |       const featuresData = await featuresRes.json();
    |       
    |       if (featuresData.audio_features) {
    |          const validFeatures = featuresData.audio_features.filter((f: any) => f);
    |          if (validFeatures.length > 0) {
    |             const totalTempo = validFeatures.reduce((acc: number, curr: any) => acc + curr.tempo, 0);
    |             const totalEnergy = validFeatures.reduce((acc: number, curr: any) => acc + curr.energy, 0);
    |             const totalValence = validFeatures.reduce((acc: number, curr: any) => acc + curr.valence, 0);
    | 
    |             tempo = Math.round(totalTempo / validFeatures.length);
    |             energy = Math.round((totalEnergy / validFeatures.length) * 100);
    |             const avgValence = totalValence / validFeatures.length;
    | 
    |             if (avgValence > 0.6 && energy > 70) mood = "Party üéâ";
    |             else if (avgValence > 0.6) mood = "Happy ‚òÄÔ∏è";
    |             else if (avgValence < 0.4 && energy < 40) mood = "Melancholy üåßÔ∏è";
    |             else if (energy > 80) mood = "High Voltage ‚ö°";
    |             else mood = "Chill ‚òï";
    |          }
    |       }
    |     }
    | 
    |     return {
    |       id: data.id,
    |       name: data.name,
    | artists: Array.from(new Set(artists)),
    |       tempo,
    |       energy,
    |       mood
    |     };
    | 
    |   } catch (e) {
    |     console.error(e);
    |     return { error: "Failed to load playlist" };
    |   }
    | }
    | 
    | // --- 3. Playlist Feature: Analyze Discovery Score ---
    | export async function analyzePlaylistDiscovery(playlistId: string, playlistName: string, artists: string[]) {
    |   const { access_token } = await getAccessToken();
    |   if (!access_token) return { error: "No access token" };
    | 
    |   const sampleArtists = artists.slice(0, 10);
    |   let discoveryCount = 0;
    | 
    |   const checks = await Promise.all(
    |     sampleArtists.map(async (artist) => {
    |       try {
    |         const query = `${artist} ${playlistName}`;
    |         const res = await fetch(
    |           `https://api.spotify.com/v1/search?q=${encodeURIComponent(query)}&type=playlist&limit=50`,
    |           { headers: { Authorization: `Bearer ${access_token}` } }
    |         );
    |         const data = await res.json();
    |         return data.playlists?.items || [];
    |       } catch (e) {
    |         return [];
    |       }
    |     })
    |   );
    | 
    |   checks.forEach((searchResults) => {
    |     if (!Array.isArray(searchResults)) return;
    |     const validResults = searchResults.filter(item => item !== null);
    |     const isFound = validResults.some((pl: any) => 
    |         pl.id === playlistId || 
    |         (pl.name && pl.name.toLowerCase() === playlistName.toLowerCase())
    |     );
    |     if (isFound) discoveryCount++;
    |   });
    | 
    |   const percentage = Math.round((discoveryCount / sampleArtists.length) * 100);
    |   let score = percentage > 70 ? 100 : percentage;
    |   let rating = "Bad üîª";
    |   if (score >= 70) rating = "Amazing üöÄ";
    |   else if (score >= 40) rating = "Good üåü";
    |   else if (score >= 10) rating = "Okay üòê";
    | 
    |   return {
    |     score,
    |     percentage,
    |     rating,
    |     analyzed_count: sampleArtists.length
    |   };
    | }
    | 
    | // --- 4. Reverse Game Feature: Get Mystery Track (Deezer) ---
    | export async function getMysteryTrack(artistName: string) {
    |   try {
    |     const searchRes = await fetch(
    |       `https://api.deezer.com/search/artist?q=${encodeURIComponent(artistName)}`
    |     );
    |     const searchData = await searchRes.json();
    |     
    |     if (!searchData.data || searchData.data.length === 0) {
    |       return { error: "Artist not found" };
    |     }
    | 
    |     const normalize = (str: string) => str.toLowerCase().trim();
    |     const targetName = normalize(artistName);
    | 
    |     let artist = searchData.data.find((a: any) => normalize(a.name) === targetName);
    |     if (!artist) artist = searchData.data.find((a: any) => normalize(a.name).includes(targetName));
    |     if (!artist) artist = searchData.data[0];
    | 
    |     const tracksRes = await fetch(artist.tracklist + '&limit=50');
    |     const tracksData = await tracksRes.json();
    |     
    |     const validTracks = tracksData.data.filter((t: any) => t.preview);
    | 
    |     if (!validTracks || validTracks.length < 3) {
    |         return { error: "Not enough songs found for this artist." };
    |     }
    | 
    |     const correctIndex = Math.floor(Math.random() * validTracks.length);
    |     const correctTrack = validTracks[correctIndex];
    | 
    |     const distractors: any[] = [];
    |     const usedIndices = new Set([correctIndex]);
    | 
    |     while (distractors.length < 2) {
    |       const idx = Math.floor(Math.random() * validTracks.length);
    |       if (!usedIndices.has(idx)) {
    |         distractors.push(validTracks[idx]);
    |         usedIndices.add(idx);
    |       }
    |     }
    | 
    |     const options = [correctTrack, ...distractors].map(t => ({
    |       id: t.id,
    |       title: t.title,
    |       isCorrect: t.id === correctTrack.id
    |     }));
    | 
    |     options.sort(() => Math.random() - 0.5);
    | 
    |     return {
    |       artistName: artist.name,
    |       trackName: correctTrack.title,
    |       albumArt: correctTrack.album.cover_xl,
    |       previewUrl: correctTrack.preview,
    |       deezerUrl: correctTrack.link,
    |       options: options
    |     };
    | 
    |   } catch (e) {
    |     console.error(e);
    |     return { error: "Failed to fetch data" };
    |   }
    | }
    | 
    | 
    | // getBpmGameTrack
    | // app/actions.ts
    | 
    | export async function getBpmGameTrack() {
    |   // 1. Call the helper and extract the actual token string
    |   const tokenData = await getAccessToken();
    |   const access_token = tokenData.access_token;
    | 
    |   // 2. Check if the token exists before proceeding
    |   if (!access_token) {
    |     console.error("Token Response Error:", tokenData); 
    |     return { error: "Failed to authenticate with Spotify. Check your Env Vars." };
    |   }
    | 
    |   try {
    |     const playlistId = "0kQ3ZMgLoc9UoFtJz96qYa"; 
    |     
    |     // 3. Use backticks (`) for template literals to inject variables correctly
    |     const res = await fetch(`https://api.spotify.com/v1/playlists/${playlistId}`, {
    |       headers: { Authorization: `Bearer ${access_token}` },
    |       cache: 'no-store'
    |     });
    |     
    |     const data = await res.json();
    |     
    |     // Filter for tracks that have a 30-second preview URL
    |     const validTracks = data.tracks.items.filter((item: any) => item.track?.preview_url);
    |     if (validTracks.length === 0) return { error: "No playable tracks found in this playlist." };
    | 
    |     const selected = validTracks[Math.floor(Math.random() * validTracks.length)].track;
    | 
    |     // 4. Fetch the specific Audio Features (Tempo/BPM) for the chosen track
    |     const featuresRes = await fetch(`https://api.spotify.com/v1/audio-features/${selected.id}`, {
    |       headers: { Authorization: `Bearer ${access_token}` },
    |     });
    |     const featuresData = await featuresRes.json();
    | 
    |     return {
    |       name: selected.name,
    |       artist: selected.artists[0].name,
    |       previewUrl: selected.preview_url,
    |       albumArt: selected.album.images[0].url,
    |       bpm: Math.round(featuresData.tempo),
    |     };
    |   } catch (e) {
    |     console.error("BPM Game Fetch Error:", e);
    |     return { error: "Failed to connect to Spotify Arcade" };
    |   }
    | }
    | 
    | export async function getYoutubeGameTrack() {
    |   const API_KEY = process.env.YOUTUBE_API_KEY;
    |   // Example: A popular music video playlist ID
    |   const playlistId = 'PLFgquLnL59alCl_2TQvOiD5Vgm1hCaGSI'; 
    | 
    |   try {
    |     const res = await fetch(
    |       `https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&maxResults=50&playlistId=${playlistId}&key=${API_KEY}`
    |     );
    |     const data = await res.json();
    |     
    |     const randomVideo = data.items[Math.floor(Math.random() * data.items.length)];
    |     const videoId = randomVideo.snippet.resourceId.videoId;
    | 
    |     return {
    |       title: randomVideo.snippet.title,
    |       videoId: videoId,
    |       thumbnail: randomVideo.snippet.thumbnails.high.url,
    |     };
    |   } catch (e) {
    |     return { error: "Failed to fetch YouTube track" };
    |   }
    | }
    | 
    | ///Harmony game 
    | 
    | // app/actions.ts
    | export async function getMusicalJazzTrack() {
    |   const API_KEY = process.env.YOUTUBE_API_KEY;
    |   // Refined query for purely musical content
    |   const query = "Classic Jazz Standard Instrumental Official Audio";
    | 
    |   try {
    |     const res = await fetch(
    |       `https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(query)}&type=video&videoEmbeddable=true&maxResults=15&key=${API_KEY}`
    |     );
    |     const data = await res.json();
    |     
    |     // Filter out titles that might contain "tutorial" or "lesson"
    |     const musicVideos = data.items.filter((v: any) => 
    |       !v.snippet.title.toLowerCase().includes('lesson') && 
    |       !v.snippet.title.toLowerCase().includes('tutorial')
    |     );
    | 
    |     const randomVideo = musicVideos[Math.floor(Math.random() * musicVideos.length)];
    |     
    |     return {
    |       title: randomVideo.snippet.title,
    |       videoId: randomVideo.id.videoId,
    |     };
    |   } catch (e) {
    |     return { error: "Failed to fetch music" };
    |   }
    | }
    | --- END ---

  ‚îú‚îÄ‚îÄ sitemap.ts
    | --- START: sitemap.ts ---
    | import { MetadataRoute } from 'next'
    | import { getBlogPosts } from 'app/[lang]/blog/utils'
    | 
    | export const baseUrl = 'https://www.armanayva.com'
    | const locales = ['en', 'fr', 'es', 'it', 'de', 'hy', 'ru', 'ar']
    | 
    | export default async function sitemap(): Promise<MetadataRoute.Sitemap> {
    |   // 1. Initialize arrays with correct types to avoid 'never' error
    |   const blogEntries: MetadataRoute.Sitemap = []
    |   const staticEntries: MetadataRoute.Sitemap = []
    | 
    |   for (const locale of locales) {
    |     const posts = getBlogPosts(locale)
    | 
    |     // Map blog posts for this locale
    |     const langBlogs = posts.map((post) => ({
    |       url: `${baseUrl}/${locale}/blog/${post.slug}`,
    |       lastModified: post.metadata.publishedAt || new Date().toISOString(),
    |     }))
    | 
    |     // FIX: blogEntries is now typed, so langBlogs won't be 'never'
    |     blogEntries.push(...langBlogs)
    | 
    |     // Map static routes for this locale
    |     const routes = ['', '/blog', '/puzzle', '/radio', '/videos'].map((route) => ({
    |       url: `${baseUrl}/${locale}${route}`,
    |       lastModified: new Date().toISOString().split('T')[0],
    |     }))
    | 
    |     staticEntries.push(...routes)
    |   }
    | 
    |   const rootEntry = {
    |     url: baseUrl,
    |     lastModified: new Date().toISOString().split('T')[0],
    |   }
    | 
    |   return [rootEntry, ...staticEntries, ...blogEntries]
    | }
    | --- END ---


  [DIR] lib/

  [DIR] api/

  [DIR] og/
  ‚îú‚îÄ‚îÄ not-found.tsx
    | --- START: not-found.tsx ---
    | export default function NotFound() {
    |   return (
    |     <section>
    |       <h1 className="mb-8 text-2xl font-semibold tracking-tighter">
    |         404 - Page Not Found
    |       </h1>
    |       <p className="mb-4">The page you are looking for does not exist.</p>
    |     </section>
    |   )
    | }
    | --- END ---


  [DIR] [lang]/
  ‚îú‚îÄ‚îÄ Providers.tsx
    | --- START: Providers.tsx ---
    | // app/Providers.tsx
    | 'use client';
    | 
    | import * as React from 'react';
    | import { ThemeProvider } from 'next-themes';
    | 
    | export function Providers({ children }: { children: React.ReactNode }) {
    |   return (
    |     <ThemeProvider 
    |       attribute="class" 
    |       defaultTheme="light"   // ‚¨ÖÔ∏è Changed from 'system' to 'light'
    |       enableSystem={false}   // ‚¨ÖÔ∏è Disabled system preference to force light mode
    |     >
    |       {children}
    |     </ThemeProvider>
    |   );
    | }
    | --- END ---

    ‚îú‚îÄ‚îÄ nav.tsx
      | --- START: components/nav.tsx ---
      | 'use client';
      | 
      | import Link from 'next/link';
      | import { usePathname } from 'next/navigation';
      | import { useState, useEffect, useRef } from 'react';
      | import { FaBars, FaTimes, FaGlobe } from 'react-icons/fa';
      | import { ThemeToggle } from './ThemeToggle';
      | 
      | // 1. Logo Component
      | const CLOUDINARY_LOGO_URL = "https://res.cloudinary.com/dpmkshcky/image/upload/v1763746293/logo_dxzmtf.gif";
      | 
      | export function Logo() {
      |   return (
      |     <img
      |       src={CLOUDINARY_LOGO_URL}
      |       alt="Logo"
      |       width={70} 
      |       height={70}
      |       className="w-[70px] h-[70px] object-cover rounded-full border-2 border-black shadow-lg"
      |     />
      |   );
      | }
      | 
      | // 2. Language Switcher Dropdown (Z-INDEX FIXED)
      | function LanguageSwitcher({ currentLang }: { currentLang: string }) {
      |   const [isOpen, setIsOpen] = useState(false);
      |   const pathname = usePathname();
      |   const dropdownRef = useRef<HTMLDivElement>(null);
      | 
      |   const locales = [
      |     { code: 'en', label: 'EN' }, { code: 'fr', label: 'FR' },
      |     { code: 'es', label: 'ES' }, { code: 'it', label: 'IT' },
      |     { code: 'de', label: 'DE' }, { code: 'hy', label: '’Ä‘±’Ö' },
      |     { code: 'ru', label: '–†–£' }, { code: 'ar', label: 'ÿπÿ±ÿ®' },
      |   ];
      | 
      |   const getRedirectedPath = (locale: string) => {
      |     if (!pathname) return '/';
      |     const segments = pathname.split('/');
      |     segments[1] = locale;
      |     return segments.join('/');
      |   };
      | 
      |   useEffect(() => {
      |     const handleClickOutside = (e: MouseEvent) => {
      |       if (dropdownRef.current && !dropdownRef.current.contains(e.target as Node)) {
      |         setIsOpen(false);
      |       }
      |     };
      |     document.addEventListener('mousedown', handleClickOutside);
      |     return () => document.removeEventListener('mousedown', handleClickOutside);
      |   }, []);
      | 
      |   return (
      |     // Added z-[100] to ensure the button container has priority
      |     <div className="relative inline-block z-[100]" ref={dropdownRef}>
      |       <button
      |         onClick={() => setIsOpen(!isOpen)}
      |         className="flex items-center gap-1 text-xs font-bold text-neutral-500 hover:text-neutral-900 dark:hover:text-neutral-100 transition-colors uppercase"
      |       >
      |         <FaGlobe className="text-sm" />
      |         {currentLang}
      |       </button>
      | 
      |       {isOpen && (
      |         // Increased Z-INDEX to 9999 to sit above everything
      |         <div className="absolute right-0 mt-2 grid grid-cols-2 gap-1 bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 p-2 rounded-xl shadow-2xl z-[9999] min-w-[140px]">
      |           {locales.map((loc) => (
      |             <Link
      |               key={loc.code}
      |               href={getRedirectedPath(loc.code)}
      |               onClick={() => setIsOpen(false)}
      |               className={`px-2 py-2 text-[10px] text-center rounded-md transition-colors ${
      |                 currentLang === loc.code 
      |                   ? 'bg-neutral-100 dark:bg-neutral-800 text-blue-500 font-bold' 
      |                   : 'hover:bg-neutral-50 dark:hover:bg-neutral-800 text-neutral-600 dark:text-neutral-400'
      |               }`}
      |             >
      |               {loc.label}
      |             </Link>
      |           ))}
      |         </div>
      |       )}
      |     </div>
      |   );
      | }
      | 
      | // 3. Main Navbar
      | export function Navbar({ lang }: { lang: string }) {
      |   const [isMobileOpen, setIsMobileOpen] = useState(false);
      |   const [dict, setDict] = useState<any>(null);
      |   const pathname = usePathname() || '/';
      | 
      |   useEffect(() => {
      |     import(`../../dictionaries/${lang}.json`)
      |       .then((m) => setDict(m.default.nav))
      |       .catch(() => {
      |         import(`../../dictionaries/en.json`).then((m) => setDict(m.default.nav));
      |       });
      |   }, [lang]);
      | 
      |   if (!dict) return null;
      | 
      |   const navItems = {
      |     [`/${lang}`]: { name: dict.home },
      |     [`/${lang}/blog`]: { name: dict.blog },
      |     [`/${lang}/radio`]: { name: dict.radio },
      |     [`/${lang}/videos`]: { name: dict.videos },
      |     [`/${lang}/about`]: { name: dict.about },
      |     [`/${lang}/puzzle`]: { name: dict.puzzle },
      |     [`/${lang}/contact`]: { name: dict.contact },
      |   };
      | 
      |   const renderLinks = (isMobile: boolean) => {
      |     return Object.entries(navItems).map(([path, { name }]) => {
      |       const isActive = pathname === path || (path.includes('/blog') && pathname.startsWith(path));
      |       return (
      |         <Link
      |           key={path}
      |           href={path}
      |           className={`transition-all py-1 px-3 ${
      |             isActive ? 'font-bold text-neutral-900 dark:text-neutral-100' : 'font-normal text-neutral-600 dark:text-neutral-400'
      |           } hover:text-neutral-800 dark:hover:text-neutral-200 ${isMobile ? 'block w-full text-lg py-3' : 'inline-block text-sm'}`}
      |           onClick={() => isMobile && setIsMobileOpen(false)}
      |         >
      |           {name}
      |         </Link>
      |       );
      |     });
      |   };
      | 
      |   return (
      |     // Increased z-position of the aside to ensure nav items are always on top
      |     <aside className="mb-16 tracking-tight relative z-[50]">
      |       <div className="lg:sticky lg:top-20">
      |         <nav className="flex flex-col relative" id="nav">
      |           <div className="flex justify-between items-center w-full py-1">
      |             <Link href={`/${lang}`}>
      |               <Logo />
      |             </Link>
      |             
      |             <div className="hidden md:flex flex-row space-x-0 items-center">
      |               {renderLinks(false)}
      |             </div>
      | 
      |             <div className="flex items-center space-x-4">
      |               <LanguageSwitcher currentLang={lang} />
      |               <ThemeToggle />
      |               <button
      |                 onClick={() => setIsMobileOpen(!isMobileOpen)}
      |                 className="md:hidden p-2 text-2xl text-neutral-600 dark:text-neutral-400"
      |               >
      |                 {isMobileOpen ? <FaTimes /> : <FaBars />}
      |               </button>
      |             </div>
      |           </div>
      |           
      |           <div className={`md:hidden w-full transition-all duration-300 ease-in-out ${
      |             isMobileOpen ? 'max-h-screen opacity-100 py-4' : 'max-h-0 opacity-0 overflow-hidden'
      |           } flex flex-col space-y-2 border-t border-neutral-200 dark:border-neutral-800`}>
      |             {renderLinks(true)}
      |           </div>
      |         </nav>
      |       </div>
      |     </aside>
      |   );
      | }
      | --- END ---

    ‚îú‚îÄ‚îÄ mdx.tsx
      | --- START: components/mdx.tsx ---
      | import Link from 'next/link'
      | import Image from 'next/image'
      | import { MDXRemote } from 'next-mdx-remote/rsc'
      | import { highlight } from 'sugar-high'
      | import React from 'react'
      | 
      | // Custom Components
      | import BandcampCTA from 'app/components/BandcampCTA'
      | import MusicCTA from 'app/components/game/MusicCTA'
      | import { PlaylistStats } from 'app/components/PlaylistStats'
      | import PlaylistUrlInput from 'app/components/PlaylistUrlInput' 
      | // --- HELPER FUNCTIONS (Must be defined before usage) ---
      | 
      | function Table({ data }: { data: { headers: string[]; rows: string[][] } }) {
      |   let headers = data.headers.map((header, index) => (
      |     <th key={index}>{header}</th>
      |   ))
      |   let rows = data.rows.map((row, index) => (
      |     <tr key={index}>
      |       {row.map((cell, cellIndex) => (
      |         <td key={cellIndex}>{cell}</td>
      |       ))}
      |     </tr>
      |   ))
      | 
      |   return (
      |     <table>
      |       <thead>
      |         <tr>{headers}</tr>
      |       </thead>
      |       <tbody>{rows}</tbody>
      |     </table>
      |   )
      | }
      | 
      | function CustomLink(props: any) {
      |   let href = props.href
      | 
      |   if (href.startsWith('/')) {
      |     return (
      |       <Link href={href} {...props}>
      |         {props.children}
      |       </Link>
      |     )
      |   }
      | 
      |   if (href.startsWith('#')) {
      |     return <a {...props} />
      |   }
      | 
      |   return <a target="_blank" rel="noopener noreferrer" {...props} />
      | }
      | 
      | function RoundedImage(props: any) {
      |   return <Image alt={props.alt} className="rounded-lg" {...props} />
      | }
      | 
      | function Code({ children, ...props }: any) {
      |   let codeHTML = highlight(children)
      |   return <code dangerouslySetInnerHTML={{ __html: codeHTML }} {...props} />
      | }
      | 
      | function slugify(str: string) {
      |   return str
      |     .toString()
      |     .toLowerCase()
      |     .trim()
      |     .replace(/\s+/g, '-')
      |     .replace(/&/g, '-and-')
      |     .replace(/[^\w\-]+/g, '')
      |     .replace(/\-\-+/g, '-')
      | }
      | 
      | function createHeading(level: number) {
      |   const Heading = ({ children }: any) => {
      |     let slug = slugify(children)
      |     return React.createElement(
      |       `h${level}`,
      |       { id: slug },
      |       [
      |         React.createElement('a', {
      |           href: `#${slug}`,
      |           key: `link-${slug}`,
      |           className: 'anchor',
      |         }),
      |       ],
      |       children
      |     )
      |   }
      |   Heading.displayName = `Heading${level}`
      |   return Heading
      | }
      | 
      | // --- COMPONENT REGISTRATION ---
      | 
      | let components = {
      |   h1: createHeading(1),
      |   h2: createHeading(2),
      |   h3: createHeading(3),
      |   h4: createHeading(4),
      |   h5: createHeading(5),
      |   h6: createHeading(6),
      |   Image: RoundedImage,
      |   a: CustomLink,
      |   code: Code,
      |   Table,         // Ensure Table is here
      |   BandcampCTA,
      |   MusicCTA,
      |   PlaylistStats, 
      |   PlaylistUrlInput,// Ensure PlaylistStats is here
      | }
      | 
      | export function CustomMDX(props: any) {
      |   return (
      |     <MDXRemote
      |       {...props}
      |       components={{ ...components, ...(props.components || {}) }}
      |     />
      |   )
      | }
      | --- END ---

    ‚îú‚îÄ‚îÄ PlaylistStats.tsx
      | --- START: components/PlaylistStats.tsx ---
      | import { getPlaylist } from '../lib/spotify';
      | import Image from 'next/image';
      | import { PlaylistDiscovery } from './PlaylistDiscovery';
      | 
      | export async function PlaylistStats({ id }: { id: string }) {
      |   let playlist;
      | 
      |   try {
      |     playlist = await getPlaylist(id);
      |     if (playlist.error) throw new Error(playlist.error.message);
      |   } catch (e) {
      |     console.error("Spotify Error:", e);
      |     return (
      |       <div className="p-4 my-8 border border-red-200 rounded-lg bg-red-50 text-red-600 dark:bg-red-900/20 dark:border-red-800">
      |         <p className="font-bold">Spotify Data Unavailable</p>
      |         <p className="text-sm">Could not fetch playlist stats. Check API credentials.</p>
      |       </div>
      |     );
      |   }
      | 
      |   const artistNames = playlist.tracks.items.map((item: any) => item.track?.artists[0]?.name);
      |   // 1. Get Followers
      |   const followers = playlist.followers.total;
      | 
      |   // 2. Calculate "Discoverability" (Avg Track Popularity 0-100)
      |   const tracks = playlist.tracks.items;
      |   const avgPopularity = Math.round(
      |     tracks.reduce((acc: number, item: any) => acc + (item.track?.popularity || 0), 0) / 
      |     (tracks.length || 1)
      |   );
      | 
      |   return (
      |     <div className="my-10 p-6 rounded-2xl bg-neutral-100 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 shadow-sm">
      |       <div className="flex flex-col md:flex-row gap-6 items-center">
      |         
      |         {/* 
      |         Cover Image 
      |         {playlist.images?.[0] && (
      |           <div className="relative w-40 h-40 flex-shrink-0 shadow-lg rounded-xl overflow-hidden">
      |              <Image 
      |                src={playlist.images[0].url} 
      |                alt={playlist.name}
      |                fill
      |                className="object-cover"
      |              />
      |           </div>
      |         )}
      | */}
      |         <div className="flex-1 text-center md:text-left w-full">
      |           <h3 className="text-2xl font-bold mb-2 text-neutral-900 dark:text-neutral-100">{playlist.name}</h3>
      |           
      |           <div className="grid grid-cols-3 gap-4 mt-4">
      |             
      |             Metric: Followers 
      |             <div className="p-3 bg-white dark:bg-black rounded-lg border border-neutral-200 dark:border-neutral-800">
      |               <div className="text-2xl font-bold text-green-600">{followers.toLocaleString()}</div>
      |               <div className="text-xs uppercase tracking-wider text-neutral-500">Followers</div>
      |             </div>
      | 
      |            
      |             <div className="p-3 bg-white dark:bg-black rounded-lg border border-neutral-200 dark:border-neutral-800">
      |               <div className="text-2xl font-bold text-blue-500">{playlist.tracks.total}</div>
      |               <div className="text-xs uppercase tracking-wider text-neutral-500">Tracks</div>
      |             </div>
      |  {/* 
      |             Metric: Discoverability / Vibe Score 
      |             <div className="p-3 bg-white dark:bg-black rounded-lg border border-neutral-200 dark:border-neutral-800">
      |               <div className="text-2xl font-bold text-purple-500">{avgPopularity}%</div>
      |               <div className="text-xs uppercase tracking-wider text-neutral-500">Trend Score</div>
      |             </div>
      |    */}
      |           </div>
      |    {/*        
      |           <div className="mt-4 text-xs text-neutral-500">
      |             *Trend Score based on global track popularity.
      |           </div>
      |     */}
      |         </div>
      |       </div>
      | 
      |       {/* Add this at the bottom */}
      |     
      |     </div>
      |   );
      | }
      | --- END ---

    ‚îú‚îÄ‚îÄ new-releases-spotlight.tsx
      | --- START: components/new-releases-spotlight.tsx ---
      | 'use client';
      | 
      | import Link from 'next/link';
      | 
      | // Pass lang and the specific new_releases dictionary fragment as props
      | export function NewReleasesSpotlight({ lang, dict }: { lang: string; dict: any }) {
      |   if (!dict) return null;
      | 
      |   return (
      |     <div className="py-6">
      |       
      |       {/* SECTION HEADER */}
      |       <h2 className="font-bold text-3xl font-serif mb-6 tracking-tighter text-neutral-400 dark:text-neutral-50">
      |         {dict.title}
      |       </h2>
      | 
      |       {/* 1. SINGLE SPOTLIGHT */}
      |       <div className="border border-neutral-200 dark:border-neutral-800 p-6 rounded-xl mb-8 bg-neutral-50 dark:bg-neutral-900 shadow-xl">
      |         <div className="flex items-center mb-4">
      |           <span className="text-4xl mr-3">üéµ</span>
      |           <h3 className="font-bold text-2xl tracking-tight text-neutral-900 dark:text-neutral-50">
      |             {dict.single_title}
      |           </h3>
      |         </div>
      |         <p className="text-lg mb-3 text-neutral-800 dark:text-neutral-50">
      |           {dict.single_desc}
      |         </p>
      |         <p className="text-sm font-semibold text-neutral-600 dark:text-neutral-50">
      |           {dict.single_meta}
      |         </p>
      |         <Link 
      |           href={`/${lang}/blog/take-five-get-one`} 
      |           className="text-sm font-semibold mt-4 inline-block text-blue-600 hover:text-blue-500 transition-colors"
      |         >
      |           {dict.explore_details}
      |         </Link>
      |       </div>
      | 
      |       {/* 2. ALBUM HIGHLIGHTS */}
      |       <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
      |         
      |         {/* The Pizzicata Blues */}
      |         <div className="p-4 border border-neutral-200 dark:border-neutral-800 rounded-lg">
      |           <h4 className="font-bold text-lg mb-2 text-neutral-900 dark:text-neutral-50">
      |             {dict.pizzicata_title}
      |           </h4>
      |           <p className="text-sm text-neutral-700 dark:text-neutral-50">
      |             {dict.pizzicata_desc}
      |           </p>
      |           <Link 
      |             href={`/${lang}/blog/pizzicata-blues`}
      |             className="text-xs font-semibold mt-2 inline-block text-neutral-500 hover:text-blue-500 transition-colors"
      |           >
      |             {dict.pizzicata_link}
      |           </Link>
      |         </div>
      | 
      |         {/* Montreal Heist */}
      |         <div className="p-4 border border-neutral-200 dark:border-neutral-800 rounded-lg">
      |           <h4 className="font-bold text-lg mb-2 text-neutral-900 dark:text-neutral-50">
      |             {dict.heist_title}
      |           </h4>
      |           <p className="text-sm text-neutral-700 dark:text-neutral-50">
      |             {dict.heist_desc}
      |           </p>
      |           <Link 
      |             href="https://ffm.to/criminal_case_68"
      |             target="_blank"
      |             rel="noopener noreferrer"
      |             className="text-xs font-semibold mt-2 inline-block text-neutral-500 hover:text-blue-500 transition-colors"
      |           >
      |             {dict.listen_platforms}
      |           </Link>
      |         </div>
      |       </div>
      |     </div>
      |   )
      | }
      | --- END ---


    [DIR] game/
    ‚îú‚îÄ‚îÄ DelayedSubscribePopup.tsx
      | --- START: components/DelayedSubscribePopup.tsx ---
      | 'use client';
      | 
      | import { useState, useEffect } from 'react';
      | import Link from 'next/link';
      | import { usePathname } from 'next/navigation'; // Added to detect current page
      | import { sendGTMEvent } from '@next/third-parties/google';
      | 
      | interface DelayedSubscribePopupProps {
      |   lang: string;
      | }
      | 
      | function SubscribeCTAContent() {
      |   return (
      |     <section className="bg-neutral-900 text-white text-center py-12 px-4 rounded-lg shadow-2xl relative">
      |       <h2 className="text-3xl sm:text-4xl font-bold mb-4 tracking-tight">
      |         Stay Updated on Arman Ayva Projects
      |       </h2>
      |       
      |       <p className="text-lg mb-6 max-w-lg mx-auto text-neutral-300">
      |         Subscribe to receive the latest news, releases, and collaboration opportunities from 
      |         <strong className="text-white"> Arman Ayva ‚Äì Montreal Jazz Composer</strong>. Discover new tracks and upcoming projects first!
      |       </p>
      |       
      |       <Link
      |         href="/other/subscribe"
      |         target="_blank"
      |         rel="noopener noreferrer"
      |         className="inline-block bg-sky-500 hover:bg-sky-600 text-white font-bold py-3 px-8 rounded-lg text-lg transition-colors duration-300 shadow-xl"
      |         onClick={() => {
      |           sendGTMEvent({ event: 'conversion_click', action: 'subscribe_cta' })
      |         }}
      |       >
      |         Subscribe Now
      |       </Link>
      |       
      |       <p className="text-sm mt-3 text-neutral-400">
      |         Your email will only be used for Arman Ayva project updates.
      |       </p>
      |     </section>
      |   );
      | }
      | 
      | export function DelayedSubscribePopup({ lang }: DelayedSubscribePopupProps) {
      |   const [isVisible, setIsVisible] = useState(false);
      |   const pathname = usePathname(); // Get the current URL path
      |   const DELAY_TIME_MS = 30000; // 30 seconds
      | 
      |   useEffect(() => {
      |     // 1. Check if the current page is the 'about' page
      |     // This matches /en/about, /fr/about, /hy/about, etc.
      |     const isAboutPage = pathname?.endsWith('/about');
      | 
      |     if (!isAboutPage) return;
      | 
      |     // 2. Only start the timer if we are on the about page
      |     const timer = setTimeout(() => {
      |       setIsVisible(true);
      |     }, DELAY_TIME_MS);
      | 
      |     return () => clearTimeout(timer);
      |   }, [pathname]); // Re-run if the user navigates to a different page
      | 
      |   const closePopup = () => {
      |     setIsVisible(false);
      |   };
      | 
      |   // If not visible (either timer not finished or wrong page), return null
      |   if (!isVisible) {
      |     return null;
      |   }
      | 
      |   return (
      |     <div className="fixed inset-0 z-[9999] flex items-center justify-center bg-black bg-opacity-75 p-4" onClick={closePopup}>
      |       <div 
      |         className="relative max-w-xl w-full transform transition-all duration-300 scale-100 opacity-100" 
      |         onClick={(e) => e.stopPropagation()}
      |       >
      |         <SubscribeCTAContent />
      |         <button
      |           onClick={closePopup}
      |           className="absolute top-2 right-2 text-white hover:text-gray-300 text-2xl font-bold p-1 leading-none transition-colors"
      |           aria-label="Close subscription popup"
      |         >
      |           &times;
      |         </button>
      |       </div>
      |     </div>
      |   );
      | }
      | --- END ---

    ‚îú‚îÄ‚îÄ footer.tsx
      | --- START: components/footer.tsx ---
      | import Link from 'next/link';
      | import { FaSpotify, FaInstagram, FaYoutube, FaTiktok } from 'react-icons/fa';
      | import { SiLinktree, SiX } from 'react-icons/si';
      | 
      | // 1. Define the TypeScript interface for props
      | interface FooterProps {
      |   lang: string;
      | }
      | 
      | // 2. Accept the lang prop in the component
      | export function Footer({ lang }: FooterProps) {
      |   const currentYear = new Date().getFullYear();
      | 
      |   return (
      |     <footer className="mt-24 border-t border-neutral-200 dark:border-neutral-800 pt-10 pb-16 bg-neutral-50 dark:bg-neutral-700">
      |       <div className="mx-auto max-w-2xl px-4">
      |         <div className="grid grid-cols-2 md:grid-cols-4 gap-8">
      |           
      |           {/* Section 1: Music */}
      |           <div>
      |             <h3 className="text-md font-bold mb-3 tracking-tight text-neutral-700 dark:text-neutral-100">Music</h3>
      |             <ul className="space-y-2 text-sm">
      |               {/* Updated internal links to include /{lang} */}
      |               <li><Link href={`/${lang}/blog`} className="text-neutral-600 dark:text-neutral-400 hover:text-blue-500 transition-colors">All Releases</Link></li>
      |               <li><Link href={`/${lang}/videos`} className="text-neutral-600 dark:text-neutral-400 hover:text-blue-500 transition-colors">Videos (YouTube)</Link></li>
      |               <li><Link href={`/${lang}/radio`} className="text-neutral-600 dark:text-neutral-400 hover:text-blue-500 transition-colors">Detached Radio</Link></li>
      |               <li><Link href="https://armanayva.bandcamp.com/" target="_blank" rel="noopener noreferrer" className="text-neutral-600 dark:text-neutral-400 hover:text-blue-500 transition-colors">Bandcamp</Link></li>
      |             </ul>
      |           </div>
      | 
      |           {/* Section 2: Info & Legal */}
      |           <div>
      |             <h3 className="text-md font-bold mb-3 tracking-tight text-neutral-700 dark:text-neutral-100">Info</h3>
      |             <ul className="space-y-2 text-sm">
      |               <li><Link href={`/${lang}/about`} className="text-neutral-600 dark:text-neutral-400 hover:text-blue-500 transition-colors">About Arman</Link></li>
      |               <li><Link href={`/${lang}/contact`} className="text-neutral-600 dark:text-neutral-400 hover:text-blue-500 transition-colors">Contact</Link></li>
      |               <li><Link href={`/${lang}/other/subscribe`} className="text-neutral-600 dark:text-neutral-400 hover:text-blue-500 transition-colors">Subscribe</Link></li>
      |               <li><Link href={`/${lang}/music-production-disclaimer`} className="text-neutral-600 dark:text-neutral-400 hover:text-red-500 transition-colors">Production Disclaimer</Link></li> 
      |             </ul>
      |           </div>
      |           
      |           {/* Section 3 & 4: Connect */}
      |           <div className="col-span-2">
      |             <h3 className="text-md font-bold mb-3 tracking-tight text-neutral-700 dark:text-neutral-100">Connect</h3>
      |              <p className="text-sm text-neutral-600 dark:text-neutral-400">
      |                 Follow Arman Ayva for the latest news on jazz-funk releases, collaborations, and cinematic soundscapes.
      |              </p>
      |              <div className="mt-4 flex flex-wrap gap-4 items-center">
      |                 {/* Spotify */}
      |                 <a 
      |                     href="https://open.spotify.com/artist/1DukxxMpzFcNZx5iIJiSK4" 
      |                     target="_blank" 
      |                     rel="noopener noreferrer" 
      |                     className="text-2xl text-neutral-600 hover:text-blue-500 dark:text-neutral-400 dark:hover:text-blue-500 transition-colors"
      |                     aria-label="Spotify"
      |                 >
      |                     <FaSpotify />
      |                 </a>
      |                 
      |                 {/* YouTube */}
      |                 <a 
      |                     href="https://www.youtube.com/@armanayva" 
      |                     target="_blank" 
      |                     rel="noopener noreferrer" 
      |                     className="text-2xl text-neutral-600 hover:text-red-600 dark:text-neutral-400 dark:hover:text-red-600 transition-colors"
      |                     aria-label="YouTube"
      |                 >
      |                     <FaYoutube />
      |                 </a>
      |                 
      |                 {/* Instagram */}
      |                 <a 
      |                     href="https://www.instagram.com/armanayva/" 
      |                     target="_blank" 
      |                     rel="noopener noreferrer" 
      |                     className="text-2xl text-neutral-600 hover:text-pink-600 dark:text-neutral-400 dark:hover:text-pink-600 transition-colors"
      |                     aria-label="Instagram"
      |                 >
      |                     <FaInstagram />
      |                 </a>
      |                 
      |                 {/* TikTok */}
      |                 <a 
      |                     href="https://www.tiktok.com/@armanayva" 
      |                     target="_blank" 
      |                     rel="noopener noreferrer" 
      |                     className="text-2xl text-neutral-600 hover:text-black dark:text-neutral-400 dark:hover:text-white transition-colors"
      |                     aria-label="TikTok"
      |                 >
      |                     <FaTiktok />
      |                 </a>
      | 
      |                 {/* X (formerly Twitter) */}
      |                 <a 
      |                     href="https://x.com/ArmanAyva" 
      |                     target="_blank" 
      |                     rel="noopener noreferrer" 
      |                     className="text-2xl text-neutral-600 hover:text-black dark:text-neutral-400 dark:hover:text-white transition-colors"
      |                     aria-label="X (Twitter)"
      |                 >
      |                     <SiX />
      |                 </a>
      |                 
      |                 {/* Linktree */}
      |                 <a 
      |                     href="https://linktr.ee/armanayva" 
      |                     target="_blank" 
      |                     rel="noopener noreferrer" 
      |                     className="text-2xl text-neutral-600 hover:text-green-500 dark:text-neutral-400 dark:hover:text-green-500 transition-colors"
      |                     aria-label="Linktree"
      |                 >
      |                     <SiLinktree />
      |                 </a>
      | 
      |                 {/* Old Site Link */}
      |                 <a 
      |                     href="https://sites.google.com/view/armanayva/home" 
      |                     target="_blank" 
      |                     rel="noopener noreferrer" 
      |                     className="text-xs font-bold py-1 px-2 border border-neutral-600 rounded hover:bg-neutral-100 dark:border-neutral-400 dark:hover:bg-neutral-800 transition-colors"
      |                 >
      |                     Old Site
      |                 </a>
      |              </div>
      |           </div>
      |         </div>
      | 
      |         <div className="mt-12 text-center text-sm text-neutral-500 dark:text-neutral-500">
      |           ¬© {currentYear} Arman Ayva. All rights reserved.
      |         </div>
      |       </div>
      |     </footer>
      |   );
      | }
      | --- END ---

    ‚îú‚îÄ‚îÄ BandcampCTA.tsx
      | --- START: components/BandcampCTA.tsx ---
      | "use client"; // ‚¨ÖÔ∏è THIS IS CRUCIAL
      | 
      | import React from 'react';
      | 
      | // Use Tailwind classes here for a clean separation from MDX
      | export default function BandcampCTA({ albumUrl }: { albumUrl: string }) {
      |   // Define the base and hover styles using standard React state/hooks if necessary, 
      |   // but for simple hover effects, Tailwind classes are much easier.
      |   
      |   // Using inline styles for direct color manipulation like your original request:
      |   const baseStyle: React.CSSProperties = {
      |     display: 'inline-block',
      |     padding: '12px 24px',
      |     fontSize: '1.1rem',
      |     fontWeight: 'bold',
      |     color: '#fff',
      |     backgroundColor: '#262626', // Base color
      |     borderRadius: '6px',
      |     textDecoration: 'none',
      |     transition: 'background-color 0.3s',
      |   };
      | 
      |   return (
      |     <div style={{ textAlign: 'center', marginTop: '2rem', marginBottom: '2rem' }}>
      |       <a 
      |         href={albumUrl} 
      |         target="_blank" 
      |         rel="noopener noreferrer"
      |         style={baseStyle}
      |         // The event handlers now work because this component is marked "use client"
      |         onMouseOver={(e) => e.currentTarget.style.backgroundColor = '#1a1a1a'}
      |         onMouseOut={(e) => e.currentTarget.style.backgroundColor = '#262626'}
      |       >
      |         üéß Listen & Buy on Bandcamp
      |       </a>
      |     </div>
      |   );
      | }
      | --- END ---

    ‚îú‚îÄ‚îÄ album-cta.tsx
      | --- START: components/album-cta.tsx ---
      | import Link from 'next/link';
      | import Image from 'next/image'; // <-- Must be imported
      | 
      | const imageUrl = "https://res.cloudinary.com/dpmkshcky/image/upload/c_fill,g_auto,h_250,w_970/b_rgb:000000,e_gradient_fade,y_-0.10/c_scale,co_rgb:ffffff,fl_relative,l_text:montserrat_25_style_light_align_center:%20,w_0.1,y_0.1/v1763230260/Cowboy_a3mnzs.png";
      |   const imageAlt = "Album art for Cowboy by Arman Ayva";
      |   const imageWidth = 970; // Based on the w_970 in the URL
      |   const imageHeight = 250; // Based on the h_250 in the URL
      | export function AlbumCTA() {
      |   return (
      |     // Equivalent to style="background-color:#111111; color:#ffffff; text-align:center; padding:60px 20px;"
      |     <section className="s text-white text-center py-16 px-4 sm:px-6 lg:px-8">
      |             <hr></hr>
      | 
      |       {/* Equivalent to h2 style="font-size:2rem; margin-bottom:20px;" */}
      |       <h2 className="text-3xl sm:text-4xl font-bold mb-5 tracking-tight">
      |         Listet to new release ‚Äì Cowboy by Arman Ayva üé∑
      |       </h2>
      |       
      |       <div className="mx-auto mb-10 max-w-4xl rounded-lg overflow-hidden shadow-2xl">
      |         <Image
      |           src={imageUrl}
      |           alt={imageAlt}
      |           width={imageWidth}
      |           height={imageHeight}
      |           // The 'layout' prop is often replaced by 'fill' or implied sizing in newer Next.js versions.
      |           // Since you provided fixed w and h in the URL, we use standard width/height and 'object-cover'.
      |           className="object-cover w-full h-full" 
      |           priority // Use 'priority' if this is a high-priority image on the page (e.g., above the fold)
      |         />
      |       </div>
      |       {/* Equivalent to p style="font-size:1.1rem; margin-bottom:30px; max-width:600px;" */}
      |       <p className="text-lg mb-8 max-w-2xl mx-auto text-neutral-300">
      |         New music is out!<strong className="text-white"> Jazz, funk, and world fusion</strong> crafted by 
      |         **Arman Ayva ‚Äì Montreal Jazz Composer**. Ride over to Spotify ‚Äî find ‚ÄúCowboy.
      |       </p>
      |       
      |       {/* Button using Bandcamp's signature orange color (bg-orange-600 is a good match) */}
      |       <Link
      |         href="https://ffm.to/thecowboy" 
      |         target="_blank"
      |         rel="noopener noreferrer"
      |         className="inline-block bg-orange-600 hover:bg-orange-700 text-white font-bold py-4 px-10 rounded-lg text-lg transition-colors duration-300 shadow-xl"
      |       >
      |         Listen Now!
      |       </Link>
      |       
      |       {/* Equivalent to p style="font-size:0.9rem; margin-top:15px; color:#cccccc;" */}
      |       <p className="text-sm mt-4 text-neutral-400">
      |         Available now every musical platform !
      |       </p>
      |       <hr></hr>
      | 
      |    
      |       {/* Equivalent to h2 style="font-size:2rem; margin-bottom:20px;" */}
      |       <h2 className="text-3xl sm:text-4xl font-bold mb-5 tracking-tight">
      |         Get the Album ‚Äì My Funky Jazzification üé∑
      |       </h2>
      |       
      |       {/* Equivalent to p style="font-size:1.1rem; margin-bottom:30px; max-width:600px;" */}
      |       <p className="text-lg mb-8 max-w-2xl mx-auto text-neutral-300">
      |         Dive into 10 tracks of <strong className="text-white">jazz, funk, and world fusion</strong> crafted by 
      |         **Arman Ayva ‚Äì Montreal Jazz Composer**. Experience the full album now and support 
      |         independent music for just <strong className="text-white">$9</strong>.
      |       </p>
      |       {/* Button using Bandcamp's signature orange color (bg-orange-600 is a good match) */}
      |       <Link
      |         href="https://armanayva.bandcamp.com/album/my-funky-jazzification" 
      |         target="_blank"
      |         rel="noopener noreferrer"
      |         className="inline-block bg-orange-600 hover:bg-orange-700 text-white font-bold py-4 px-10 rounded-lg text-lg transition-colors duration-300 shadow-xl"
      |       >
      |         Buy Album for $9
      |       </Link>
      |       
      |       {/* Equivalent to p style="font-size:0.9rem; margin-top:15px; color:#cccccc;" */}
      |       <p className="text-sm mt-4 text-neutral-400">
      |         Available now on Bandcamp ‚Äì support independent jazz-funk music!
      |       </p>
      |             <hr></hr>
      | 
      |     </section>
      |   );
      | }
      | --- END ---

    ‚îú‚îÄ‚îÄ subscribe-cta.tsx
      | --- START: components/subscribe-cta.tsx ---
      | 'use client';
      | 
      | import Link from 'next/link';
      | 
      | export function SubscribeCTA({ lang, dict }: { lang: string; dict: any }) {
      |   // If dict is missing, we show nothing to prevent a crash, 
      |   // OR we use the default English keys.
      |   if (!dict) return null;
      | 
      |   return (
      |     <section className="bg-neutral-900 text-white text-center py-16 px-4 sm:px-6 lg:px-8 rounded-2xl shadow-2xl">
      |       <h2 className="text-3xl sm:text-4xl font-bold mb-5 tracking-tight">
      |         {dict.title || "Stay Updated on Arman Ayva Projects"}
      |       </h2>
      |       
      |       <p className="text-lg mb-8 max-w-2xl mx-auto text-neutral-300">
      |         {dict.description || "Subscribe to receive the latest news, releases, and collaboration opportunities."}
      |       </p>
      |       
      |       <Link
      |         href={`/${lang}/other/subscribe`}
      |         target="_blank"
      |         rel="noopener noreferrer"
      |         className="inline-block bg-sky-500 hover:bg-sky-600 text-white font-bold py-4 px-10 rounded-lg text-lg transition-colors duration-300 shadow-xl"
      |       >
      |         {dict.button || "Subscribe Now"}
      |       </Link>
      |       
      |       <p className="text-sm mt-4 text-neutral-400">
      |         {dict.disclaimer || "Your email will only be used for project updates."}
      |       </p>
      |     </section>
      |   );
      | }
      | --- END ---

    ‚îú‚îÄ‚îÄ ThemeToggle.tsx
      | --- START: components/ThemeToggle.tsx ---
      | 'use client';
      | 
      | import { useTheme } from 'next-themes';
      | import { useEffect, useState } from 'react';
      | import { FaSun, FaMoon } from 'react-icons/fa'; 
      | 
      | export function ThemeToggle() {
      |   const [mounted, setMounted] = useState(false);
      |   const { theme, setTheme } = useTheme();
      | 
      |   // useEffect runs only on the client side, ensuring correct hydration
      |   useEffect(() => setMounted(true), []);
      | 
      |   if (!mounted) {
      |     // Return an empty div or placeholder to prevent layout shift during hydration
      |     return <div className="w-6 h-6" />; 
      |   }
      | 
      |   const isDark = theme === 'dark';
      | 
      |   return (
      |     <button
      |       aria-label="Toggle Dark Mode"
      |       type="button"
      |       className="w-6 h-6 flex items-center justify-center text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-100 transition-colors"
      |       onClick={() => setTheme(isDark ? 'light' : 'dark')}
      |     >
      |       {isDark ? <FaSun className="w-5 h-5" /> : <FaMoon className="w-5 h-5" />}
      |     </button>
      |   );
      | }
      | 
      | --- END ---

    ‚îú‚îÄ‚îÄ Logo.tsx
      | --- START: components/Logo.tsx ---
      | // components/Logo.tsx
      | import Image from 'next/image';
      | 
      | export default function Logo() {
      |   return (
      |     <div className="w-[70px] h-[70px]"> {/* Fixed container prevents layout shift */}
      |       <Image
      |         src="/logo.gif" 
      |         alt="Arman Ayva Company Logo"
      |         width={70} 
      |         height={70}
      |         unoptimized={true} // Required for GIF animation
      |         priority // Loads immediately as it's a key brand element
      |         className="object-cover rounded-full border-2 border-black shadow-lg"
      |       />
      |     </div>
      |   );
      | }
      | --- END ---

    ‚îú‚îÄ‚îÄ header.tsx
      | --- START: components/header.tsx ---
      | import Link from 'next/link';
      | 
      | const navItems = [
      |   { name: 'About', path: '/about' },
      |   { name: 'Blog', path: '/blog' },
      |   { name: 'Videos', path: '/videos' }, // New
      |   { name: 'Radio', path: '/radio' },   // New
      |   { name: 'Contact', path: '/contact' },
      | ];
      | 
      | export function Header() {
      |   return (
      |     <header className="fixed w-full top-0 z-10 bg-white/70 dark:bg-black/70 backdrop-blur-md transition-colors duration-500 border-b border-neutral-200 dark:border-neutral-800">
      |       <div className="mx-auto max-w-2xl px-4">
      |         <nav className="flex items-center justify-between py-4">
      |           
      |           {/* Logo/Home Link */}
      |           <Link href="/" className="text-lg font-bold tracking-tighter text-neutral-900 dark:text-neutral-100 hover:text-blue-500 transition-colors">
      |             Arman Ayva
      |           </Link>
      | 
      |           {/* Navigation Links */}
      |           <div className="flex space-x-4">
      |             {navItems.map((item) => (
      |               <Link 
      |                 key={item.name} 
      |                 href={item.path} 
      |                 className="text-sm font-medium text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-100 transition-colors"
      |               >
      |                 {item.name}
      |               </Link>
      |             ))}
      |           </div>
      |         </nav>
      |       </div>
      |     </header>
      |   );
      | }
      | --- END ---

    ‚îú‚îÄ‚îÄ posts.tsx
      | --- START: components/posts.tsx ---
      | import Link from 'next/link'
      | import { formatDate, getBlogPosts } from 'app/[lang]/blog/utils'
      | 
      | // 1. Define the interface for the props
      | interface BlogPostsProps {
      |   lang: string
      | }
      | 
      | // 2. Pass the lang prop into the function
      | export function BlogPosts({ lang }: BlogPostsProps) {
      |   // 3. Pass lang to getBlogPosts to fetch the correct localized content
      |   let allBlogs = getBlogPosts(lang)
      | 
      |   return (
      |     <div>
      |       {allBlogs
      |         .sort((a, b) => {
      |           if (
      |             new Date(a.metadata.publishedAt) > new Date(b.metadata.publishedAt)
      |           ) {
      |             return -1
      |           }
      |           return 1
      |         })
      |         .map((post) => (
      |           <Link
      |             key={post.slug}
      |             className="flex flex-col space-y-1 mb-4"
      |             // 4. Update the href to include the language prefix
      |             href={`/${lang}/blog/${post.slug}`}
      |           >
      |             <div className="w-full flex flex-col md:flex-row space-x-0 md:space-x-2 text-neutral-400">
      |               {/* FIX 1: White date text in dark mode */}
      |               <p className="text-neutral-600 dark:text-neutral-50 w-[150px] tabular-nums">
      |                 {formatDate(post.metadata.publishedAt, false)}
      |               </p>
      |               {/* FIX 2: White title text in dark mode */}
      |               <p className="tracking-tight text-neutral-900 dark:text-neutral-50">
      |                 {post.metadata.title}
      |               </p>
      |             </div>
      |           </Link>
      |         ))}
      |     </div>
      |   )
      | }
      | --- END ---

    ‚îú‚îÄ‚îÄ SmartLink.tsx
      | --- START: components/SmartLink.tsx ---
      | 'use client';
      | 
      | import Link from 'next/link';
      | import React, { ReactNode } from 'react';
      | 
      | // Define the props for our smart link component
      | interface SmartLinkProps {
      |   href: string;
      |   children: ReactNode;
      |   className?: string;
      |   onClick?: () => void; // Optional click handler (for things like closing a menu)
      | }
      | 
      | /**
      |  * A reusable component that intelligently renders either:
      |  * 1. An internal Next.js <Link> component (for internal navigation).
      |  * 2. A standard <a> tag with target="_blank" and rel="noopener noreferrer" 
      |  * (for external URLs, preventing popup/security issues).
      |  */
      | export function SmartLink({ href, children, className, onClick }: SmartLinkProps) {
      |   // Check if the link starts with 'http://', 'https://', or 'mailto:'
      |   const isExternal = 
      |     href.startsWith('http://') || 
      |     href.startsWith('https://') || 
      |     href.startsWith('mailto:');
      | 
      |   if (isExternal) {
      |     // Render a standard <a> tag for external links
      |     return (
      |       <a
      |         href={href}
      |         className={className}
      |         target="_blank" // Opens in a new tab
      |         rel="noopener noreferrer" // Essential security attributes
      |         onClick={onClick} // Pass through the click handler (optional)
      |       >
      |         {children}
      |       </a>
      |     );
      |   }
      | 
      |   // Render the Next.js Link component for internal links
      |   return (
      |     <Link href={href} className={className} onClick={onClick}>
      |       {children}
      |     </Link>
      |   );
      | }
      | --- END ---

    ‚îú‚îÄ‚îÄ Reviews.tsx
      | --- START: components/Reviews.tsx ---
      | import Link from 'next/link';
      | 
      | export function Reviews({ lang, dict }: { lang: string; dict: any }) {
      |   if (!dict) return null;
      | 
      |   return (
      |     <section id="feedback" className="py-8">
      |       <h2 className="font-bold text-3xl font-serif mb-8 tracking-tighter text-neutral-900 dark:text-neutral-50">
      |         {dict.title}
      |       </h2>
      | 
      |       {/* Main Featured Review */}
      |       {dict.featured && (
      |         <article className="mb-12 p-6 bg-blue-50 dark:bg-neutral-900 border-l-4 border-blue-500 rounded-r-xl shadow-sm">
      |           <h3 className="text-2xl font-bold mb-4">
      |             <a href={dict.featured.link} target="_blank" rel="noopener noreferrer" className="hover:text-blue-600 transition-colors">
      |               {dict.featured.title}
      |             </a>
      |           </h3>
      |           <p className="text-neutral-700 dark:text-neutral-300 leading-relaxed">
      |             {dict.featured.text}
      |           </p>
      |         </article>
      |       )}
      | 
      |       {/* Review Grid */}
      |       <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
      |         {dict.grid?.map((item: any, idx: number) => (
      |           <div key={idx} className="p-5 border border-neutral-200 dark:border-neutral-800 rounded-xl bg-neutral-50 dark:bg-neutral-900/50 flex flex-col justify-between">
      |             <div>
      |               <h4 className="font-bold text-lg mb-1">{item.name}</h4>
      |               <p className="text-sm italic text-neutral-600 dark:text-neutral-400">"{item.quote}"</p>
      |             </div>
      |             {item.label && (
      |               <span className="text-[10px] mt-4 uppercase tracking-widest text-blue-500 font-bold">{item.label}</span>
      |             )}
      |           </div>
      |         ))}
      |       </div>
      | 
      |       <div className="mt-12 text-center">
      |         <Link href={`/${lang}/contact`} className="text-sm font-semibold text-neutral-500 hover:text-blue-500 transition-colors">
      |           {dict.contact_cta}
      |         </Link>
      |       </div>
      |     </section>
      |   );
      | }
      | --- END ---

    ‚îú‚îÄ‚îÄ PlaylistDiscovery.tsx
      | --- START: components/PlaylistDiscovery.tsx ---
      | 'use client'
      | 
      | import { useState } from 'react'
      | import { analyzePlaylistDiscovery } from '../actions'
      | 
      | interface PlaylistDiscoveryProps {
      |   id: string
      |   name: string
      |   artists: string[]
      | }
      | 
      | export function PlaylistDiscovery({ id, name, artists }: PlaylistDiscoveryProps) {
      |   const [data, setData] = useState<any>(null)
      |   const [loading, setLoading] = useState(false)
      |   const [error, setError] = useState<string | null>(null) // New Error State
      | 
      |   const handleAnalyze = async () => {
      |     setLoading(true)
      |     setError(null)
      |     
      |     try {
      |       const result = await analyzePlaylistDiscovery(id, name, artists)
      |       
      |       // Check if the server returned an error
      |       if (result.error) {
      |         setError("Spotify API Error: " + result.error)
      |       } else {
      |         setData(result)
      |       }
      |     } catch (e) {
      |       setError("Failed to connect to analysis server.")
      |       console.error(e)
      |     }
      |     setLoading(false)
      |   }
      | 
      |   return (
      |     <div className="my-8 border-t border-neutral-200 dark:border-neutral-800 pt-8">
      |       <div className="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6">
      |         <div>
      |           <h3 className="font-semibold text-lg text-neutral-900 dark:text-neutral-100">
      |             Discovered On Analysis
      |           </h3>
      |           <p className="text-neutral-500 text-sm">
      |             Analyze the impact of this playlist on artist discovery
      |           </p>
      |         </div>
      |         
      |         {!data && !error && (
      |           <button
      |             onClick={handleAnalyze}
      |             disabled={loading}
      |             className="px-4 py-2 bg-neutral-900 dark:bg-neutral-100 text-white dark:text-black text-sm font-medium rounded-full hover:opacity-80 disabled:opacity-50 transition-all"
      |           >
      |             {loading ? 'Analyzing...' : 'Analyze'}
      |           </button>
      |         )}
      |       </div>
      | 
      |       {/* ERROR MESSAGE DISPLAY */}
      |       {error && (
      |         <div className="p-4 rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 text-sm mb-4">
      |           <strong>Error:</strong> {error} <br/>
      |           <span className="text-xs opacity-80">Check your server logs or environment variables.</span>
      |         </div>
      |       )}
      | 
      |       {/* SUCCESS DATA DISPLAY */}
      |       {data && !error && (
      |         <div className="animate-in fade-in slide-in-from-bottom-2 duration-500">
      |           <div className="flex items-center gap-2 mb-4 text-xs text-neutral-400">
      |             <span className="w-2 h-2 rounded-full bg-green-500 animate-pulse"/>
      |             Last analyzed less than a minute ago
      |           </div>
      | 
      |           <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
      |             
      |             {/* Metric 1: Percentage */}
      |             <div className="p-4 rounded-xl bg-neutral-50 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800">
      |               <div className="text-sm font-medium text-neutral-600 dark:text-neutral-400 mb-1">
      |                 Artists in Discovered On
      |               </div>
      |               <div className="text-2xl font-bold text-neutral-900 dark:text-neutral-100">
      |                 {data.percentage}%
      |               </div>
      |               <div className="mt-2 text-xs text-neutral-500 leading-relaxed">
      |                 The percentage of artists in this playlist who have this playlist in their 'Discovered On' section.
      |               </div>
      |             </div>
      | 
      |             {/* Metric 2: Score */}
      |             <div className="p-4 rounded-xl bg-neutral-50 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800">
      |               <div className="flex justify-between items-start">
      |                  <div className="text-sm font-medium text-neutral-600 dark:text-neutral-400 mb-1">
      |                     Discovery Score
      |                  </div>
      |                  <div className={`text-xs font-bold px-2 py-1 rounded-full border 
      |                     ${data.score >= 70 ? 'bg-green-100 text-green-700 border-green-200' : 
      |                       data.score >= 40 ? 'bg-blue-100 text-blue-700 border-blue-200' : 
      |                       'bg-orange-100 text-orange-700 border-orange-200'}`}>
      |                     {data.rating}
      |                  </div>
      |               </div>
      |               
      |               <div className="text-2xl font-bold text-neutral-900 dark:text-neutral-100">
      |                 {data.score}
      |               </div>
      |               
      |               <div className="mt-2 text-xs text-neutral-500 leading-relaxed">
      |                 A score from 0-100 that indicates the playlist's effectiveness at breaking new artists.
      |               </div>
      |               
      |               {/* Score Bar */}
      |               <div className="mt-3 h-1.5 w-full bg-neutral-200 dark:bg-neutral-800 rounded-full overflow-hidden">
      |                 <div 
      |                   className={`h-full rounded-full transition-all duration-1000 ${
      |                     data.score >= 70 ? 'bg-green-500' : 
      |                     data.score >= 40 ? 'bg-blue-500' : 
      |                     'bg-orange-500'
      |                   }`}
      |                   style={{ width: `${data.score}%` }}
      |                 />
      |               </div>
      |             </div>
      | 
      |           </div>
      |         </div>
      |       )}
      |     </div>
      |   )
      | }
      | --- END ---

    ‚îú‚îÄ‚îÄ LanguageSwitcher.tsx
      | --- START: components/LanguageSwitcher.tsx ---
      | 'use client';
      | 
      | import Link from 'next/link';
      | import { usePathname } from 'next/navigation';
      | import { useState, useRef, useEffect } from 'react';
      | import { FaGlobe } from 'react-icons/fa';
      | 
      | export function LanguageSwitcher({ currentLang }: { currentLang: string }) {
      |   const [isOpen, setIsOpen] = useState(false);
      |   const pathname = usePathname();
      |   const dropdownRef = useRef<HTMLDivElement>(null);
      | 
      |   // Supported languages from your middleware
      |   const locales = [
      |     { code: 'en', label: 'English' },
      |     { code: 'fr', label: 'Fran√ßais' },
      |     { code: 'es', label: 'Espa√±ol' },
      |     { code: 'it', label: 'Italiano' },
      |     { code: 'de', label: 'Deutsch' },
      |     { code: 'hy', label: '’Ä’°’µ’•÷Ä’•’∂' },
      |     { code: 'ru', label: '–†—É—Å—Å–∫–∏–π' },
      |     { code: 'ar', label: 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©' },
      |   ];
      | 
      |   const getRedirectedPath = (locale: string) => {
      |     if (!pathname) return '/';
      |     const segments = pathname.split('/');
      |     segments[1] = locale; // Replace the /[lang] segment
      |     return segments.join('/');
      |   };
      | 
      |   // Close dropdown when clicking outside
      |   useEffect(() => {
      |     const handleClickOutside = (e: MouseEvent) => {
      |       if (dropdownRef.current && !dropdownRef.current.contains(e.target as Node)) {
      |         setIsOpen(false);
      |       }
      |     };
      |     document.addEventListener('mousedown', handleClickOutside);
      |     return () => document.removeEventListener('mousedown', handleClickOutside);
      |   }, []);
      | 
      |   return (
      |     <div className="relative inline-block text-left" ref={dropdownRef}>
      |       <button
      |         onClick={() => setIsOpen(!isOpen)}
      |         className="flex items-center gap-2 px-3 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-lg transition-colors"
      |       >
      |         <FaGlobe className="text-lg" />
      |         <span className="uppercase">{currentLang}</span>
      |       </button>
      | 
      |       {isOpen && (
      |         <div className="absolute right-0 mt-2 w-40 origin-top-right rounded-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 shadow-2xl z-[100] overflow-hidden">
      |           <div className="py-1 grid grid-cols-1">
      |             {locales.map((loc) => (
      |               <Link
      |                 key={loc.code}
      |                 href={getRedirectedPath(loc.code)}
      |                 onClick={() => setIsOpen(false)}
      |                 className={`px-4 py-2 text-sm transition-colors ${
      |                   currentLang === loc.code
      |                     ? 'bg-neutral-100 dark:bg-neutral-800 text-blue-600 font-bold'
      |                     : 'text-neutral-600 dark:text-neutral-400 hover:bg-neutral-50 dark:hover:bg-neutral-800'
      |                 }`}
      |               >
      |                 {loc.label}
      |               </Link>
      |             ))}
      |           </div>
      |         </div>
      |       )}
      |     </div>
      |   );
      | }
      | --- END ---

    ‚îú‚îÄ‚îÄ PlaylistUrlInput.tsx
      | --- START: components/PlaylistUrlInput.tsx ---
      | 'use client'
      | 
      | import { useState } from 'react'
      | // This import will now work because we added the function above
      | import { fetchPlaylistMetadata } from '../actions'
      | import { PlaylistDiscovery } from './PlaylistDiscovery'
      | 
      | export default function PlaylistUrlInput() {
      |    const [url, setUrl] = useState('')
      |    const [data, setData] = useState<any>(null)
      |    const [loading, setLoading] = useState(false)
      |    const [error, setError] = useState<string | null>(null)
      | 
      |    const handleLoad = async () => {
      |       if (!url) return;
      |       
      |       setLoading(true)
      |       setError(null)
      |       setData(null)
      | 
      |       const result = await fetchPlaylistMetadata(url);
      |       
      |       if (result.error) {
      |          setError(result.error)
      |       } else {
      |          setData(result)
      |       }
      |       setLoading(false)
      |    }
      | 
      |    return (
      |       <div className="w-full max-w-2xl mx-auto my-12">
      |           {/* Header */}
      |           <div className="text-center mb-8">
      |             <h2 className="text-2xl font-bold text-neutral-900 dark:text-neutral-100">
      |                Playlist Analyzer
      |             </h2>
      |             <p className="text-neutral-500 mt-2">
      |                Paste a Spotify link to calculate its discovery score.
      |             </p>
      |           </div>
      | 
      |           {/* Input Field */}
      |           <div className="flex flex-col sm:flex-row gap-3">
      |              <input 
      |                 className="flex-1 p-3 rounded-xl border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 focus:ring-2 focus:ring-black dark:focus:ring-white outline-none transition-all"
      |                 placeholder="https://open.spotify.com/playlist/..."
      |                 value={url}
      |                 onChange={(e) => setUrl(e.target.value)}
      |                 onKeyDown={(e) => e.key === 'Enter' && handleLoad()}
      |              />
      |              <button 
      |                 onClick={handleLoad}
      |                 disabled={loading || !url}
      |                 className="px-6 py-3 bg-black dark:bg-white text-white dark:text-black font-bold rounded-xl hover:opacity-80 disabled:opacity-50 disabled:cursor-not-allowed transition-all"
      |              >
      |                 {loading ? 'Loading...' : 'Load Playlist'}
      |              </button>
      |           </div>
      |           
      |           {/* Error Message */}
      |           {error && (
      |              <div className="mt-4 p-4 bg-red-50 text-red-600 rounded-xl border border-red-100 text-sm">
      |                 üö® {error}
      |              </div>
      |           )}
      | 
      |           {/* Success Result */}
      |           {data && (
      |              <div className="mt-8 animate-in fade-in slide-in-from-bottom-4 duration-500">
      |                 <div className="p-4 bg-neutral-50 dark:bg-neutral-900 rounded-t-2xl border-x border-t border-neutral-200 dark:border-neutral-800 flex justify-between items-center">
      |                    <div>
      |                       <span className="text-xs uppercase tracking-wider text-neutral-500 font-semibold">Analyzed Playlist</span>
      |                       <div className="font-bold text-lg text-neutral-900 dark:text-neutral-100">{data.name}</div>
      |                    </div>
      |                    <button 
      |                       onClick={() => setData(null)} 
      |                       className="text-xs text-neutral-400 hover:text-red-500"
      |                    >
      |                       Clear
      |                    </button>
      |                 </div>
      | 
      |                 {/* Vibe Stats Bar */}
      |                 <div className="grid grid-cols-3 divide-x divide-neutral-200 dark:divide-neutral-800 bg-white dark:bg-black border-x border-neutral-200 dark:border-neutral-800">
      |                     <div className="p-4 text-center">
      |                         <div className="text-xs text-neutral-500 uppercase tracking-wider font-semibold mb-1">Avg Tempo</div>
      |                         <div className="text-xl font-bold text-neutral-900 dark:text-neutral-100">{data.tempo} BPM</div>
      |                     </div>
      |                     <div className="p-4 text-center">
      |                         <div className="text-xs text-neutral-500 uppercase tracking-wider font-semibold mb-1">Mood</div>
      |                         <div className="text-xl font-bold text-neutral-900 dark:text-neutral-100 whitespace-nowrap">{data.mood}</div>
      |                     </div>
      |                     <div className="p-4 text-center">
      |                         <div className="text-xs text-neutral-500 uppercase tracking-wider font-semibold mb-1">Energy</div>
      |                         <div className="text-xl font-bold text-neutral-900 dark:text-neutral-100">{data.energy}%</div>
      |                     </div>
      |                 </div>
      |                 
      |                 {/* Embed the Existing Analyzer */}
      |                 <div className="bg-white dark:bg-black border border-neutral-200 dark:border-neutral-800 rounded-b-2xl p-6 shadow-sm">
      |                    <PlaylistDiscovery 
      |                       id={data.id} 
      |                       name={data.name} 
      |                       artists={data.artists} 
      |                    />
      |                 </div>
      |              </div>
      |           )}
      |       </div>
      |    )
      | }
      | --- END ---

    ‚îú‚îÄ‚îÄ contact-form.tsx
      | --- START: components/contact-form.tsx ---
      | 'use client';
      | 
      | import React, { useState } from 'react';
      | 
      | // Define the shape of the form data
      | interface FormData {
      |   name: string;
      |   email: string;
      |   message: string;
      | }
      | 
      | export function ContactForm() {
      |   const [formData, setFormData] = useState<FormData>({
      |     name: '',
      |     email: '',
      |     message: '',
      |   });
      |   const [status, setStatus] = useState<'idle' | 'loading' | 'success' | 'error'>('idle');
      |   const [message, setMessage] = useState<string>('');
      | 
      |   const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {
      |     setFormData({
      |       ...formData,
      |       [e.target.name]: e.target.value,
      |     });
      |   };
      | 
      |   const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {
      |     e.preventDefault();
      |     setStatus('loading');
      |     setMessage('');
      | 
      |     try {
      |       const response = await fetch('/api/contact', {
      |         method: 'POST',
      |         headers: {
      |           'Content-Type': 'application/json',
      |         },
      |         body: JSON.stringify(formData),
      |       });
      | 
      |       const result = await response.json();
      | 
      |       if (response.ok) {
      |         setStatus('success');
      |         setMessage(result.message || 'Message sent successfully! I will be in touch soon.');
      |         setFormData({ name: '', email: '', message: '' }); // Clear form
      |       } else {
      |         setStatus('error');
      |         setMessage(result.message || 'Failed to send message. Please check your inputs.');
      |       }
      |     } catch (error) {
      |       console.error('Submission error:', error);
      |       setStatus('error');
      |       setMessage('A network error occurred. Please try again.');
      |     }
      |   };
      | 
      |   const getStatusMessage = () => {
      |     if (status === 'loading') return 'Sending...';
      |     if (status === 'success') return message;
      |     if (status === 'error') return message;
      |     return '';
      |   };
      | 
      |   return (
      |     <div className="max-w-xl mx-auto py-10">
      |       
      |       {/* Form Status Message */}
      |       {status !== 'idle' && (
      |         <div 
      |           className={`p-4 mb-6 rounded-lg font-medium transition-opacity ${
      |             status === 'success' ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200' :
      |             status === 'error' ? 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200' :
      |             'bg-neutral-100 text-neutral-800 dark:bg-neutral-800 dark:text-neutral-200'
      |           }`}
      |         >
      |           {getStatusMessage()}
      |         </div>
      |       )}
      | 
      |       <form onSubmit={handleSubmit} className="space-y-6">
      |         
      |         {/* Name Input */}
      |         <div>
      |           <label htmlFor="name" className="block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1">
      |             Name
      |           </label>
      |           <input
      |             type="text"
      |             id="name"
      |             name="name"
      |             value={formData.name}
      |             onChange={handleChange}
      |             required
      |             disabled={status === 'loading'}
      |             className="w-full px-4 py-2 border border-neutral-300 dark:border-neutral-700 rounded-xl bg-white dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100 focus:ring-blue-500 focus:border-blue-500 transition-shadow disabled:opacity-70"
      |           />
      |         </div>
      | 
      |         {/* Email Input */}
      |         <div>
      |           <label htmlFor="email" className="block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1">
      |             Email
      |           </label>
      |           <input
      |             type="email"
      |             id="email"
      |             name="email"
      |             value={formData.email}
      |             onChange={handleChange}
      |             required
      |             disabled={status === 'loading'}
      |             className="w-full px-4 py-2 border border-neutral-300 dark:border-neutral-700 rounded-xl bg-white dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100 focus:ring-blue-500 focus:border-blue-500 transition-shadow disabled:opacity-70"
      |           />
      |         </div>
      | 
      |         {/* Message Textarea */}
      |         <div>
      |           <label htmlFor="message" className="block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1">
      |             Message
      |           </label>
      |           <textarea
      |             id="message"
      |             name="message"
      |             rows={5}
      |             value={formData.message}
      |             onChange={handleChange}
      |             required
      |             disabled={status === 'loading'}
      |             className="w-full px-4 py-2 border border-neutral-300 dark:border-neutral-700 rounded-xl bg-white dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100 focus:ring-blue-500 focus:border-blue-500 transition-shadow resize-none disabled:opacity-70"
      |           />
      |         </div>
      | 
      |         {/* Submit Button */}
      |         <button
      |           type="submit"
      |           disabled={status === 'loading'}
      |           className="w-full flex justify-center items-center py-3 px-6 border border-transparent rounded-xl shadow-sm text-lg font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200 disabled:bg-blue-400 dark:disabled:bg-blue-800"
      |         >
      |           {status === 'loading' ? (
      |             <svg className="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
      |               <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
      |               <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
      |             </svg>
      |           ) : (
      |             'Send Message'
      |           )}
      |         </button>
      |       </form>
      |     </div>
      |   );
      | }
      | --- END ---

      ‚îú‚îÄ‚îÄ MusicTrivia.tsx
        | --- START: components/game/MusicTrivia.tsx ---
        | 'use client';
        | //
        | import { useState } from 'react';
        | import { FaLightbulb, FaCheck, FaTimes, FaUndo } from 'react-icons/fa';
        | // Try this specific absolute path if @/ fails
        | import questions from 'dictionaries/trivia-en.json';
        | 
        | export function MusicalTrivia() {
        |   const [currentIdx, setCurrentIdx] = useState(0);
        |   const [score, setScore] = useState(0);
        |   const [showResult, setShowResult] = useState(false);
        |   const [selectedAnswer, setSelectedAnswer] = useState<number | null>(null);
        | 
        |   const handleAnswer = (idx: number) => {
        |     if (selectedAnswer !== null) return;
        |     setSelectedAnswer(idx);
        |     if (idx === questions[currentIdx].correct) setScore(score + 1);
        |   };
        | 
        |   const nextQuestion = () => {
        |     setSelectedAnswer(null);
        |     if (currentIdx + 1 < questions.length) {
        |       setCurrentIdx(currentIdx + 1);
        |     } else {
        |       setShowResult(true);
        |     }
        |   };
        | 
        |   if (showResult) {
        |     return (
        |       <div className="text-center p-10 bg-white dark:bg-neutral-900 rounded-3xl border-2 border-dashed border-neutral-200 dark:border-neutral-800">
        |         <h3 className="text-4xl font-bold mb-2">Arcade Complete! üèÜ</h3>
        |         <p className="text-neutral-500 mb-8">You scored {score} / {questions.length}</p>
        |         <button 
        |           onClick={() => { setCurrentIdx(0); setScore(0); setShowResult(false); }}
        |           className="flex items-center gap-2 mx-auto px-6 py-3 bg-black dark:bg-white text-white dark:text-black rounded-full font-bold"
        |         >
        |           <FaUndo /> Play Again
        |         </button>
        |       </div>
        |     );
        |   }
        | 
        |   const q = questions[currentIdx];
        | 
        |   return (
        |     <div className="max-w-2xl mx-auto">
        |       {/* Progress */}
        |       <div className="mb-6">
        |         <div className="flex justify-between text-xs font-bold uppercase tracking-widest text-neutral-400 mb-2">
        |           <span>Question {currentIdx + 1} of {questions.length}</span>
        |           <span>Score: {score}</span>
        |         </div>
        |         <div className="h-1 w-full bg-neutral-100 dark:bg-neutral-800 rounded-full">
        |           <div 
        |             className="h-full bg-blue-500 transition-all duration-500" 
        |             style={{ width: `${((currentIdx + 1) / questions.length) * 100}%` }}
        |           />
        |         </div>
        |       </div>
        | 
        |       <div className="p-8 rounded-3xl bg-neutral-50 dark:bg-neutral-900/50 border border-neutral-200 dark:border-neutral-800 shadow-sm">
        |         <h3 className="text-2xl font-bold mb-8 leading-tight">{q.question}</h3>
        |         
        |         <div className="grid gap-3">
        |           {q.options.map((option, idx) => {
        |             const isCorrect = idx === q.correct;
        |             const isSelected = selectedAnswer === idx;
        |             const statusClass = selectedAnswer === null 
        |               ? "hover:border-blue-500 hover:bg-white dark:hover:bg-black" 
        |               : isCorrect ? "border-green-500 bg-green-50 dark:bg-green-900/20 text-green-700" 
        |               : isSelected ? "border-red-500 bg-red-50 dark:bg-red-900/20 text-red-700" 
        |               : "opacity-40";
        | 
        |             return (
        |               <button
        |                 key={idx}
        |                 disabled={selectedAnswer !== null}
        |                 onClick={() => handleAnswer(idx)}
        |                 className={`p-4 rounded-xl border-2 text-left font-bold transition-all flex justify-between items-center ${statusClass}`}
        |               >
        |                 {option}
        |                 {selectedAnswer !== null && isCorrect && <FaCheck className="text-green-500" />}
        |                 {selectedAnswer !== null && isSelected && !isCorrect && <FaTimes className="text-red-500" />}
        |               </button>
        |             );
        |           })}
        |         </div>
        | 
        |         {selectedAnswer !== null && (
        |           <div className="mt-8 animate-in fade-in slide-in-from-bottom-2">
        |             <div className="p-4 rounded-2xl bg-blue-50 dark:bg-blue-900/10 border border-blue-100 dark:border-blue-800/50 flex gap-4">
        |               <FaLightbulb className="text-blue-500 mt-1 flex-shrink-0" />
        |               <p className="text-sm text-blue-900 dark:text-blue-300">
        |                 <span className="font-bold">Fact: </span>{q.fact}
        |               </p>
        |             </div>
        |             <button 
        |               onClick={nextQuestion}
        |               className="mt-6 w-full py-4 bg-blue-600 text-white rounded-2xl font-bold shadow-lg shadow-blue-500/20"
        |             >
        |               Next Question
        |             </button>
        |           </div>
        |         )}
        |       </div>
        |     </div>
        |   );
        | }
        | --- END ---

      ‚îú‚îÄ‚îÄ MusicCTA.tsx
        | --- START: components/game/MusicCTA.tsx ---
        | "use client"; // ‚¨ÖÔ∏è Must stay at the top!
        | 
        | import React from 'react';
        | 
        | // Make the component accept label, background color, and URL as props
        | export default function MusicCTA({ 
        |     albumUrl, 
        |     label, 
        |     baseColor, 
        |     hoverColor 
        | }: { 
        |     albumUrl: string; 
        |     label: string; 
        |     baseColor: string; 
        |     hoverColor: string; 
        | }) {
        |   
        |   const baseStyle: React.CSSProperties = {
        |     display: 'inline-block',
        |     padding: '12px 24px',
        |     fontSize: '1.1rem',
        |     fontWeight: 'bold',
        |     color: '#fff',
        |     backgroundColor: baseColor, 
        |     borderRadius: '6px',
        |     textDecoration: 'none',
        |     transition: 'background-color 0.3s',
        |   };
        | 
        |   return (
        |     <div style={{ textAlign: 'center', marginTop: '2rem', marginBottom: '2rem' }}>
        |       <a 
        |         href={albumUrl} 
        |         target="_blank" 
        |         rel="noopener noreferrer"
        |         style={baseStyle}
        |         // Event handlers now work
        |         onMouseOver={(e) => e.currentTarget.style.backgroundColor = hoverColor}
        |         onMouseOut={(e) => e.currentTarget.style.backgroundColor = baseColor}
        |       >
        |         {label}
        |       </a>
        |     </div>
        |   );
        | }
        | --- END ---

      ‚îú‚îÄ‚îÄ GameSection.tsx
        | --- START: components/game/GameSection.tsx ---
        | // app/components/GameSection.tsx
        | import { ReactNode } from 'react';
        | 
        | interface GameSectionProps {
        |   phase: string;
        |   title: string;
        |   description: string;
        |   color: 'red' | 'purple' | 'blue' | 'emerald';
        |   instructionsTitle: string;
        |   steps: string[];
        |   children: ReactNode;
        |   videoEmbed?: string;
        | }
        | 
        | export function GameSection({ phase, title, description, color, instructionsTitle, steps, children, videoEmbed }: GameSectionProps) {
        |   const colorMap = {
        |     red: "bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400",
        |     purple: "bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400",
        |     blue: "bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400",
        |     emerald: "bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400",
        |   };
        | 
        |   return (
        |     <div className="rounded-3xl p-6 md:p-10 bg-neutral-50 dark:bg-neutral-900/50 border border-neutral-200 dark:border-neutral-800 shadow-sm">
        |       <header className="prose prose-neutral dark:prose-invert max-w-none mb-12">
        |         <span className={`inline-block px-3 py-1 rounded-full ${colorMap[color]} text-xs font-bold uppercase tracking-widest mb-4`}>
        |           {phase}
        |         </span>
        |         <h2 className="font-bold text-5xl md:text-7xl font-serif mb-6 tracking-tighter">
        |           {title}
        |         </h2>
        |         
        |         <div className="grid grid-cols-1 lg:grid-cols-2 gap-12">
        |           <div className="space-y-6">
        |             <p className="text-xl text-neutral-600 dark:text-neutral-400 leading-relaxed">
        |               {description}
        |             </p>
        |             
        |             {/* Standardized Instructions */}
        |             <div className="mt-6 p-4 rounded-xl bg-white/50 dark:bg-black/20 border border-neutral-200/50 dark:border-neutral-800/50">
        |               <h4 className="text-xs font-bold uppercase tracking-widest text-neutral-400 mb-3">{instructionsTitle}</h4>
        |               <ul className="space-y-2">
        |                 {steps.map((step, i) => (
        |                   <li key={i} className="flex gap-3 text-sm text-neutral-600 dark:text-neutral-400">
        |                     <span className="font-bold text-neutral-900 dark:text-neutral-100">{i + 1}.</span>
        |                     {step}
        |                   </li>
        |                 ))}
        |               </ul>
        |             </div>
        |           </div>
        | 
        |           {videoEmbed && (
        |             <div className="relative w-full max-w-[280px] mx-auto lg:mx-0 aspect-[9/16] rounded-2xl overflow-hidden shadow-2xl border-4 border-white dark:border-neutral-800 bg-black">
        |               <iframe
        |                 width="100%" height="100%"
        |                 src={videoEmbed}
        |                 allowFullScreen
        |                 className="absolute inset-0"
        |               />
        |             </div>
        |           )}
        |         </div>
        |       </header>
        |       {children}
        |     </div>
        |   );
        | }
        | --- END ---

      ‚îú‚îÄ‚îÄ BpmDetective.tsx
        | --- START: components/game/BpmDetective.tsx ---
        | // app/components/BpmDetective.tsx
        | 'use client'; // [cite: 214]
        | import { useState, useEffect, useRef } from 'react';
        | import { getBpmGameTrack } from '../../actions';
        | import { FaPlay, FaSearch, FaTrophy } from 'react-icons/fa';
        | 
        | export function BpmDetective() {
        |   const [mounted, setMounted] = useState(false);
        |   const [track, setTrack] = useState<any>(null);
        |   const [guess, setGuess] = useState(120);
        |   const [gameState, setGameState] = useState<'idle' | 'playing' | 'result'>('idle');
        |   const [loading, setLoading] = useState(false);
        |   const audioRef = useRef<HTMLAudioElement | null>(null);
        | 
        |   useEffect(() => { setMounted(true); }, []); // [cite: 1957]
        | 
        |   if (!mounted) return null;
        | 
        |   const startNewGame = async () => {
        |     setLoading(true);
        |     setGameState('idle');
        |     const data = await getBpmGameTrack();
        |     if (data.error) {
        |       alert(data.error);
        |     } else {
        |       setTrack(data);
        |       setGameState('playing');
        |     }
        |     setLoading(false);
        |   };
        | 
        |   const checkGuess = () => {
        |     setGameState('result');
        |     if (audioRef.current) audioRef.current.pause();
        |   };
        | 
        |   const diff = track ? Math.abs(guess - track.bpm) : 0;
        |   const isCorrect = diff <= 5;
        | 
        |   return (
        |     <div className="p-8 bg-neutral-50 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-3xl shadow-lg">
        |       {gameState === 'idle' && (
        |         <div className="text-center py-10">
        |           <button 
        |             onClick={startNewGame}
        |             disabled={loading}
        |             className="px-10 py-4 bg-blue-600 text-white rounded-2xl font-bold hover:bg-blue-700 transition-all active:scale-95 disabled:opacity-50"
        |           >
        |             {loading ? 'Analyzing Vibe...' : 'Start BPM Challenge'}
        |           </button>
        |         </div>
        |       )}
        | 
        |       {track && gameState !== 'idle' && (
        |         <div className="space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500">
        |           <div className="flex flex-col items-center">
        |             <img src={track.albumArt} alt="Album" className="w-48 h-48 rounded-xl shadow-2xl mb-4 object-cover" />
        |             <p className="font-bold text-lg">{track.name}</p>
        |             <p className="text-neutral-500 text-sm">{track.artist}</p>
        |           </div>
        | 
        |           <audio ref={audioRef} src={track.previewUrl} autoPlay loop />
        | 
        |           {gameState === 'playing' ? (
        |             <div className="space-y-6">
        |               <input 
        |                 type="range" min="60" max="180" value={guess} 
        |                 onChange={(e) => setGuess(parseInt(e.target.value))}
        |                 className="w-full h-3 bg-neutral-200 dark:bg-neutral-800 rounded-lg appearance-none cursor-pointer accent-blue-600"
        |               />
        |               <div className="text-5xl font-mono font-bold text-center">{guess} <span className="text-sm">BPM</span></div>
        |               <button onClick={checkGuess} className="w-full py-4 bg-neutral-900 dark:bg-white text-white dark:text-black rounded-xl font-bold uppercase tracking-widest text-sm">
        |                 Submit Guess
        |               </button>
        |             </div>
        |           ) : (
        |             <div className="text-center space-y-4 pt-4 border-t border-neutral-200 dark:border-neutral-800">
        |               <div className={`text-4xl font-bold ${isCorrect ? 'text-green-500' : 'text-red-500'}`}>
        |                 {isCorrect ? 'üéØ Bullseye!' : 'üìâ Off Beat'}
        |               </div>
        |               <p className="text-xl">Actual: <span className="font-mono font-bold">{track.bpm} BPM</span></p>
        |               <button onClick={startNewGame} className="mt-4 text-blue-500 font-bold hover:underline flex items-center gap-2 mx-auto">
        |                 <FaSearch /> Play Next Track
        |               </button>
        |             </div>
        |           )}
        |         </div>
        |       )}
        |     </div>
        |   );
        | }
        | --- END ---

      ‚îú‚îÄ‚îÄ ReverseGame.tsx
        | --- START: components/game/ReverseGame.tsx ---
        | 'use client';
        | 
        | import { useState, useRef, useEffect } from 'react';
        | import Image from 'next/image';
        | import { getMysteryTrack } from '../../actions';
        | import { FaXmark } from 'react-icons/fa6'; // Import the cancel icon
        | 
        | // 1. Define the interface for the component props
        | interface ReverseGameProps {
        |   lang: string;
        | }
        | 
        | // 2. Update the function signature to accept { lang }
        | export function ReverseGame({ lang }: ReverseGameProps) {
        |   const [artistInput, setArtistInput] = useState('');
        |   const [trackData, setTrackData] = useState<any>(null);
        |   const [gameState, setGameState] = useState<'idle' | 'loading' | 'playing' | 'won' | 'lost' | 'timeout'>('idle');
        |   const [selectedOptionId, setSelectedOptionId] = useState<number | null>(null);
        |   const [error, setError] = useState('');
        |   const [timeLeft, setTimeLeft] = useState(15);
        | 
        |   const audioContextRef = useRef<AudioContext | null>(null);
        |   const sourceNodeRef = useRef<AudioBufferSourceNode | null>(null);
        |   const originalBufferRef = useRef<AudioBuffer | null>(null);
        |   const reversedBufferRef = useRef<AudioBuffer | null>(null);
        | 
        |   useEffect(() => {
        |     const AudioCtx = window.AudioContext || (window as any).webkitAudioContext;
        |     audioContextRef.current = new AudioCtx();
        |     return () => { audioContextRef.current?.close(); };
        |   }, []);
        | 
        |   useEffect(() => {
        |     let timer: NodeJS.Timeout;
        |     if (gameState === 'playing' && timeLeft > 0) {
        |       timer = setInterval(() => setTimeLeft((prev) => prev - 1), 1000);
        |     } else if (timeLeft === 0 && gameState === 'playing') {
        |       setGameState('timeout');
        |       playAudio('normal');
        |     }
        |     return () => clearInterval(timer);
        |   }, [gameState, timeLeft]);
        | 
        |   const resetGame = () => {
        |     stopAudio();
        |     setTrackData(null);
        |     setGameState('idle');
        |     setSelectedOptionId(null);
        |     setError('');
        |     setTimeLeft(15);
        |   };
        | 
        |   const handleSearch = async () => {
        |     setGameState('loading');
        |     setError('');
        |     setTrackData(null);
        |     setSelectedOptionId(null);
        |     stopAudio();
        | 
        |     // 3. Passing the artist input to the mystery track action
        |     const data = await getMysteryTrack(artistInput);
        |     if (data.error) {
        |       setError(data.error);
        |       setGameState('idle');
        |       return;
        |     }
        | 
        |     setTrackData(data);
        |     await loadAndReverseAudio(data.previewUrl);
        |     setTimeLeft(15); 
        |     setGameState('playing');
        |     playAudio('reversed'); 
        |   };
        | 
        |   const loadAndReverseAudio = async (url: string) => {
        |     try {
        |       const response = await fetch(url);
        |       const arrayBuffer = await response.arrayBuffer();
        |       if (!audioContextRef.current) return;
        |       const audioBuffer = await audioContextRef.current.decodeAudioData(arrayBuffer);
        |       originalBufferRef.current = audioBuffer;
        | 
        |       const reversedBuffer = audioContextRef.current.createBuffer(
        |         audioBuffer.numberOfChannels, audioBuffer.length, audioBuffer.sampleRate
        |       );
        |       for (let i = 0; i < audioBuffer.numberOfChannels; i++) {
        |         const channelData = audioBuffer.getChannelData(i);
        |         const reversedData = reversedBuffer.getChannelData(i);
        |         for (let j = 0; j < channelData.length; j++) {
        |           reversedData[j] = channelData[channelData.length - 1 - j];
        |         }
        |       }
        |       reversedBufferRef.current = reversedBuffer;
        |     } catch (err) {
        |       setError("Could not process audio.");
        |     }
        |   };
        | 
        |   const playAudio = (type: 'reversed' | 'normal') => {
        |     stopAudio();
        |     if (!audioContextRef.current || !reversedBufferRef.current || !originalBufferRef.current) return;
        |     const source = audioContextRef.current.createBufferSource();
        |     source.buffer = type === 'reversed' ? reversedBufferRef.current : originalBufferRef.current;
        |     source.connect(audioContextRef.current.destination);
        |     source.start();
        |     sourceNodeRef.current = source;
        |   };
        | 
        |   const stopAudio = () => {
        |     if (sourceNodeRef.current) {
        |       try {
        |         sourceNodeRef.current.stop();
        |         sourceNodeRef.current.disconnect();
        |       } catch (e) {}
        |       sourceNodeRef.current = null;
        |     }
        |   };
        | 
        |   const handleGuess = (option: any) => {
        |     if (gameState !== 'playing') return;
        |     setSelectedOptionId(option.id);
        |     if (option.isCorrect) {
        |       setGameState('won');
        |       playAudio('normal'); 
        |     } else {
        |       setGameState('lost');
        |     }
        |   };
        | 
        |   return (
        |     <div className="relative max-w-xl mx-auto p-6 bg-neutral-900 text-white rounded-2xl shadow-2xl border border-neutral-800 overflow-hidden">
        |       
        |       {gameState !== 'idle' && gameState !== 'loading' && (
        |         <button 
        |           onClick={resetGame}
        |           className="absolute top-4 right-4 p-2 rounded-full bg-neutral-800 hover:bg-red-900/40 text-neutral-400 hover:text-red-500 transition-all z-20"
        |           title="Cancel Game"
        |         >
        |           <FaXmark size={18} />
        |         </button>
        |       )}
        | 
        |       <div className="text-center mb-8">
        |         <h2 className="text-3xl font-bold bg-gradient-to-r from-purple-400 to-pink-600 bg-clip-text text-transparent">
        |           ‚è™ Reverse Audio Challenge
        |         </h2>
        |       </div>
        | 
        |       <div className="flex flex-col gap-4 mb-8">
        |         <input 
        |           type="text"
        |           value={artistInput}
        |           onChange={(e) => setArtistInput(e.target.value)}
        |           onKeyDown={(e) => e.key === 'Enter' && handleSearch()}
        |           placeholder="e.g. Nirvana..."
        |           className="w-full bg-black/50 border border-neutral-700 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500"
        |         />
        |         <button 
        |           onClick={handleSearch}
        |           disabled={gameState === 'loading'}
        |           className="w-full bg-purple-600 hover:bg-purple-700 font-bold px-6 py-3 rounded-lg transition-all active:scale-95 disabled:opacity-50"
        |         >
        |           {gameState === 'loading' ? 'Searching...' : 'Start Challenge'}
        |         </button>
        |       </div>
        | 
        |       {error && <div className="text-red-400 text-center mb-4">{error}</div>}
        | 
        |       {trackData && (
        |         <div className="animate-in fade-in slide-in-from-bottom-4 duration-500">
        |           
        |           {gameState === 'playing' && (
        |             <div className="mb-6">
        |               <div className="flex justify-between text-xs font-bold uppercase tracking-widest text-neutral-400 mb-2">
        |                  <span>Time Remaining</span>
        |                  <span className={timeLeft < 5 ? "text-red-500 animate-pulse" : "text-white"}>{timeLeft}s</span>
        |               </div>
        |               <div className="w-full h-2 bg-neutral-800 rounded-full overflow-hidden">
        |                 <div 
        |                   className={`h-full transition-all duration-1000 ease-linear ${timeLeft < 5 ? 'bg-red-500' : 'bg-purple-500'}`}
        |                   style={{ width: `${(timeLeft / 15) * 100}%` }}
        |                 />
        |               </div>
        |             </div>
        |           )}
        | 
        |           <div className="flex justify-center mb-6">
        |             <div 
        |               className="relative w-40 h-40 bg-black rounded-xl border border-neutral-700 overflow-hidden cursor-pointer hover:border-purple-500 transition-colors group"
        |               onClick={() => playAudio('reversed')}
        |             >
        |               {['won', 'lost', 'timeout'].includes(gameState) ? (
        |                 <Image src={trackData.albumArt} alt="Album" fill className="object-cover" />
        |               ) : (
        |                  <div className="flex items-center justify-center h-full text-4xl">‚ùì</div>
        |               )}
        |                {!['won', 'lost', 'timeout'].includes(gameState) && (
        |                  <div className="absolute inset-0 flex items-center justify-center bg-black/40 group-hover:bg-black/10 transition-colors">
        |                    <span className="text-2xl">üîä</span>
        |                  </div>
        |                )}
        |             </div>
        |           </div>
        | 
        |           <div className="grid grid-cols-1 gap-3">
        |             {trackData.options.map((option: any) => {
        |               let btnClass = "p-4 rounded-xl font-semibold transition-all border border-neutral-700 bg-neutral-800 hover:bg-neutral-700 text-left px-6";
        |               
        |               if (['won', 'lost', 'timeout'].includes(gameState)) {
        |                 if (option.isCorrect) {
        |                   btnClass = "p-4 rounded-xl font-bold bg-green-600/20 border-green-500 text-green-400 px-6";
        |                 } else if (selectedOptionId === option.id) {
        |                   btnClass = "p-4 rounded-xl bg-red-900/20 border-red-800 text-red-400 opacity-50 px-6";
        |                 } else {
        |                   btnClass = "p-4 rounded-xl bg-neutral-900 border-neutral-800 text-neutral-600 opacity-30 px-6";
        |                 }
        |               }
        | 
        |               return (
        |                 <button
        |                   key={option.id}
        |                   onClick={() => handleGuess(option)}
        |                   disabled={['won', 'lost', 'timeout'].includes(gameState)}
        |                   className={btnClass}
        |                 >
        |                   {option.title}
        |                 </button>
        |               );
        |             })}
        |           </div>
        | 
        |           {(gameState === 'won' || gameState === 'lost' || gameState === 'timeout') && (
        |             <div className="mt-8 pt-6 border-t border-neutral-800 text-center animate-in slide-in-from-top-2">
        |                <button 
        |                  onClick={handleSearch} 
        |                  className="bg-white text-black font-bold px-8 py-3 rounded-full hover:bg-neutral-200 transition-colors"
        |                >
        |                  Play Next Round
        |                </button>
        |             </div>
        |           )}
        |         </div>
        |       )}
        |     </div>
        |   );
        | }
        | --- END ---

      ‚îú‚îÄ‚îÄ KeyGame.tsx
        | --- START: components/game/KeyGame.tsx ---
        | 'use client';
        | 
        | import { useState, useEffect } from 'react';
        | import { getMusicalJazzTrack } from '../../actions';
        | import { FaRotateRight, FaPlay, FaStop, FaYoutube, FaMusic, FaTrophy, FaFire, FaCircleInfo } from 'react-icons/fa6';
        | 
        | const KEYS = ['C Major', 'G Major', 'F Major', 'D Minor', 'A Minor', 'Bb Major'];
        | 
        | const KEY_MAP: Record<string, string> = {
        |   'ycXxiJdXSbw': 'C Major',
        |   '09BB1pP9Vvg': 'Bb Major',
        |   '8S5S5A7K_y8': 'G Major',
        | };
        | 
        | // 1. Define the interface for the component props
        | interface KeyGameProps {
        |   lang: string;
        | }
        | 
        | // 2. Update the function signature to accept { lang }
        | export function KeyGame({ lang }: KeyGameProps) {
        |   const [video, setVideo] = useState<any>(null);
        |   const [loading, setLoading] = useState(false);
        |   const [isPlaying, setIsPlaying] = useState(false);
        |   const [guess, setGuess] = useState<string | null>(null);
        |   const [isCorrect, setIsCorrect] = useState<boolean | null>(null);
        |   const [actualKey, setActualKey] = useState<string>('');
        |   
        |   const [score, setScore] = useState(0);
        |   const [streak, setStreak] = useState(0);
        | 
        |   const fetchAndPlay = async () => {
        |     setLoading(true);
        |     setGuess(null);
        |     setIsCorrect(null);
        |     
        |     setIsPlaying(false); 
        |     
        |     // You can optionally pass 'lang' to getMusicalJazzTrack if needed for localized results
        |     const data = await getMusicalJazzTrack();
        |     if (data && !data.error) {
        |       setVideo(data);
        |       const key = KEY_MAP[data.videoId] || KEYS[Math.floor(Math.random() * KEYS.length)];
        |       setActualKey(key);
        |       
        |       setIsPlaying(true); 
        |     }
        |     setLoading(false);
        |   };
        | 
        |   useEffect(() => {
        |     // Note: Autoplay often requires a user gesture first.
        |   }, []);
        | 
        |   const handleGuess = (selectedKey: string) => {
        |     if (guess) return;
        |     const correct = selectedKey === actualKey;
        |     setGuess(selectedKey);
        |     setIsCorrect(correct);
        | 
        |     if (correct) {
        |       setScore(s => s + 100);
        |       setStreak(s => s + 1);
        |     } else {
        |       setStreak(0);
        |     }
        |   };
        | 
        |   return (
        |     <div className="p-8 bg-neutral-50 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-3xl shadow-xl max-w-2xl mx-auto my-12">
        |       
        |       {/* Scoreboard */}
        |       <div className="flex justify-between items-center mb-6 bg-white dark:bg-black p-4 rounded-2xl border border-neutral-200 dark:border-neutral-800 shadow-sm">
        |         <div className="flex items-center gap-2 text-amber-500 font-bold">
        |           <FaTrophy /> <span>Score: {score}</span>
        |         </div>
        |         <div className="flex items-center gap-2 text-orange-500 font-bold">
        |           <FaFire className={streak > 0 ? "animate-bounce" : ""} /> 
        |           <span>Streak: {streak}</span>
        |         </div>
        |       </div>
        | 
        |       <div className="flex justify-between items-center mb-8">
        |         <h2 className="text-2xl font-bold font-serif text-neutral-900 dark:text-neutral-50 flex items-center gap-2">
        |           <FaYoutube className="text-red-600" /> Key Detective
        |         </h2>
        |         <button 
        |           onClick={fetchAndPlay} 
        |           disabled={loading}
        |           className="p-2 hover:bg-neutral-200 dark:hover:bg-neutral-800 rounded-full transition-colors"
        |         >
        |           <FaRotateRight className={loading ? "animate-spin" : ""} />
        |         </button>
        |       </div>
        | 
        |       {!video ? (
        |         <button onClick={fetchAndPlay} className="w-full py-20 border-2 border-dashed border-neutral-300 dark:border-neutral-700 rounded-2xl flex flex-col items-center gap-4 hover:border-blue-500 transition-colors">
        |           <div className="p-4 bg-blue-500 text-white rounded-full shadow-lg"><FaPlay className="ml-1" /></div>
        |           <span className="font-bold text-neutral-500">Start the Music Arcade</span>
        |         </button>
        |       ) : (
        |         <div className="space-y-6">
        |           <div className="relative aspect-video bg-black rounded-2xl overflow-hidden shadow-2xl border border-neutral-800">
        |             {isPlaying ? (
        |               <iframe
        |                 width="100%" height="100%"
        |                 src={`https://www.youtube.com/embed/${video.videoId}?autoplay=1&controls=0&start=45&enablejsapi=1`}
        |                 allow="autoplay" className="opacity-40 pointer-events-none"
        |               />
        |             ) : (
        |               <div className="absolute inset-0 flex items-center justify-center bg-neutral-800 text-neutral-600">
        |                 <FaMusic className="text-4xl" />
        |               </div>
        |             )}
        |             <div className="absolute bottom-4 left-4">
        |               <button onClick={() => setIsPlaying(!isPlaying)} className="px-6 py-2 bg-white/10 backdrop-blur-md border border-white/20 text-white rounded-full font-bold flex items-center gap-2 hover:bg-white/20 transition-all">
        |                 {isPlaying ? <><FaStop /> Stop</> : <><FaPlay /> Listen</>}
        |               </button>
        |             </div>
        |           </div>
        | 
        |           <div className="grid grid-cols-2 sm:grid-cols-3 gap-3">
        |             {KEYS.map((key) => {
        |               const isUserChoice = guess === key;
        |               const isTheCorrectAnswer = actualKey === key && guess !== null;
        |               return (
        |                 <button
        |                   key={key}
        |                   disabled={guess !== null}
        |                   onClick={() => handleGuess(key)}
        |                   className={`py-4 rounded-xl font-bold border-2 transition-all ${
        |                     isTheCorrectAnswer 
        |                       ? 'bg-green-500 border-green-600 text-white scale-105 z-10' 
        |                       : isUserChoice && !isCorrect
        |                         ? 'bg-red-500 border-red-600 text-white opacity-90' 
        |                         : 'bg-white dark:bg-black border-neutral-200 dark:border-neutral-800 text-neutral-400 hover:border-blue-500 disabled:opacity-40'
        |                   }`}
        |                 >
        |                   {key}
        |                 </button>
        |               );
        |             })}
        |           </div>
        | 
        |           {guess && (
        |             <div className={`p-6 rounded-2xl text-center animate-in fade-in slide-in-from-top-4 border ${isCorrect ? 'bg-green-50 border-green-200 text-green-800' : 'bg-red-50 border-red-200 text-red-800'}`}>
        |               <h4 className="text-2xl font-black mb-1">{isCorrect ? "BRILLIANT! üéØ" : "NOT QUITE üìâ"}</h4>
        |               {!isCorrect && (
        |                 <p className="font-bold mb-3 flex items-center justify-center gap-2">
        |                    <FaCircleInfo /> The correct answer was {actualKey}
        |                 </p>
        |               )}
        |               <button 
        |                 onClick={fetchAndPlay} 
        |                 className="px-8 py-2 bg-neutral-900 text-white dark:bg-white dark:text-neutral-900 rounded-full font-bold text-sm hover:scale-105 transition-transform"
        |               >
        |                 Next Track ‚Üí
        |               </button>
        |             </div>
        |           )}
        |         </div>
        |       )}
        |     </div>
        |   );
        | }
        | --- END ---

      ‚îú‚îÄ‚îÄ YoutubeBpmGame.tsx
        | --- START: components/game/YoutubeBpmGame.tsx ---
        | 'use client';
        | 
        | import { useState } from 'react';
        | import { getYoutubeGameTrack } from '../../actions';
        | import { FaCheck, FaRotateRight, FaXmark } from 'react-icons/fa6'; // Using FaXmark for the cancel icon
        | 
        | // 1. Define the interface for the component props
        | interface YoutubeBpmGameProps {
        |   lang: string;
        | }
        | 
        | // 2. Update the function signature to accept { lang }
        | export function YoutubeBpmGame({ lang }: YoutubeBpmGameProps) {
        |   const [video, setVideo] = useState<any>(null);
        |   const [loading, setLoading] = useState(false);
        |   const [guess, setGuess] = useState(120);
        |   const [gameState, setGameState] = useState<'idle' | 'playing' | 'result'>('idle');
        |   const [targetBpm, setTargetBpm] = useState(0);
        | 
        |   const startNext = async () => {
        |     setLoading(true);
        |     setGameState('idle');
        |     // You can optionally pass 'lang' to your action if you want localized tracks
        |     const data = await getYoutubeGameTrack();
        |     if (data) {
        |       setVideo(data);
        |       // Pseudo-random BPM for demo; in production, this should come from your database
        |       setTargetBpm(Math.floor(Math.random() * (160 - 70 + 1)) + 70); 
        |       setGameState('playing');
        |     }
        |     setLoading(false);
        |   };
        | 
        |   // --- Reset/Cancel Function ---
        |   const stopGame = () => {
        |     setVideo(null);
        |     setGameState('idle');
        |     setGuess(120);
        |   };
        | 
        |   const handleSubmit = () => {
        |     setGameState('result');
        |   };
        | 
        |   const diff = Math.abs(guess - targetBpm);
        |   const isClose = diff <= 5;
        | 
        |   return (
        |     <div className="relative p-8 border border-neutral-200 dark:border-neutral-800 rounded-3xl bg-white dark:bg-black text-black dark:text-white text-center shadow-xl overflow-hidden">
        |       
        |       {/* --- CANCEL ICON (Only shows when music/video is active) --- */}
        |       {video && (
        |         <button 
        |           onClick={stopGame}
        |           className="absolute top-4 right-4 p-2 rounded-full bg-neutral-100 dark:bg-neutral-900 hover:bg-red-100 dark:hover:bg-red-900/30 text-neutral-500 hover:text-red-600 transition-colors z-10"
        |           title="Stop Music"
        |         >
        |           <FaXmark size={20} />
        |         </button>
        |       )}
        | 
        |       {gameState === 'idle' && (
        |         <div className="py-10">
        |           <button 
        |             onClick={startNext} 
        |             disabled={loading}
        |             className="bg-red-600 hover:bg-red-700 text-white px-10 py-4 rounded-2xl font-bold transition-all active:scale-95 disabled:opacity-50"
        |           >
        |             {loading ? "Initializing..." : "Start YouTube BPM Challenge üì∫"}
        |           </button>
        |         </div>
        |       )}
        | 
        |       {video && gameState !== 'idle' && (
        |         <div className="space-y-6 animate-in fade-in zoom-in duration-300">
        |           <div className="aspect-video w-full rounded-2xl overflow-hidden shadow-2xl border border-neutral-800 bg-neutral-900">
        |             <iframe
        |               width="100%"
        |               height="100%"
        |               src={`https://www.youtube.com/embed/${video.videoId}?autoplay=1&controls=0&modestbranding=1`}
        |               allow="autoplay"
        |               className="pointer-events-none"
        |             />
        |           </div>
        |           
        |           <h3 className="text-lg font-medium text-neutral-500 pr-8">{video.title}</h3>
        |           
        |           {gameState === 'playing' ? (
        |             <div className="bg-neutral-50 dark:bg-neutral-900 p-6 rounded-2xl border border-neutral-100 dark:border-neutral-800">
        |               <div className="flex justify-between text-xs font-bold text-neutral-400 mb-2">
        |                 <span>60 BPM</span>
        |                 <span>180 BPM</span>
        |               </div>
        |               <input 
        |                 type="range" min="60" max="180" value={guess} 
        |                 onChange={(e) => setGuess(parseInt(e.target.value))}
        |                 className="w-full h-3 bg-neutral-200 dark:bg-neutral-800 rounded-lg appearance-none cursor-pointer accent-red-600 mb-4" 
        |               />
        |               <p className="text-6xl font-black font-mono text-red-600 mb-6">{guess}</p>
        | 
        |               <button 
        |                 onClick={handleSubmit}
        |                 className="w-full bg-black dark:bg-white text-white dark:text-black py-4 rounded-xl font-bold flex items-center justify-center gap-2"
        |               >
        |                 <FaCheck /> Submit Guess
        |               </button>
        |             </div>
        |           ) : (
        |             <div className="py-6 space-y-4">
        |               <div className={`text-5xl font-black ${isClose ? 'text-green-500' : 'text-red-500'}`}>
        |                 {isClose ? 'PERFECT!' : 'NOT QUITE'}
        |               </div>
        |               <p className="text-xl">
        |                 Actual: <span className="font-bold">{targetBpm} BPM</span>
        |               </p>
        |               <button 
        |                 onClick={startNext} 
        |                 className="flex items-center gap-2 mx-auto text-blue-500 font-bold hover:underline pt-4"
        |               >
        |                 <FaRotateRight /> Play Another Track
        |               </button>
        |             </div>
        |           )}
        |         </div>
        |       )}
        |     </div>
        |   );
        | }
        | --- END ---

      ‚îú‚îÄ‚îÄ MusicPuzzle.tsx
        | --- START: components/game/MusicPuzzle.tsx ---
        | 'use client';
        | 
        | import React, { useState, useEffect, useRef } from 'react';
        | import { sendGTMEvent } from '@next/third-parties/google'; 
        | import MusicCTA from './MusicCTA'; 
        | import { FaPlay, FaPause, FaUndo, FaSearch, FaYoutube, FaMusic, FaExchangeAlt, FaTrophy, FaExclamationTriangle, FaSpinner } from 'react-icons/fa'; 
        | 
        | const CORRECT_ORDER = [0, 1, 2, 3, 4, 5]; 
        | const SEGMENT_DURATION = 5; 
        | 
        | const DEMO_VIDEO = {
        |   id: '-DHuW1h1wHw',
        |   name: 'Dave Brubeck - Take Five',
        |   artist: 'The Dave Brubeck Quartet',
        |   image: 'https://i.ytimg.com/vi/-DHuW1h1wHw/mqdefault.jpg'
        | };
        | 
        | interface PuzzlePiece {
        |   id: number;
        |   localAudioUrl?: string;
        | }
        | 
        | // 1. Define the interface for the component props
        | interface MusicPuzzleProps {
        |   lang: string;
        | }
        | 
        | // 2. Update the function signature to accept { lang }
        | export function MusicPuzzle({ lang }: MusicPuzzleProps) {
        |   const [sourceMode, setSourceMode] = useState<'offline' | 'youtube' | null>(null);
        |   const [searchQuery, setSearchQuery] = useState('');
        |   const [searchResults, setSearchResults] = useState<any[]>([]);
        |   const [isSearching, setIsSearching] = useState(false);
        |   const [hasSearched, setHasSearched] = useState(false);
        |   const [trackInfo, setTrackInfo] = useState({ name: '', artist: '', image: '', url: '' });
        |   const [pieces, setPieces] = useState<PuzzlePiece[]>([]);
        |   const [isSolved, setIsSolved] = useState(false);
        |   const [playingId, setPlayingId] = useState<number | null>(null);
        |   const [isBuffering, setIsBuffering] = useState(false); 
        |   const [seconds, setSeconds] = useState(0);
        |   const [selectedIdx, setSelectedIdx] = useState<number | null>(null);
        |   
        |   const [highlightedIdx, setHighlightedIdx] = useState<number | null>(null); 
        |   
        |   const [isPlayerReady, setIsPlayerReady] = useState(false);
        |   const [bestTime, setBestTime] = useState<number | null>(null);
        |   const [listenedPieces, setListenedPieces] = useState<Set<number>>(new Set());
        |   const [warning, setWarning] = useState<string | null>(null);
        | 
        |   const ytPlayerRef = useRef<any>(null);
        |   const localAudioRef = useRef<HTMLAudioElement | null>(null); 
        |   const timerRef = useRef<NodeJS.Timeout | null>(null);
        |   const ytTimeoutRef = useRef<NodeJS.Timeout | null>(null);
        |   const searchCache = useRef<Record<string, any[]>>({});
        |   const lastSearchTime = useRef<number>(0);
        | 
        |   useEffect(() => {
        |     const savedBest = localStorage.getItem('puzzle_best_time');
        |     if (savedBest) setBestTime(parseInt(savedBest));
        |     const timer = setTimeout(() => { loadOfflinePuzzle(); }, 300);
        |     return () => clearTimeout(timer);
        |   }, []);
        | 
        |   useEffect(() => {
        |     const onPlayerStateChange = (event: any) => {
        |       if (event.data === 3) setIsBuffering(true);
        |       else setIsBuffering(false);
        |     };
        | 
        |     const initYT = () => {
        |       if (window.YT && window.YT.Player) {
        |         ytPlayerRef.current = new window.YT.Player('yt-hidden-player', {
        |           height: '0', width: '0', videoId: '',
        |           playerVars: { 'controls': 0, 'disablekb': 1, 'enablejsapi': 1 },
        |           events: { 
        |             'onReady': () => setIsPlayerReady(true),
        |             'onStateChange': onPlayerStateChange 
        |           }
        |         });
        |       }
        |     };
        | 
        |     if (!window.YT) {
        |       const tag = document.createElement('script');
        |       tag.src = "https://www.youtube.com/iframe_api";
        |       const firstScriptTag = document.getElementsByTagName('script')[0];
        |       firstScriptTag.parentNode?.insertBefore(tag, firstScriptTag);
        |       window.onYouTubeIframeAPIReady = initYT;
        |     } else { initYT(); }
        |   }, []);
        | 
        |   const handleSearch = async (e: React.FormEvent) => {
        |     e.preventDefault();
        |     const query = searchQuery.trim().toLowerCase();
        |     if (!query) return;
        |     const now = Date.now();
        |     if (now - lastSearchTime.current < 1500) return;
        |     lastSearchTime.current = now;
        |     if (searchCache.current[query]) {
        |       setSearchResults(searchCache.current[query]);
        |       setHasSearched(true);
        |       return;
        |     }
        |     setIsSearching(true);
        |     setHasSearched(false);
        |     try {
        |       // 3. Optional: Pass lang to the API if your backend supports localized search
        |       const res = await fetch(`/api/youtube/search?q=${encodeURIComponent(query)}&lang=${lang}`);
        |       const data = await res.json();
        |       const results = Array.isArray(data) ? data : [];
        |       searchCache.current[query] = results;
        |       setSearchResults(results);
        |       setHasSearched(true);
        |     } catch (err) {
        |       setSearchResults([]);
        |       setHasSearched(true);
        |     } finally { setIsSearching(false); }
        |   };
        | 
        |   const selectYouTubeTrack = (video: any) => {
        |     if (!isPlayerReady && sourceMode !== 'offline') return;
        |     setHasSearched(false);
        |     setSearchResults([]);
        |     setSearchQuery('');
        |     setSourceMode('youtube');
        |     setTrackInfo({ name: video.name, artist: video.artist, image: video.image, url: `https://www.youtube.com/watch?v=${video.id}` });
        |     if (ytPlayerRef.current && typeof ytPlayerRef.current.loadVideoById === 'function') {
        |       ytPlayerRef.current.loadVideoById(video.id);
        |       ytPlayerRef.current.pauseVideo();
        |     }
        |     const initial = CORRECT_ORDER.map(id => ({ id }));
        |     shuffleAndStart(initial);
        |   };
        | 
        |   const loadOfflinePuzzle = () => {
        |     setSourceMode('offline');
        |     setTrackInfo({
        |       name: "Girl from Italy", artist: "Arman Ayva",
        |       image: "https://res.cloudinary.com/dpmkshcky/image/upload/v1763230260/Cowboy_a3mnzs.png",
        |       url: "https://armanayva.bandcamp.com"
        |     });
        |     const initial = CORRECT_ORDER.map(id => ({ id, localAudioUrl: `/audio/segment-${id + 1}.mp3` }));
        |     shuffleAndStart(initial);
        |   };
        | 
        |   const shuffleAndStart = (basePieces: PuzzlePiece[]) => {
        |     stopAudio();
        |     setIsSolved(false);
        |     setSeconds(0);
        |     setSelectedIdx(null);
        |     setHighlightedIdx(null); 
        |     setListenedPieces(new Set()); 
        |     setWarning(null);
        |     const shuffled = [...basePieces].sort(() => Math.random() - 0.5);
        |     setPieces(shuffled);
        |     if (timerRef.current) clearInterval(timerRef.current);
        |     timerRef.current = setInterval(() => setSeconds(s => s + 1), 1000);
        |   };
        | 
        |   const stopAudio = () => {
        |     if (ytPlayerRef.current && typeof ytPlayerRef.current.pauseVideo === 'function') {
        |       try { ytPlayerRef.current.pauseVideo(); } catch (e) {}
        |     }
        |     if (localAudioRef.current) {
        |       localAudioRef.current.pause();
        |       localAudioRef.current.currentTime = 0;
        |       localAudioRef.current = null;
        |     }
        |     if (ytTimeoutRef.current) {
        |       clearTimeout(ytTimeoutRef.current);
        |       ytTimeoutRef.current = null;
        |     }
        |     setPlayingId(null);
        |     setIsBuffering(false);
        |   };
        | 
        |   const playSegment = (piece: PuzzlePiece) => {
        |     setListenedPieces(prev => new Set(prev).add(piece.id));
        |     setWarning(null); 
        |     if (playingId === piece.id) { stopAudio(); return; }
        |     stopAudio();
        |     if (sourceMode === 'youtube' && ytPlayerRef.current && typeof ytPlayerRef.current.seekTo === 'function') {
        |       const startTime = piece.id * SEGMENT_DURATION;
        |       ytPlayerRef.current.seekTo(startTime, true);
        |       ytPlayerRef.current.playVideo();
        |       setPlayingId(piece.id);
        |       ytTimeoutRef.current = setTimeout(() => {
        |         if (ytPlayerRef.current && typeof ytPlayerRef.current.pauseVideo === 'function') {
        |           ytPlayerRef.current.pauseVideo();
        |         }
        |         setPlayingId(null);
        |       }, SEGMENT_DURATION * 1000);
        |     } else if (sourceMode === 'offline' && piece.localAudioUrl) {
        |       const audio = new Audio(piece.localAudioUrl);
        |       localAudioRef.current = audio;
        |       setPlayingId(piece.id);
        |       audio.play().catch(() => {});
        |       audio.onended = () => { setPlayingId(null); localAudioRef.current = null; };
        |     }
        |   };
        | 
        |   const handlePieceClick = (index: number) => {
        |     if (isSolved) return;
        |     const pieceId = pieces[index].id;
        | 
        |     if (selectedIdx === null) {
        |       if (!listenedPieces.has(pieceId)) {
        |         setWarning("Don't cheat, play first! üé∑");
        |         setTimeout(() => setWarning(null), 2000);
        |         return;
        |       }
        |       setSelectedIdx(index);
        |     } else if (selectedIdx === index) {
        |       setSelectedIdx(null);
        |     } else {
        |       const updated = [...pieces];
        |       const temp = updated[selectedIdx];
        |       updated[selectedIdx] = updated[index];
        |       updated[index] = temp;
        |       setPieces(updated);
        |       setSelectedIdx(null);
        |       
        |       setHighlightedIdx(index); 
        |       setTimeout(() => setHighlightedIdx(null), 800); 
        | 
        |       if (JSON.stringify(updated.map(p => p.id)) === JSON.stringify(CORRECT_ORDER)) {
        |         setIsSolved(true);
        |         if (timerRef.current) clearInterval(timerRef.current);
        |         const savedBest = localStorage.getItem('puzzle_best_time');
        |         if (!savedBest || seconds < parseInt(savedBest)) {
        |           localStorage.setItem('puzzle_best_time', seconds.toString());
        |           setBestTime(seconds);
        |         }
        |         sendGTMEvent({ event: 'puzzle_complete', action: 'music_puzzle_success', value: seconds });
        |       }
        |     }
        |   };
        | 
        |   return (
        |     <section className="my-8 p-4 sm:p-8 bg-neutral-50 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-2xl shadow-xl relative">
        |       <div id="yt-hidden-player" className="hidden"></div>
        |       
        |       {warning && (
        |         <div className="absolute top-4 left-1/2 -translate-x-1/2 z-[100] bg-red-600 text-white px-6 py-2 rounded-full font-bold shadow-2xl animate-bounce flex items-center gap-2">
        |           <FaExclamationTriangle /> {warning}
        |         </div>
        |       )}
        | 
        |       <div className="flex justify-between items-center mb-6">
        |         <h2 className="text-xl sm:text-2xl font-serif font-bold flex items-center gap-3 text-neutral-900 dark:text-neutral-50">
        |           {sourceMode === 'youtube' ? <FaYoutube className="text-red-600" /> : <FaMusic className="text-blue-500" />}
        |           Music Puzzle
        |         </h2>
        |         <button onClick={() => shuffleAndStart(pieces)} className="text-[10px] font-bold uppercase text-neutral-500 bg-neutral-100 dark:bg-neutral-800 px-2 py-1 rounded hover:text-blue-500 transition-colors">
        |           Reshuffle Game
        |         </button>
        |       </div>
        | 
        |       <div className="mb-8 space-y-4">
        |         <form onSubmit={handleSearch} className="relative z-50">
        |           <div className="flex gap-2">
        |             <input 
        |               type="text" value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)}
        |               placeholder="Search YouTube Song..."
        |               className="flex-1 px-4 py-2 text-sm rounded-xl bg-white dark:bg-black border border-neutral-200 dark:border-neutral-800 outline-none focus:ring-2 focus:ring-red-500"
        |             />
        |             <button type="submit" className="px-4 bg-red-600 text-white rounded-xl hover:bg-red-700 transition-all shadow-md">
        |               {isSearching ? <FaSpinner className="animate-spin" /> : <FaSearch />}
        |             </button>
        |           </div>
        | 
        |           {hasSearched && searchQuery !== '' && (
        |             <div className="absolute left-0 right-0 top-full mt-2 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-xl shadow-2xl z-50 max-h-60 overflow-y-auto">
        |               {searchResults.length > 0 ? searchResults.map((video: any) => (
        |                 <button key={video.id} onClick={() => selectYouTubeTrack(video)} className="w-full flex items-center gap-3 p-3 hover:bg-neutral-100 dark:hover:bg-neutral-700 text-left border-b last:border-none dark:border-neutral-700">
        |                   <img src={video.image} className="w-12 h-8 object-cover rounded shadow-sm" alt="" />
        |                   <div className="truncate text-neutral-900 dark:text-neutral-100">
        |                     <p className="font-bold text-xs truncate">{video.name}</p>
        |                     <p className="text-[10px] text-neutral-500">{video.artist}</p>
        |                   </div>
        |                 </button>
        |               )) : <div className="p-4 text-center text-xs text-neutral-500">No videos found.</div>}
        |             </div>
        |           )}
        |         </form>
        | 
        |         {!isSolved && (
        |           <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
        |             <button onClick={loadOfflinePuzzle} className="py-3 px-4 flex items-center justify-center gap-3 bg-white dark:bg-black border border-neutral-200 dark:border-neutral-800 rounded-xl hover:border-blue-500 transition-all text-sm font-bold text-neutral-700 dark:text-neutral-300">
        |                 <FaMusic className="text-blue-500" /> Play Offline Demo
        |             </button>
        |             <button onClick={() => selectYouTubeTrack(DEMO_VIDEO)} disabled={!isPlayerReady} className={`py-3 px-4 flex items-center justify-center gap-3 bg-white dark:bg-black border border-neutral-200 dark:border-neutral-800 rounded-xl transition-all text-sm font-bold text-neutral-700 dark:text-neutral-300 ${!isPlayerReady ? 'opacity-50 cursor-wait' : 'hover:border-red-500'}`}>
        |                 <FaYoutube className="text-red-500" /> {isPlayerReady ? 'Play "Take Five"' : 'Loading YT...'}
        |             </button>
        |           </div>
        |         )}
        |       </div>
        | 
        |       {pieces.length > 0 && (
        |         <div className="animate-in slide-in-from-bottom-4 duration-500">
        |           <div className="flex justify-between items-center mb-6 bg-white dark:bg-black p-3 rounded-xl border border-neutral-100 dark:border-neutral-800">
        |             <div className="flex items-center gap-3 truncate">
        |               <img src={trackInfo.image} className="w-10 h-10 rounded-lg object-cover" alt="" />
        |               <div className="truncate">
        |                 <p className="text-[9px] font-bold text-red-600 uppercase tracking-widest leading-none mb-1">Now Playing</p>
        |                 <p className="text-sm font-bold truncate max-w-[120px] sm:max-w-none text-neutral-900 dark:text-neutral-50">{trackInfo.name}</p>
        |               </div>
        |             </div>
        |             <div className="flex items-center gap-3 shrink-0">
        |                <div className="text-right">
        |                   <p className="text-[8px] uppercase font-black text-neutral-400 leading-none mb-1">Time</p>
        |                   <span className="font-mono text-xs text-blue-500 font-bold">{seconds}s</span>
        |                </div>
        |                {bestTime && (
        |                  <div className="text-right border-l pl-3 border-neutral-200 dark:border-neutral-800">
        |                     <p className="text-[8px] uppercase font-black text-green-500 flex items-center gap-1 justify-end leading-none mb-1">Best <FaTrophy size={8}/></p>
        |                     <span className="font-mono text-xs text-green-500 font-bold">{bestTime}s</span>
        |                  </div>
        |                )}
        |                <button onClick={() => shuffleAndStart(pieces)} className="p-2 text-neutral-400 hover:text-blue-500"><FaUndo size={14} /></button>
        |             </div>
        |           </div>
        | 
        |           <div className="grid grid-cols-2 gap-3 sm:gap-4">
        |             {pieces.map((piece, index) => {
        |               const isCorrect = piece.id === index;
        |               const isSelected = selectedIdx === index;
        |               const isHighlighted = highlightedIdx === index; 
        |               const hasListened = listenedPieces.has(piece.id);
        |               const isCurrentlyBuffering = playingId === piece.id && isBuffering;
        | 
        |               return (
        |                 <div 
        |                   key={piece.id} 
        |                   onClick={() => handlePieceClick(index)} 
        |                   className={`relative p-3 sm:p-5 border-2 rounded-xl transition-all duration-300 flex flex-col items-center gap-3 cursor-pointer ${
        |                     isSelected ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/30 scale-95 shadow-inner' : 
        |                     isHighlighted ? 'border-yellow-400 bg-yellow-50 dark:bg-yellow-900/40 scale-105 z-20 ring-4 ring-yellow-400/20' : 
        |                     isCorrect ? 'border-green-500 bg-green-50/50 dark:bg-green-900/20' : 
        |                     'bg-white dark:bg-black border-dashed border-neutral-300 dark:border-neutral-700'
        |                   } ${!hasListened && !isSolved ? 'opacity-70 grayscale-[0.5]' : ''}`}
        |                 >
        |                   {isCurrentlyBuffering && (
        |                     <div className="absolute inset-0 z-10 flex items-center justify-center bg-white/60 dark:bg-black/60 rounded-xl">
        |                       <FaSpinner className="animate-spin text-blue-500" size={24} />
        |                     </div>
        |                   )}
        | 
        |                   <div className="w-full flex flex-col items-center">
        |                     {isSelected ? <FaExchangeAlt className="text-blue-500 mb-2 animate-pulse" /> : 
        |                      isHighlighted ? <span className="text-2xl mb-1 animate-bounce">üéØ</span> : 
        |                      <span className="text-2xl mb-1">{isCorrect ? '‚úÖ' : hasListened ? 'üß©' : '‚ùì'}</span>}
        |                     <span className="text-[9px] font-bold uppercase tracking-widest text-neutral-400">
        |                       {isHighlighted ? 'Landed!' : isCorrect ? `Part ${piece.id + 1}` : hasListened ? `Piece ${index + 1}` : 'Play to Unlock'}
        |                     </span>
        |                   </div>
        |                   <button 
        |                     onClick={(e) => { e.stopPropagation(); playSegment(piece); }} 
        |                     className={`w-10 h-10 rounded-full flex items-center justify-center shadow-md transition-all ${
        |                       playingId === piece.id ? 'bg-red-600 text-white animate-pulse' : 
        |                       hasListened ? 'bg-neutral-100 dark:bg-neutral-800 text-neutral-600' : 'bg-neutral-800 text-white'
        |                     }`}
        |                   >
        |                     {playingId === piece.id ? <FaPause size={14} /> : <FaPlay size={14} className="ml-0.5" />}
        |                   </button>
        |                 </div>
        |               );
        |             })}
        |           </div>
        |         </div>
        |       )}
        | 
        |       {isSolved && (
        |         <div className="text-center mt-8 animate-in fade-in zoom-in duration-700 pt-6 border-t border-neutral-100 dark:border-neutral-800">
        |           <p className="p-3 text-green-700 dark:text-green-400 font-bold text-sm mb-4 uppercase tracking-tighter font-serif">‚ú® Solved in {seconds}s! ‚ú®</p>
        |           <MusicCTA label={sourceMode === 'youtube' ? "Watch Full on YouTube" : "Listen on Bandcamp"} albumUrl={trackInfo.url} baseColor={sourceMode === 'youtube' ? "#FF0000" : "#00bfff"} hoverColor={sourceMode === 'youtube' ? "#CC0000" : "#0080ff"} />
        |         </div>
        |       )}
        |     </section>
        |   );
        | }
        | --- END ---

    ‚îú‚îÄ‚îÄ spotify.ts
      | --- START: lib/spotify.ts ---
      | const client_id = process.env.SPOTIFY_CLIENT_ID;
      | const client_secret = process.env.SPOTIFY_CLIENT_SECRET;
      | const basic = Buffer.from(`${client_id}:${client_secret}`).toString('base64');
      | 
      | 
      | const TOKEN_ENDPOINT = `https://accounts.spotify.com/api/token`;
      | 
      | export async function getAccessToken() {
      |   // 1. Debug: Check if keys exist (Do not log the actual secret!)
      |   console.log("üîë [Spotify] Checking credentials...");
      |   if (!client_id) console.error("‚ùå [Spotify] Missing SPOTIFY_CLIENT_ID");
      |   if (!client_secret) console.error("‚ùå [Spotify] Missing SPOTIFY_CLIENT_SECRET");
      | 
      |   const response = await fetch(TOKEN_ENDPOINT, {
      |     method: 'POST',
      |     headers: {
      |       Authorization: `Basic ${basic}`,
      |       'Content-Type': 'application/x-www-form-urlencoded',
      |     },
      |     body: 'grant_type=client_credentials',
      |     cache: 'no-store', // Disable cache while debugging
      |   });
      | 
      |   // 2. Debug: Check if token request worked
      |   if (!response.ok) {
      |     console.error(`‚ùå [Spotify] Token Error: ${response.status} ${response.statusText}`);
      |     const text = await response.text();
      |     console.error("   Details:", text);
      |     return {};
      |   }
      | 
      |   const data = await response.json();
      |   console.log("‚úÖ [Spotify] Access Token received");
      |   return data;
      | }
      | 
      | export async function getPlaylist(playlistId: string) {
      |   const { access_token } = await getAccessToken();
      | 
      |   if (!access_token) {
      |     console.error("‚ùå [Spotify] No access token available. Cannot fetch playlist.");
      |     return { error: { message: "No access token" } };
      |   }
      | 
      |   console.log(`üéµ [Spotify] Fetching playlist: ${playlistId}...`);
      | 
      |   const response = await fetch(`https://api.spotify.com/v1/playlists/${playlistId}`, {
      |     headers: {
      |       Authorization: `Bearer ${access_token}`,
      |     },
      |     cache: 'no-store', // Disable cache while debugging
      |   });
      | 
      |   // 3. Debug: Check if playlist request worked
      |   if (!response.ok) {
      |     console.error(`‚ùå [Spotify] Playlist Fetch Failed: ${response.status}`);
      |     const text = await response.text();
      |     console.error("   Details:", text);
      |     // Return a structured error so the UI handles it gracefully
      |     return { error: { message: `Failed to fetch: ${response.statusText}` } };
      |   }
      | 
      |   const data = await response.json();
      |   console.log(`‚úÖ [Spotify] Successfully fetched playlist: "${data.name}"`);
      |   
      |   return data;
      | }
      | --- END ---


    [DIR] contact/

    [DIR] youtube/
      ‚îú‚îÄ‚îÄ route.ts
        | --- START: api/contact/route.ts ---
        | // This Next.js API route handles the form submission securely.
        | // In a production environment, this is where you would integrate a service 
        | // like SendGrid, Resend, or Nodemailer to send the actual email.
        | 
        | // NOTE: You must install 'nodemailer' to run this code locally, if you use it.
        | // e.g., npm install nodemailer @types/nodemailer
        | 
        | export async function POST(req: Request) {
        |   try {
        |     const { name, email, message } = await req.json();
        | 
        |     // 1. Basic Validation
        |     if (!name || !email || !message) {
        |       return new Response(JSON.stringify({ message: 'Missing required fields: name, email, and message are needed.' }), {
        |         status: 400,
        |         headers: { 'Content-Type': 'application/json' },
        |       });
        |     }
        | 
        |     // 2. Email Sending Logic (Simulated/Placeholder)
        |     
        |     // --------------------------------------------------------------------------------
        |     // !!! IMPORTANT: PRODUCTION IMPLEMENTATION !!!
        |     // The code below is a placeholder. You must replace it with actual email sending 
        |     // code using a service and your private API key/credentials (stored in environment variables).
        |     // --------------------------------------------------------------------------------
        | 
        |     console.log(`--- New Contact Form Submission ---
        | Name: ${name}
        | Email: ${email}
        | Message: ${message}
        | ---------------------------------`);
        | 
        |     // Example using a fictional external email sender:
        |     // await sendEmail({
        |     //   to: 'your-google-inbox@gmail.com',
        |     //   from: 'contact-form@armanayva.com',
        |     //   subject: `New Message from ArmanAyva.com Contact Form by ${name}`,
        |     //   html: `<p>Name: ${name}</p><p>Email: ${email}</p><p>Message: ${message}</p>`,
        |     // });
        |     
        |     // If the email sending logic succeeds:
        |     return new Response(JSON.stringify({ message: 'Success! Your message has been sent.' }), {
        |       status: 200,
        |       headers: { 'Content-Type': 'application/json' },
        |     });
        | 
        |   } catch (error) {
        |     console.error('API Error processing contact form:', error);
        |     return new Response(JSON.stringify({ message: 'Internal Server Error. Please try again later.' }), {
        |       status: 500,
        |       headers: { 'Content-Type': 'application/json' },
        |     });
        |   }
        | }
        | --- END ---


      [DIR] track/

      [DIR] search/
        ‚îú‚îÄ‚îÄ route.ts
          | --- START: api/youtube/track/route.ts ---
          | import { NextResponse } from 'next/server';
          | 
          | async function getSpotifyAccessToken() {
          |   const client_id = process.env.SPOTIFY_CLIENT_ID;
          |   const client_secret = process.env.SPOTIFY_CLIENT_SECRET;
          | 
          |   const response = await fetch('https://accounts.spotify.com/api/token', {
          |     method: 'POST',
          |     headers: {
          |       'Content-Type': 'application/x-www-form-urlencoded',
          |       Authorization: 'Basic ' + Buffer.from(client_id + ':' + client_secret).toString('base64'),
          |     },
          |     body: 'grant_type=client_credentials',
          |   });
          | 
          |   const data = await response.json();
          |   return data.access_token;
          | }
          | 
          | export async function GET(request: Request) {
          |   const { searchParams } = new URL(request.url);
          |   const id = searchParams.get('id');
          | 
          |   if (!id) return NextResponse.json({ error: 'ID is required' }, { status: 400 });
          | 
          |   try {
          |     const token = await getSpotifyAccessToken();
          |     const response = await fetch(`https://api.spotify.com/v1/tracks/${id}`, {
          |       headers: { Authorization: `Bearer ${token}` },
          |     });
          | 
          |     const track = await response.json();
          |     return NextResponse.json(track);
          |   } catch (error) {
          |     return NextResponse.json({ error: 'Failed to fetch track' }, { status: 500 });
          |   }
          | }
          | --- END ---

        ‚îú‚îÄ‚îÄ route.ts
          | --- START: api/youtube/search/route.ts ---
          | import { NextResponse } from 'next/server';
          | 
          | export async function GET(request: Request) {
          |   const { searchParams } = new URL(request.url);
          |   const query = searchParams.get('q');
          |   const API_KEY = process.env.YOUTUBE_API_KEY;
          | 
          |   if (!query) {
          |     return NextResponse.json([]);
          |   }
          | 
          |   try {
          |     // 1. Try to extract Video ID from URL (handles watch, shorts, youtu.be)
          |     const videoIdMatch = query.match(/(?:v=|shorts\/|youtu\.be\/|embed\/)([a-zA-Z0-9_-]{11})/);
          |     
          |     if (videoIdMatch && videoIdMatch[1]) {
          |       const videoId = videoIdMatch[1];
          |       const res = await fetch(
          |         `https://www.googleapis.com/youtube/v3/videos?part=snippet&id=${videoId}&key=${API_KEY}`
          |       );
          |       const data = await res.json();
          | 
          |       if (data.items && data.items.length > 0) {
          |         const item = data.items[0];
          |         return NextResponse.json([{
          |           id: item.id,
          |           name: item.snippet.title,
          |           artist: item.snippet.channelTitle,
          |           image: item.snippet.thumbnails.medium?.url || item.snippet.thumbnails.default?.url,
          |         }]);
          |       }
          |     }
          | 
          |     // 2. If no URL match, perform a Broad Search
          |     const searchRes = await fetch(
          |       `https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(query)}&type=video&maxResults=5&key=${API_KEY}`
          |     );
          |     const searchData = await searchRes.json();
          | 
          |     // Log for debugging if search returns nothing
          |     if (!searchData.items) {
          |       console.log("YouTube API returned no items:", searchData);
          |       return NextResponse.json([]);
          |     }
          | 
          |     const results = searchData.items.map((item: any) => ({
          |       id: item.id.videoId,
          |       name: item.snippet.title,
          |       artist: item.snippet.channelTitle,
          |       image: item.snippet.thumbnails.medium?.url,
          |     }));
          | 
          |     return NextResponse.json(results);
          | 
          |   } catch (error) {
          |     console.error("YT API Error:", error);
          |     return NextResponse.json({ error: 'YouTube search failed' }, { status: 500 });
          |   }
          | }
          | --- END ---

    ‚îú‚îÄ‚îÄ route.tsx
      | --- START: og/route.tsx ---
      | import { ImageResponse } from 'next/og'
      | 
      | // IMPORTANT: Define the runtime as 'edge' for this API to work correctly.
      | export const runtime = 'edge'
      | 
      | // The URL for the Cloudinary background image
      | const HERO_IMAGE_URL = 'https://res.cloudinary.com/dpmkshcky/image/upload/c_fill,g_auto,h_250,w_970/b_rgb:000000,e_gradient_fade,y_-0.50/c_scale,co_rgb:ffffff,fl_relative,l_text:montserrat_25_style_light_align_center:Your%20Funky%20Jazz,w_0.2,y_0.3/v1570237649/17160429878_68460aeb25_o-1_udg7bx.jpg'
      | 
      | // The GET function MUST be async to use fetch
      | export async function GET(request: Request) {
      |   let url = new URL(request.url)
      |   let title = url.searchParams.get('title') || 'My Musical Journey, Jazz is everywhere'
      | 
      |   // --- 1. Fetch the External Image ---
      |   let imageBuffer: ArrayBuffer | undefined;
      |   try {
      |       // Use fetch to get the image data
      |       const response = await fetch(HERO_IMAGE_URL);
      |       if (response.ok) {
      |           imageBuffer = await response.arrayBuffer();
      |       } else {
      |           console.error(`Failed to fetch background image: ${response.status}`);
      |       }
      |   } catch (error) {
      |       console.error('Error fetching image:', error);
      |   }
      | 
      |   // --- 2. Render the ImageResponse with the image data ---
      |   return new ImageResponse(
      |     (
      |       <div 
      |         tw="flex flex-col w-full h-full items-center justify-center text-white"
      |         style={{
      |           // Fallback background color if image fails to load
      |           backgroundColor: '#000', 
      |         }}
      |       >
      |         {/* Render the Image element using the fetched URL */}
      |         {imageBuffer ? (
      |             // Use the <img> tag and the full URL
      |             <img 
      |                 src={HERO_IMAGE_URL} 
      |                 alt="Arman Ayva Background" 
      |                 width={1200}
      |                 height={630}
      |                 tw="absolute inset-0 w-full h-full object-cover" 
      |             />
      |         ) : (
      |              // Simple fallback text if the image fails to load
      |             <div tw="text-4xl">Image Failed to Load</div>
      |         )}
      |         
      |         {/* Black Overlay for Readability */}
      |         <div tw="absolute inset-0 bg-black opacity-60" />
      |         
      |         {/* Content container - place it on top of the overlay */}
      |         <div tw="relative flex flex-col w-full p-16 justify-center items-center">
      |           <h1 tw="text-6xl font-bold tracking-tight text-center max-w-4xl">
      |             {title}
      |           </h1>
      |           <p tw="text-2xl mt-4">Arman Ayva | Composer & Musician</p>
      |         </div>
      |       </div>
      |     ),
      |     {
      |       width: 1200,
      |       height: 630,
      |     }
      |   )
      | }
      | --- END ---


    [DIR] contact/

    [DIR] radio/

    [DIR] puzzle/

    [DIR] other/
    ‚îú‚îÄ‚îÄ dictionaries.ts
      | --- START: [lang]/dictionaries.ts ---
      | import 'server-only';
      | 
      | const dictionaries: any = {
      |   en: () => import('../../dictionaries/en.json').then((module) => module.default),
      |   fr: () => import('../../dictionaries/fr.json').then((module) => module.default),
      |   hy: () => import('../../dictionaries/hy.json').then((module) => module.default),
      |   ar: () => import('../../dictionaries/ar.json').then((module) => module.default),
      |   ru: () => import('../../dictionaries/ru.json').then((module) => module.default),
      |   es: () => import('../../dictionaries/es.json').then((module) => module.default),
      |   it: () => import('../../dictionaries/it.json').then((module) => module.default),
      |   de: () => import('../../dictionaries/de.json').then((module) => module.default),
      | };
      | 
      | export const getDictionary = async (locale: string) => 
      |   dictionaries[locale]?.() ?? dictionaries.en();
      | --- END ---


    [DIR] about/

    [DIR] blog/

    [DIR] videos/

    [DIR] music-production-disclaimer/
    ‚îú‚îÄ‚îÄ layout.tsx
      | --- START: [lang]/layout.tsx ---
      | import '../global.css'
      | import type { Metadata } from 'next'
      | import { GeistSans } from 'geist/font/sans'
      | import { GeistMono } from 'geist/font/mono'
      | import { Analytics } from '@vercel/analytics/react'
      | import { SpeedInsights } from '@vercel/speed-insights/next'
      | import { Footer } from '../components/footer' 
      | import { baseUrl } from '../sitemap' 
      | import { Providers } from '../Providers'; 
      | import { GoogleAnalytics } from '@next/third-parties/google'
      | import Script from 'next/script'; 
      | import { DelayedSubscribePopup } from '../components/DelayedSubscribePopup'; 
      | import { GoogleTagManager } from '@next/third-parties/google'
      | import { Navbar } from '../components/nav'
      | 
      | const GA_MEASUREMENT_ID = process.env.NEXT_PUBLIC_GA_ID || ''
      | const YOUR_APP_ID = process.env.YOUR_FACEBOOK_APP_ID; 
      | const TIKTOK_PIXEL_ID = process.env.NEXT_PUBLIC_TIKTOK_ID || 'YOUR_TIKTOK_PIXEL_ID'; 
      | 
      | export const metadata: Metadata = {
      |   metadataBase: new URL(baseUrl),
      |   title: {
      |     default: 'Arman Ayva Personal Website',
      |     template: '%s | Arman Ayva', 
      |   },
      |   description: 'Arman Ayva | Montreal Jazz Composer Blending Armenian Folk & Funk',
      | }
      | 
      | const cx = (...classes: any[]) => classes.filter(Boolean).join(' ')
      | 
      | export default async function RootLayout({
      |   children,
      |   params,
      | }: {
      |   children: React.ReactNode;
      |   params: Promise<{ lang: string }>; // Correct for Next.js 15
      | }) {
      |   // Await params to get the language string
      |   const { lang } = await params;
      | 
      |   // Determine text direction
      |   const isRTL = lang === 'ar';
      | 
      |   return (
      |     <html
      |       lang={lang}
      |       dir={isRTL ? 'rtl' : 'ltr'}
      |       className={cx(
      |         'text-black dark:bg-black dark:text-white', 
      |         GeistSans.variable,
      |         GeistMono.variable
      |       )}
      |       suppressHydrationWarning
      |     >
      |       <head>
      |         <meta property="fb:app_id" content={YOUR_APP_ID} />
      |       </head>
      |       <body 
      |         className="antialiased max-w-6xl mx-4 mt-8 lg:mx-auto dark:bg-black"
      |         suppressHydrationWarning
      |       >
      |         <Providers> 
      |           <main className="flex-auto min-w-0 mt-6 flex flex-col px-2 md:px-0">
      |               <Navbar lang={lang} />
      | 
      |             {children}
      |             {/* This will now pass the build because the Footer is typed */}
      |             <Footer lang={lang} />
      |             <Analytics />
      |             <SpeedInsights /> 
      |           </main>
      |         </Providers>
      | 
      |         <GoogleAnalytics gaId={GA_MEASUREMENT_ID} />
      |         <GoogleTagManager gtmId='GTM-TKFS52TF' />
      | 
      |         {TIKTOK_PIXEL_ID && TIKTOK_PIXEL_ID !== 'YOUR_TIKTOK_PIXEL_ID' && (
      |           <>
      |             <Script
      |               id="tiktok-pixel-base"
      |               strategy="afterInteractive" 
      |               dangerouslySetInnerHTML={{
      |                 __html: `
      |                   !function (w, d, t) {
      |                     w.TiktokAnalyticsObject=t;var ttq=w[t]=w[t]||[];ttq.methods=["page","track","identify","instances","load","ready","trackCustom","trackEvent","subscribe","ttee"];ttq.setAndDefer=function(t,n){t[n]=function(){t.push([n].concat(Array.prototype.slice.call(arguments,0)))}};for(var i=0;i<ttq.methods.length;i++)ttq.setAndDefer(ttq,ttq.methods[i]);ttq.instance=function(t){for(var n=ttq.slice(0),i=0;i<ttq.methods.length;i++)ttq.setAndDefer(n,ttq.methods[i]);return n.load(t),n};
      |                     ttq.load('${TIKTOK_PIXEL_ID}');
      |                     ttq.page();
      |                     }(window, document, 'ttq');
      |                 `,
      |               }}
      |             />
      |             <Script
      |                 src="https://analytics.tiktok.com/i18n/pixel/sdk.js?sdk_version=2.0.0"
      |                 strategy="afterInteractive"
      |             />
      |           </>
      |         )}
      |         <DelayedSubscribePopup lang='en' />
      |       </body>
      |     </html>
      |   );
      | }
      | --- END ---

    ‚îú‚îÄ‚îÄ page.tsx
      | --- START: [lang]/page.tsx ---
      | import React from 'react';
      | import Link from 'next/link';
      | import Image from 'next/image';
      | import { BlogPosts } from 'app/components/posts'; 
      | import { SubscribeCTA } from 'app/components/subscribe-cta';
      | import { NewReleasesSpotlight } from 'app/components/new-releases-spotlight';
      | import { PlaylistStats } from 'app/components/PlaylistStats';
      | import { Reviews } from 'app/components/Reviews';
      | import { FaYoutube, FaPlay } from 'react-icons/fa';
      | import { getDictionary } from './dictionaries';
      | 
      | function PuzzleCTA({ lang, dict }: { lang: string; dict: any }) {
      |   return (
      |     <div className="max-w-4xl mx-auto my-16 p-1 bg-gradient-to-r from-red-500 via-blue-500 to-purple-600 rounded-3xl shadow-2xl transition-transform hover:scale-[1.01]">
      |       <div className="bg-white dark:bg-neutral-900 rounded-[calc(1.5rem-1px)] p-8 sm:p-12 flex flex-col md:flex-row items-center gap-8">
      |         <div className="flex-1 space-y-4">
      |           <div className="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-xs font-bold uppercase tracking-widest">
      |             <span className="relative flex h-2 w-2">
      |               <span className="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span>
      |               <span className="relative inline-flex rounded-full h-2 w-2 bg-red-500"></span>
      |             </span>
      |             {dict.badge}
      |           </div>
      |           <h2 className="text-4xl font-serif font-bold tracking-tight">{dict.title}</h2>
      |           <p className="text-neutral-600 dark:text-neutral-400 text-lg leading-relaxed">{dict.description}</p>
      |           <Link href={`/${lang}/puzzle`} className="inline-flex items-center gap-3 px-8 py-4 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition-all shadow-xl active:translate-y-1">
      |             <FaPlay size={14} /> {dict.button}
      |           </Link>
      |         </div>
      |         <div className="w-full md:w-64 h-48 bg-neutral-100 dark:bg-neutral-800 rounded-2xl border-4 border-white dark:border-neutral-700 shadow-inner flex items-center justify-center relative overflow-hidden group">
      |            <div className="grid grid-cols-2 gap-2 p-4 w-full opacity-40 group-hover:opacity-100 transition-opacity">
      |               {[1,2,3,4].map(i => (<div key={i} className="h-12 bg-white dark:bg-neutral-700 rounded-lg shadow-sm" />))}
      |            </div>
      |            <FaYoutube className="absolute text-5xl text-red-600 drop-shadow-lg group-hover:scale-110 transition-transform" />
      |         </div>
      |       </div>
      |     </div>
      |   );
      | }
      | 
      | const HERO_IMAGE_URL = 'https://res.cloudinary.com/dpmkshcky/image/upload/c_fill,g_auto,h_250,w_970/v1570237649/17160429878_68460aeb25_o-1_udg7bx.jpg'
      | 
      | export default async function Page({ params }: { params: Promise<{ lang: string }> }) {
      |   const { lang } = await params;
      |   const dict = await getDictionary(lang);
      | 
      |   return (
      |     <section>
      |       <div className="relative hero-container overflow-hidden rounded-2xl mb-8">
      |         <Image src={HERO_IMAGE_URL} width={970} height={250} alt={dict.hero.name} className="w-full h-auto object-cover" priority />
      |         <div className="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex flex-col justify-end p-6">
      |            <h1 className="text-white font-bold text-4xl font-serif tracking-tighter">{dict.hero.name}</h1>
      |            <p className="text-white/80 max-w-xl">{dict.hero.subtitle}</p>
      |         </div>
      |       </div>
      | 
      |       <div className="prose prose-neutral dark:prose-invert max-w-none">
      |         <p>{dict.intro.text}</p>
      |         <div className="bg-neutral-100 dark:bg-neutral-900 p-4 rounded-xl border border-neutral-200 dark:border-neutral-800 mb-8">
      |           <p className="text-xs font-bold uppercase tracking-widest mb-2 text-blue-500">{dict.latest_single.label}</p>
      |           <iframe style={{ border: 0, width: '100%', height: '120px' }} src="https://bandcamp.com/EmbeddedPlayer/track=2408269376/size=large/bgcol=ffffff/linkcol=0687f5/tracklist=false/artwork=small/transparent=true/" seamless title="Girl From Italy" />
      |         </div>
      |       </div>
      | 
      |       <div className="prose prose-neutral dark:prose-invert">
      |         <h2 className="font-bold text-xl tracking-tight">{dict.videos.title}</h2>
      |         <div className="aspect-w-16 aspect-h-9 w-full max-w-2xl mx-auto rounded-xl overflow-hidden shadow-2xl mt-4">
      |           <iframe className="w-full h-full min-h-[350px]" src="https://www.youtube.com/embed/videoseries?list=PLdh9NdS_IkkUwmhmrqNy0oQTtjxr683kC" frameBorder="0" allowFullScreen />
      |         </div>
      |         <p className="text-sm text-neutral-600 dark:text-neutral-400 mt-3">{dict.videos.description}</p>
      |         
      |         <hr className="my-10 border-neutral-200 dark:border-neutral-800" />
      |         <p>{dict.intro.influences}</p>
      | 
      |         <hr className="my-16 border-neutral-200 dark:border-neutral-800" />
      |         <PuzzleCTA lang={lang} dict={dict.puzzle} />
      | 
      |         <h2 className="font-bold text-2xl font-serif mt-12 mb-6 tracking-tighter">{dict.playlist.title}</h2>
      |         <Link href={`/${lang}/blog/Funky-Jazz-Mood-Lifter`} className="text-sm font-semibold mt-6 inline-block text-neutral-400 dark:text-neutral-50 hover:text-blue-500 transition-colors">
      |           {dict.playlist.link_text} ‚Üí
      |         </Link>
      |         <div className="rounded-xl overflow-hidden shadow-2xl mt-6">
      |           <iframe style={{ borderRadius: '12px' }} src="https://open.spotify.com/embed/playlist/0kQ3ZMgLoc9UoFtJz96qYa" width="100%" height="352" frameBorder="0" allowFullScreen loading="lazy" />
      |         </div>
      |       </div>
      | 
      |       <hr className="my-16 border-neutral-200 dark:border-neutral-800" />
      | 
      | <NewReleasesSpotlight lang={lang} dict={dict.new_releases} />
      | 
      |       <hr className="my-16 border-neutral-200 dark:border-neutral-800" />
      |       
      | <SubscribeCTA lang={lang} dict={dict.subscribe} />
      |       
      |       <hr className="my-10 border-neutral-200 dark:border-neutral-800" />
      |       <h2 className="font-bold text-2xl font-serif mb-6 tracking-tighter text-neutral-400">{dict.general.other_stories}</h2>
      |       <BlogPosts lang={lang} />
      |       <Link href={`/${lang}/blog`} className="text-sm font-semibold mt-6 inline-block text-neutral-400 dark:text-neutral-50 hover:text-blue-500 transition-colors">
      |         {dict.general.view_all} ‚Üí
      |       </Link>
      | 
      |       <hr className="my-16 border-neutral-200 dark:border-neutral-800" />
      |       <Reviews lang={lang} dict={dict.reviews} />
      |       
      |       <hr className="my-16 border-neutral-200 dark:border-neutral-800" />
      |       <div className="flex flex-col items-center mb-10"><iframe style={{ border: 0, width: '350px', height: '470px' }} src="https://bandcamp.com/EmbeddedPlayer/album=854312660/size=large/bgcol=ffffff/linkcol=0687f5/tracklist=false/transparent=true/" seamless /></div>
      |     </section>
      |   )
      | }
      | --- END ---

      ‚îú‚îÄ‚îÄ page.tsx
        | --- START: [lang]/contact/page.tsx ---
        | import { ContactForm } from '../../components/contact-form'; // Import the new form component
        | 
        | 
        | export default function ContactPage() {
        |   // Define the JotForm embed details
        |   const jotFormId = "250527544444255";
        |   const jotFormSrc = `https://form.jotform.com/${jotFormId}`;
        | 
        |   return (
        |     <section className="py-8">
        |       <h1 className="font-bold text-4xl font-serif mb-6 tracking-tighter">
        |         Get in Touch üì©
        |       </h1>
        |       
        |       <div className="prose prose-neutral dark:prose-invert mb-10">
        |         <p className="text-lg">
        |           Do you have a project idea, a press inquiry, or a potential collaboration? 
        |           I'd love to hear from you! Please use the form below to reach **Arman Ayva**.
        |         </p>
        |         <ul className="list-disc ml-6">
        |           <li>For licensing and commercial inquiries, please be as specific as possible.</li>
        |           <li>For collaborations, please include links to your work.</li>
        |         </ul>
        |       </div>
        | 
        |        JotForm Embed Section
        |       <div className="w-full mx-auto" style={{ minHeight: '800px' }}>
        |         <iframe
        |           id="ContactJotFormEmbed"
        |           // Set src to the JotForm URL
        |           src={jotFormSrc}
        |           // The title is important for accessibility
        |           title="Arman Ayva Contact Form"
        |           // Set dimensions to full width and a generous height
        |           width="100%"
        |           height="800px"
        |           frameBorder="0"
        |           scrolling="yes" 
        |           style={{ minHeight: '800px', border: 'none' }}
        |         />
        |       </div>
        | {/*
        |       <div className="mt-8 text-sm text-neutral-500 dark:text-neutral-400">
        |         <p>
        |           I strive to respond to all inquiries within 48 hours. Thank you for your interest!
        | 
        |         </p>
        |       </div>
        | <br></br>
        |       <h1 className="font-bold text-4xl font-serif mb-6 tracking-tighter text-center">
        |         Get In Touch
        |       </h1>
        |       
        |       <div className="prose prose-neutral dark:prose-invert max-w-xl mx-auto text-center mb-8">
        |         <p className="text-lg">
        |           Do you have a project idea, a licensing inquiry, or just want to talk about jazz-funk? 
        |           Send a message below, and I'll get back to you as soon as possible.
        |         </p>
        |       </div>
        | 
        | 
        |       <div className="max-w-xl mx-auto text-center mt-10 p-4 border border-neutral-200 dark:border-neutral-800 rounded-xl bg-neutral-50 dark:bg-neutral-900">
        |         <h2 className="font-bold text-xl mb-2">Licensing & Commercial Use</h2>
        |         <p className="text-sm text-neutral-600 dark:text-neutral-400">
        |           For all professional licensing or synchronization requests, please include details about the usage 
        |           (e.g., film, advertisement, game) and the specific tracks you are interested in.
        |         </p>
        |       </div>
        | 
        | 
        |       <ContactForm />
        | 
        |        */} 
        |     </section>
        |   );
        | }
        | 
        | //1015 Rue du March√© Central, Montr√©al, QC H4N 3J8
        | --- END ---

      ‚îú‚îÄ‚îÄ page.tsx
        | --- START: [lang]/radio/page.tsx ---
        | export default function RadioPage() {
        |   // Define all your radio station embeds and the YouTube playlist
        |   const embeds = [
        |     {
        |       name: "CHOM 97.7 (Montreal Rock)",
        |       src: "https://www.iheart.com/live/chom-97-7-7463/?embed=true",
        |       height: "200",
        |     },
        |     {
        |       name: "No√´l c'est Rouge (Holiday)",
        |       src: "https://www.iheart.com/live/noel-cest-rouge-8140/?embed=true",
        |       height: "200",
        |     },
        |     {
        |       name: "CJAD 800 (Montreal News)",
        |       src: "https://www.iheart.com/live/cjad-800-7455/?embed=true",
        |       height: "200",
        |     },
        |     {
        |       // YouTube Embed is taller and should span the grid if possible, 
        |       // but here we keep the uniform style for simplicity.
        |       name: "Arman Ayva Music Playlist (YouTube)",
        |       src: "https://www.youtube.com/embed/videoseries?list=PLdh9NdS_IkkUwmhmrqNy0oQTtjxr683kC&autoplay=0",
        |       height: "315", // Height adjusted for YouTube player size
        |     },
        |     {
        |       name: "95.9 Virgin Radio (Pop)",
        |       src: "https://www.iheart.com/live/959-virgin-radio-7453/?embed=true",
        |       height: "200",
        |     },
        |     {
        |       name: "Vinyl Jazz (iHeart)",
        |       src: "https://www.iheart.com/live/vinyl-jazz-7079/?embed=true",
        |       height: "200",
        |     },
        |     {
        |       name: "iHeartJazz Classics",
        |       src: "https://www.iheart.com/live/iheartjazz-classics-9918/?embed=true",
        |       height: "200",
        |     },
        |     {
        |       name: "CHUM 104.5 (Toronto Pop)",
        |       src: "https://www.iheart.com/live/chum-1045-6270/?embed=true",
        |       height: "200",
        |     },
        |     {
        |       name: "Q104.3 (New York Rock)",
        |       src: "https://www.iheart.com/live/q1043-1465/?embed=true",
        |       height: "200",
        |     },
        |     {
        |       name: "Power 105.1 (New York Hip Hop)",
        |       src: "https://www.iheart.com/live/power-1051-1481/?embed=true",
        |       height: "200",
        |     },
        |   ];
        | 
        |   return (
        |     <section className="py-8">
        |       <h1 className="font-bold text-4xl font-serif mb-6 tracking-tighter">
        |         Arman Ayva's Detached Radio üìª
        |       </h1>
        |       
        |       <div className="prose prose-neutral dark:prose-invert mb-10">
        |         <p className="text-lg">
        |           Tune into a curated selection of great radio‚Äîfrom Montreal classics and New York grooves 
        |           to chill jazz stations and my own featured music playlist. Enjoy the mix!
        |         </p>
        |       </div>
        | 
        |       {/* Tailwind CSS Grid Layout: 2 columns on small screens, 3 on large */}
        |       <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        | {embeds.map((embed) => (
        |   <div key={embed.name} className="...">
        |     <h3 className="...">{embed.name}</h3>
        |     <iframe 
        |       allow="autoplay" 
        |       width="100%" 
        |       height={embed.height} 
        |       src={embed.src} 
        |       frameBorder="0" 
        |       title={`${embed.name} Radio Player`} // Added unique, descriptive title
        |       allowFullScreen={embed.name.includes("YouTube") ? true : undefined}
        |     />
        |   </div>
        | ))}
        |       </div>
        |     </section>
        |   );
        | }
        | --- END ---

      ‚îú‚îÄ‚îÄ game-registry.ts
        | --- START: [lang]/puzzle/game-registry.ts ---
        | // app/puzzle/game-registry.ts
        | import { MusicPuzzle } from 'app/components/game/MusicPuzzle';
        | import { ReverseGame } from 'app/components/game/ReverseGame';
        | import { YoutubeBpmGame } from 'app/components/game/YoutubeBpmGame';
        | import { KeyGame } from 'app/components/game/KeyGame';
        | 
        | export const GAME_PHASES = [
        |   {
        |     id: '01',
        |     title: 'The Rhythm Jigsaw üß©',
        |     description: "Search for tracks and reconstruct the groove by ear.",
        |     color: 'red',
        |     Component: MusicPuzzle,
        |   },
        |   {
        |     id: '02',
        |     title: 'Sonic Mirror ‚è™',
        |     description: 'Identify famous melodies playing in complete reverse.',
        |     color: 'purple',
        |     Component: ReverseGame,
        |   },
        |   {
        |     id: '03',
        |     title: 'BPM Detective üïµÔ∏è‚Äç‚ôÇÔ∏è',
        |     description: 'Test your internal metronome by identifying the exact BPM.',
        |     color: 'blue',
        |     Component: YoutubeBpmGame,
        |   },
        |   {
        |     id: '04',
        |     title: 'Harmonic Balance üéº',
        |     description: 'Determine the key of the song just by listening to the melody.',
        |     color: 'emerald',
        |     Component: KeyGame,
        |   }
        | ];
        | --- END ---

      ‚îú‚îÄ‚îÄ page.tsx
        | --- START: [lang]/puzzle/page.tsx ---
        | import { MusicPuzzle } from 'app/components/game/MusicPuzzle';
        | import { ReverseGame } from 'app/components/game/ReverseGame';
        | import Link from 'next/link';
        | import { YoutubeBpmGame } from 'app/components/game/YoutubeBpmGame';
        | import { KeyGame } from 'app/components/game/KeyGame'; 
        | import { getDictionary } from '../dictionaries';
        | import { MusicalTrivia } from 'app/components/game/MusicTrivia';
        | 
        | export const dynamic = 'force-dynamic'; // [cite: 1]
        | 
        | /**
        |  * Reusable Section Component
        |  * Standardizes the UI for every game phase [cite: 8, 14, 17, 21]
        |  */
        | interface GameSectionProps {
        |   phaseLabel: string;
        |   title: string;
        |   description: string;
        |   color: 'red' | 'purple' | 'blue' | 'emerald';
        |   instructionsTitle: string;
        |   steps: (string | undefined)[];
        |   videoEmbed?: string;
        |   children: React.ReactNode;
        | }
        | 
        | function GameSection({ phaseLabel, title, description, color, instructionsTitle, steps, videoEmbed, children }: GameSectionProps) {
        |   const colorMap = {
        |     red: "bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400",
        |     purple: "bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400",
        |     blue: "bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400",
        |     emerald: "bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400",
        |   };
        | 
        |   return (
        |     <div className="rounded-3xl p-6 md:p-10 bg-neutral-50 dark:bg-neutral-900/50 border border-neutral-200 dark:border-neutral-800 shadow-sm">
        |       <header className="prose prose-neutral dark:prose-invert max-w-none mb-12">
        |         <span className={`inline-block px-3 py-1 rounded-full ${colorMap[color]} text-xs font-bold uppercase tracking-widest mb-4`}>
        |           {phaseLabel}
        |         </span>
        |         <h2 className="font-bold text-5xl md:text-7xl font-serif mb-6 tracking-tighter">
        |           {title}
        |         </h2>
        |         
        |         <div className="grid grid-cols-1 lg:grid-cols-2 gap-12">
        |           <div className="space-y-6">
        |             <p className="text-xl text-neutral-600 dark:text-neutral-400 leading-relaxed">
        |               {description}
        |             </p>
        |             
        |             <div className="mt-6 p-4 rounded-xl bg-white/50 dark:bg-black/20 border border-neutral-200/50 dark:border-neutral-800/50">
        |               <h4 className="text-xs font-bold uppercase tracking-widest text-neutral-400 mb-3">{instructionsTitle}</h4>
        |               <ul className="space-y-2">
        |                 {steps.map((step, i) => step && (
        |                   <li key={i} className="flex gap-3 text-sm text-neutral-600 dark:text-neutral-400">
        |                     <span className="font-bold text-neutral-900 dark:text-neutral-100">{i + 1}.</span>
        |                     {step}
        |                   </li>
        |                 ))}
        |               </ul>
        |             </div>
        |           </div>
        | 
        |           {videoEmbed && (
        |             <div className="relative w-full max-w-[280px] mx-auto lg:mx-0 aspect-[9/16] rounded-2xl overflow-hidden shadow-2xl border-4 border-white dark:border-neutral-800 bg-black">
        |               <iframe
        |                 width="100%" height="100%"
        |                 src={videoEmbed}
        |                 title="Tutorial"
        |                 allowFullScreen
        |                 className="absolute inset-0"
        |               />
        |             </div>
        |           )}
        |         </div>
        |       </header>
        |       {children}
        |     </div>
        |   );
        | }
        | 
        | export async function generateMetadata({ params }: { params: Promise<{ lang: string }> }) {
        |   const { lang } = await params;
        |   const dict = await getDictionary(lang);
        |   
        |   return {
        |     title: `${dict.puzzle.title} | Arman Ayva`, // [cite: 4, 5]
        |     description: dict.puzzle.description, // [cite: 6]
        |     openGraph: {
        |       title: `${dict.puzzle.title} üß©`, // [cite: 6]
        |       description: dict.puzzle.description,
        |       url: `https://www.armanayva.com/${lang}/puzzle`, // [cite: 6]
        |       siteName: 'Arman Ayva Music', // [cite: 6]
        |       images: [{ url: 'https://res.cloudinary.com/dpmkshcky/image/upload/v1769091826/musicpuzzle_byve3t.jpg', width: 1200, height: 630 }], // [cite: 6]
        |       locale: lang === 'ar' ? 'ar_EG' : 'en_US',
        |       type: 'website',
        |     },
        |   };
        | }
        | 
        | export default async function PuzzlePage({ params }: { params: Promise<{ lang: string }> }) {
        |   const { lang } = await params;
        |   const dict = await getDictionary(lang);
        | 
        |   // Fixes the "undefined 01" issue by adding a fallback [cite: 8, 14, 17, 21]
        |   const phaseText = dict.puzzle.phase || "Phase";
        | 
        |   const games = [
        |     {
        |       id: "01",
        |       title: dict.puzzle.rhythmTitle,
        |       description: dict.puzzle.rhythmDesc,
        |       color: "red" as const,
        |       video: "https://www.youtube.com/embed/LemCmwSZS-I?autoplay=0&rel=0", // [cite: 12]
        |       steps: [dict.puzzle.rhythmStep1, dict.puzzle.rhythmStep2, dict.puzzle.rhythmStep3],
        |       Component: MusicPuzzle
        |     },
        |     {
        |       id: "02",
        |       title: dict.puzzle.sonicMirrorTitle,
        |       description: dict.puzzle.sonicMirrorDesc,
        |       color: "purple" as const,
        |       steps: [dict.puzzle.sonicStep1, dict.puzzle.sonicStep2, dict.puzzle.sonicStep3],
        |       Component: ReverseGame
        |     },
        |     {
        |       id: "03",
        |       title: dict.puzzle.bpmTitle,
        |       description: dict.puzzle.bpmDesc,
        |       color: "blue" as const,
        |       steps: [dict.puzzle.bpmStep1, dict.puzzle.bpmStep2, dict.puzzle.bpmStep3],
        |       Component: YoutubeBpmGame
        |     },
        |     {
        |       id: "04",
        |       title: dict.puzzle.harmonicTitle,
        |       description: dict.puzzle.harmonicDesc,
        |       color: "emerald" as const,
        |       steps: [dict.puzzle.keyStep1, dict.puzzle.keyStep2, dict.puzzle.keyStep3],
        |       Component: KeyGame
        |     },
        | {
        |     id: "05",
        |     title: dict.puzzle.triviaTitle || "Musical Trivia üí°",
        |     description: dict.puzzle.triviaDesc || "Test your knowledge of music theory, history, and production.",
        |     color: "blue" as const,
        |     steps: [
        |       dict.puzzle.triviaStep1 || "Read the question carefully.",
        |       dict.puzzle.triviaStep2 || "Pick the best answer from the 4 options.",
        |       dict.puzzle.triviaStep3 || "Check the 'Fact' box to learn something new!"
        |     ],
        |     Component: MusicalTrivia
        |   }
        | 
        |   ];
        | 
        |   return (
        |     <section key={lang} className="py-8 space-y-24">
        |       <div className="mb-8">
        |         <Link 
        |           href={`/${lang}`} 
        |           className="text-sm font-bold uppercase tracking-widest text-neutral-500 hover:text-blue-500 transition-colors"
        |         >
        |           ‚Üê {dict.common?.backToHome || 'Back to Home'}
        |         </Link>
        |       </div>
        | 
        |       {games.map((game) => (
        |         <GameSection
        |           key={game.id}
        |           phaseLabel={`${phaseText} ${game.id}`}
        |           title={game.title}
        |           description={game.description}
        |           color={game.color}
        |           instructionsTitle={dict.puzzle.howToPlay || "How to Play"}
        |           steps={game.steps}
        |           videoEmbed={game.video}
        |         >
        |           <game.Component lang={lang} />
        |         </GameSection>
        |       ))}
        | 
        |       <div className="text-center py-10">
        |         <p className="text-neutral-500 text-sm italic">{dict.puzzle.comingSoon}</p>
        |       </div>
        |     </section>
        |   );
        | }
        | --- END ---


      [DIR] thank-you/

      [DIR] subscribe/
        ‚îú‚îÄ‚îÄ page.tsx
          | --- START: [lang]/other/thank-you/page.tsx ---
          | import Link from 'next/link';
          | // Note: No extra Google Tag code needed here if GTM is in layout.js
          | 
          | export default function SubscribeThankYouPage() {
          |   return (
          |     // Equivalent to style="text-align:center; padding:100px 20px;"
          |     <div className="min-h-screen bg-gray-50 flex flex-col items-center justify-center p-4">
          |       
          |       <div className="bg-white p-8 sm:p-12 rounded-lg shadow-xl max-w-lg w-full text-center">
          |         
          |         {/* Checkmark or Thank You Header */}
          |         <div className="text-green-500 mb-6">
          |           <svg className="w-20 h-20 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          |             <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          |           </svg>
          |         </div>
          |         
          |         <h1 className="text-4xl font-extrabold text-gray-900 mb-4">
          |           Thank You for Subscribing!
          |         </h1>
          |         
          |         <p className="text-xl text-gray-600 mb-8">
          |           You're all set. Check your inbox shortly for a confirmation email and the latest updates from Arman Ayva.
          |         </p>
          |         
          |         <Link href="/" className="inline-block bg-sky-500 hover:bg-sky-600 text-white font-bold py-3 px-8 rounded-lg text-lg transition-colors duration-300 shadow-lg">
          |           Return to Homepage
          |         </Link>
          |       </div>
          |       
          |     </div>
          |   );
          | }   
          | --- END ---

        ‚îú‚îÄ‚îÄ page.tsx
          | --- START: [lang]/other/subscribe/page.tsx ---
          | import Link from 'next/link';
          | 
          | export default function SubscribePage() {
          |   // Define the JotForm embed details
          |   const jotFormId = "253107289846264";
          |   const jotFormSrc = `https://form.jotform.com/${jotFormId}`;
          | 
          |   return (
          |     <section className="py-8">
          |       <h1 className="font-bold text-4xl font-serif mb-6 tracking-tighter">
          |         Subscribe to Arman Ayva Projects üéµ
          |       </h1>
          |       
          |       <div className="prose prose-neutral dark:prose-invert mb-10">
          |         <p className="text-lg">
          |           Join the exclusive mailing list to receive the latest updates on new music releases, 
          |           creative projects, and collaboration opportunities from **Arman Ayva ‚Äì Montreal Jazz Composer**. 
          |           We promise to keep your inbox groovy!
          |         </p>
          |       </div>
          | 
          |       {/* JotForm Embed Section */}
          |       <div className="w-full mx-auto" style={{ minHeight: '800px' }}>
          |         <iframe
          |           id="JotFormEmbed"
          |           // Set src to the JotForm URL
          |           src={jotFormSrc}
          |           // The title is important for accessibility (SEO/Screen readers)
          |           title="Arman Ayva Email Subscription Form"
          |           // Frameborder=0 removes the default border
          |           frameBorder="0"
          |           // Scrolling=no can prevent scrollbars if the height is exact, but "yes" is safer for forms
          |           scrolling="yes" 
          |           // Set dimensions to full width and a reasonable height
          |           width="100%"
          |           height="800px"
          |           // Set a minimum height for better mobile display, adjust as needed
          |           style={{ minHeight: '800px', border: 'none' }}
          |         />
          |       </div>
          | 
          |       <div className="mt-8 text-sm text-neutral-500 dark:text-neutral-400">
          |         <p>
          |           Need to change your mind? You can <Link href="/contact" className="underline hover:text-blue-500">contact me</Link> anytime to manage your subscription.
          |         </p>
          |       </div>
          |     </section>
          |   );
          | }
          | --- END ---

      ‚îú‚îÄ‚îÄ page.tsx
        | --- START: [lang]/about/page.tsx ---
        | import Link from 'next/link';
        | import Image from 'next/image';
        | import { getDictionary } from '../dictionaries';
        | 
        | const HERO_IMAGE_URL = 'https://res.cloudinary.com/dpmkshcky/image/upload/c_fill,g_auto,h_250,w_970/b_rgb:000000,e_gradient_fade,y_-0.30/c_scale,co_rgb:ffffff,fl_relative,l_text:montserrat_25_style_light_align_center:Jazz%20Now,w_0.2,y_0/v1570237614/img_2437-copy-copy_pzebz7.jpg'
        | 
        | export default async function AboutPage({ params }: { params: Promise<{ lang: string }> }) {
        |   const { lang } = await params;
        |   const dict = (await getDictionary(lang)).about;
        | 
        |   return (
        |     <section className="py-8">
        |       <div className="hero-container mb-8">
        |         <Image
        |           src={HERO_IMAGE_URL}
        |           width={970} height={250} 
        |           alt="Arman Ayva"
        |           className="w-full h-auto object-cover rounded-lg shadow-lg" 
        |           priority 
        |         />
        |       </div>
        | 
        |       <h1 className="font-bold text-4xl font-serif mb-6 tracking-tighter">{dict.title}</h1>
        |       
        |       <div className="prose prose-neutral dark:prose-invert max-w-none">
        |         <p className="lead text-xl">{dict.lead}</p>
        | 
        |         <hr className="my-8 border-neutral-200 dark:border-neutral-800" />
        |         
        |         <h2>{dict.section1_title}</h2>
        |         <p>{dict.section1_text}</p>
        | 
        |         <h2>{dict.section2_title}</h2>
        |         <p>{dict.section2_text}</p>
        | 
        |         <h3>{dict.section3_title}</h3>
        |         <p>{dict.section3_text}</p>
        | 
        |         <h2>{dict.section4_title}</h2>
        |         <p>{dict.section4_text}</p>
        |         
        |         <div className="rounded-xl overflow-hidden shadow-2xl my-8">
        |           <iframe 
        |               style={{ borderRadius: '12px' }} 
        |               src="https://open.spotify.com/embed/playlist/0kQ3ZMgLoc9UoFtJz96qYa"
        |               width="100%" height="352" frameBorder="0" allowFullScreen 
        |               allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
        |               loading="lazy"
        |             />
        |         </div>
        |         
        |         <div className="text-center py-8 bg-neutral-50 dark:bg-neutral-900 rounded-2xl border border-neutral-200 dark:border-neutral-800">
        |           <p className="font-bold mb-4">{dict.cta_ready}</p>
        |           <Link 
        |             href={`/${lang}/blog`}
        |             className="text-lg text-blue-500 hover:text-blue-700 transition-colors font-semibold"
        |           >
        |             {dict.cta_button} ‚Üí
        |           </Link>
        |         </div>
        |       </div>
        | 
        |       <div className="mt-20 border-t border-neutral-200 dark:border-neutral-800 pt-12">
        |         <h1 className="font-bold text-3xl font-serif mb-6 tracking-tighter">{dict.disclaimer_title}</h1>
        |         <div className="prose prose-neutral dark:prose-invert max-w-none">
        |           <p className="lead text-lg">{dict.disclaimer_lead}</p>
        |           
        |           <h2>{dict.disclaimer_tech_title}</h2>
        |           <p>{dict.disclaimer_tech_text}</p>
        |           
        |           <h2>{dict.disclaimer_royalty_title}</h2>
        |           <p>{dict.disclaimer_royalty_text}</p>
        |           
        |           <h2>{dict.disclaimer_integrity_title}</h2>
        |           <p>{dict.disclaimer_integrity_text}</p>
        |         </div>
        | 
        |         <div className="mt-8 text-sm text-neutral-500">
        |           <p>
        |             {dict.disclaimer_contact} <Link href={`/${lang}/contact`} className="underline hover:text-blue-500">Contact page</Link>.
        |           </p>
        |         </div>
        |       </div>
        |     </section>
        |   );
        | }
        | --- END ---

      ‚îú‚îÄ‚îÄ mdx.tsx
        | --- START: [lang]/blog/mdx.tsx ---
        | import Link from 'next/link'
        | import Image from 'next/image'
        | import { MDXRemote } from 'next-mdx-remote/rsc'
        | import { highlight } from 'sugar-high'
        | import React from 'react'
        | 
        | // Custom Components
        | import BandcampCTA from 'app/components/BandcampCTA'
        | import MusicCTA from 'app/components/game/MusicCTA'
        | import { PlaylistStats } from 'app/components/PlaylistStats'
        | import { PlaylistDiscovery } from 'app/components/PlaylistDiscovery'
        | 
        | 
        | // --- HELPER FUNCTIONS (Must be defined before usage) ---
        | 
        | function Table({ data }: { data: { headers: string[]; rows: string[][] } }) {
        |   let headers = data.headers.map((header, index) => (
        |     <th key={index}>{header}</th>
        |   ))
        |   let rows = data.rows.map((row, index) => (
        |     <tr key={index}>
        |       {row.map((cell, cellIndex) => (
        |         <td key={cellIndex}>{cell}</td>
        |       ))}
        |     </tr>
        |   ))
        | 
        |   return (
        |     <table>
        |       <thead>
        |         <tr>{headers}</tr>
        |       </thead>
        |       <tbody>{rows}</tbody>
        |     </table>
        |   )
        | }
        | 
        | function CustomLink(props: any) {
        |   let href = props.href
        | 
        |   if (href.startsWith('/')) {
        |     return (
        |       <Link href={href} {...props}>
        |         {props.children}
        |       </Link>
        |     )
        |   }
        | 
        |   if (href.startsWith('#')) {
        |     return <a {...props} />
        |   }
        | 
        |   return <a target="_blank" rel="noopener noreferrer" {...props} />
        | }
        | 
        | function RoundedImage(props: any) {
        |   return <Image alt={props.alt} className="rounded-lg" {...props} />
        | }
        | 
        | function Code({ children, ...props }: any) {
        |   let codeHTML = highlight(children)
        |   return <code dangerouslySetInnerHTML={{ __html: codeHTML }} {...props} />
        | }
        | 
        | function slugify(str: string) {
        |   return str
        |     .toString()
        |     .toLowerCase()
        |     .trim()
        |     .replace(/\s+/g, '-')
        |     .replace(/&/g, '-and-')
        |     .replace(/[^\w\-]+/g, '')
        |     .replace(/\-\-+/g, '-')
        | }
        | 
        | function createHeading(level: number) {
        |   const Heading = ({ children }: any) => {
        |     let slug = slugify(children)
        |     return React.createElement(
        |       `h${level}`,
        |       { id: slug },
        |       [
        |         React.createElement('a', {
        |           href: `#${slug}`,
        |           key: `link-${slug}`,
        |           className: 'anchor',
        |         }),
        |       ],
        |       children
        |     )
        |   }
        |   Heading.displayName = `Heading${level}`
        |   return Heading
        | }
        | 
        | // --- COMPONENT REGISTRATION ---
        | 
        | let components = {
        |   h1: createHeading(1),
        |   h2: createHeading(2),
        |   h3: createHeading(3),
        |   h4: createHeading(4),
        |   h5: createHeading(5),
        |   h6: createHeading(6),
        |   Image: RoundedImage,
        |   a: CustomLink,
        |   code: Code,
        |   Table,         // Ensure Table is here
        |   BandcampCTA,
        |   MusicCTA,
        |   PlaylistStats, 
        |   PlaylistDiscovery,// Ensure PlaylistStats is here
        | }
        | 
        | export function CustomMDX(props: any) {
        |   return (
        |     <MDXRemote
        |       {...props}
        |       components={{ ...components, ...(props.components || {}) }}
        |     />
        |   )
        | }
        | --- END ---


      [DIR] posts/
      ‚îú‚îÄ‚îÄ utils.ts
        | --- START: [lang]/blog/utils.ts ---
        | import fs from 'fs'
        | import path from 'path'
        | 
        | type Metadata = {
        |   title: string
        |   publishedAt: string
        |   summary: string
        |   image?: string
        |   headerImage?: string
        | }
        | 
        | function parseFrontmatter(fileContent: string) {
        |   const frontmatterRegex = /---\s*([\s\S]*?)\s*---/
        |   const match = frontmatterRegex.exec(fileContent)
        |   
        |   if (!match) {
        |     return { metadata: {} as Metadata, content: fileContent }
        |   }
        | 
        |   const frontMatterBlock = match[1]
        |   const content = fileContent.replace(frontmatterRegex, '').trim()
        |   const metadata: Partial<Metadata> = {}
        | 
        |   frontMatterBlock.trim().split('\n').forEach((line) => {
        |     const [key, ...valueParts] = line.split(':')
        |     if (key && valueParts.length > 0) {
        |       let value = valueParts.join(':').trim()
        |       value = value.replace(/^['"](.*)['"]$/, '$1') // Strip quotes
        |       metadata[key.trim() as keyof Metadata] = value
        |     }
        |   })
        | 
        |   return { metadata: metadata as Metadata, content }
        | }
        | 
        | function getMDXData(dir: string) {
        |   if (!fs.existsSync(dir)) return []
        | 
        |   const mdxFiles = fs.readdirSync(dir).filter((file) => path.extname(file) === '.mdx')
        |   
        |   return mdxFiles.map((file) => {
        |     const rawContent = fs.readFileSync(path.join(dir, file), 'utf-8')
        |     const { metadata, content } = parseFrontmatter(rawContent)
        |     
        |     // Improved slug: removes extension and replaces non-alphanumeric with hyphens
        |     const slug = path.parse(file).name
        |       .toLowerCase()
        |       .replace(/[^a-z0-9]+/g, '-')
        |       .replace(/(^-|-$)/g, '')
        |     
        |     return { metadata, slug, content }
        |   })
        | }
        | 
        | export function formatDate(date: string | null | undefined, includeRelative = false) {
        |   if (!date) return 'Date TBD' 
        |   const targetDate = new Date(date.includes('T') ? date : `${date}T00:00:00`)
        |   
        |   const fullDate = targetDate.toLocaleString('en-us', {
        |     month: 'long', day: 'numeric', year: 'numeric',
        |   })
        | 
        |   if (!includeRelative) return fullDate
        | 
        |   const diffInDays = Math.floor((new Date().getTime() - targetDate.getTime()) / (1000 * 60 * 60 * 24))
        |   
        |   let relative = ''
        |   if (diffInDays < 1) relative = 'Today'
        |   else if (diffInDays < 30) relative = `${diffInDays}d ago`
        |   else if (diffInDays < 365) relative = `${Math.floor(diffInDays / 30)}mo ago`
        |   else relative = `${Math.floor(diffInDays / 365)}y ago`
        | 
        |   return `${fullDate} (${relative})`
        | }
        | 
        | /**
        |  * Optimized Blog Fetcher
        |  * Looks for posts in: /app/[lang]/blog/posts/{lang}/*.mdx
        |  */
        | export function getBlogPosts(lang: string = 'en') {
        |   // Path for localized posts
        |   const localizedPath = path.join(process.cwd(), 'app', '[lang]', 'blog', 'posts', lang);
        |   // Fallback path for general posts
        |   const flatPath = path.join(process.cwd(), 'app', '[lang]', 'blog', 'posts');
        | 
        |   if (fs.existsSync(localizedPath) && fs.readdirSync(localizedPath).some(f => f.endsWith('.mdx'))) {
        |     return getMDXData(localizedPath);
        |   }
        | 
        |   if (fs.existsSync(flatPath)) {
        |     return getMDXData(flatPath);
        |   }
        | 
        |   return [];
        | }
        | --- END ---

      ‚îú‚îÄ‚îÄ page.tsx
        | --- START: [lang]/blog/page.tsx ---
        | import Link from 'next/link'
        | import { formatDate, getBlogPosts } from 'app/[lang]/blog/utils'
        | 
        | // 1. Internal Component: This handles the UI list
        | // We keep this in the same file or export it for reuse
        | export function BlogPosts({ lang }: { lang: string }) {
        |   let allBlogs = getBlogPosts(lang)
        | 
        |   return (
        |     <div>
        |       {allBlogs
        |         .sort((a, b) => {
        |           if (new Date(a.metadata.publishedAt) > new Date(b.metadata.publishedAt)) {
        |             return -1
        |           }
        |           return 1
        |         })
        |         .map((post) => (
        |           <Link
        |             key={post.slug}
        |             className="flex flex-col space-y-1 mb-4"
        |             // FIX: Added ${lang} to the href to keep the user in their language context
        |             href={`/${lang}/blog/${post.slug}`} 
        |           >
        |             <div className="w-full flex flex-col md:flex-row space-x-0 md:space-x-2">
        |               <p className="text-neutral-600 dark:text-neutral-400 w-[100px] tabular-nums">
        |                 {formatDate(post.metadata.publishedAt, false)}
        |               </p>
        |               <p className="text-neutral-900 dark:text-neutral-100 tracking-tight">
        |                 {post.metadata.title}
        |               </p>
        |             </div>
        |           </Link>
        |         ))}
        |     </div>
        |   )
        | }
        | 
        | // 2. The Page Component: Must be the default export for Next.js routing
        | // We use 'await params' because in Next.js 15+, params is a Promise
        | export default async function BlogPage({ 
        |   params 
        | }: { 
        |   params: Promise<{ lang: string }> 
        | }) {
        |   const { lang } = await params;
        | 
        |   return (
        |     <section>
        |       <h1 className="font-semibold text-2xl mb-8 tracking-tighter">Blog</h1>
        |       <BlogPosts lang={lang} />
        |     </section>
        |   );
        | }
        | --- END ---


      [DIR] [slug]/
        ‚îú‚îÄ‚îÄ page.tsx
          | --- START: [lang]/blog/[slug]/page.tsx ---
          | import { notFound } from 'next/navigation'
          | import { CustomMDX } from 'app/components/mdx'
          | import { formatDate, getBlogPosts } from 'app/[lang]/blog/utils'
          | import { baseUrl } from 'app/sitemap'
          | import type { Metadata } from 'next'
          | import Image from 'next/image'
          | 
          | // 1. FIX: generateStaticParams must now handle the language and slug
          | export async function generateStaticParams() {
          |   const locales = ['en', 'fr', 'es', 'it', 'de', 'hy', 'ru', 'ar'];
          |   
          |   // We need to return an array of { lang, slug } for every combination
          |   // to ensure all pages are pre-rendered correctly.
          |   const params: { lang: string; slug: string }[] = [];
          | 
          |   locales.forEach((lang) => {
          |     const posts = getBlogPosts(lang);
          |     posts.forEach((post) => {
          |       params.push({ lang, slug: post.slug });
          |     });
          |   });
          | 
          |   return params;
          | }
          | 
          | // 2. FIX: generateMetadata needs to await params
          | export async function generateMetadata({
          |   params,
          | }: {
          |   params: Promise<{ slug: string; lang: string }>
          | }): Promise<Metadata | undefined> {
          |   const { slug, lang } = await params; // ‚¨ÖÔ∏è Await the promise
          |   const post = getBlogPosts(lang).find((post) => post.slug === slug)
          |   
          |   if (!post) return;
          | 
          |   let { title, publishedAt: publishedTime, summary: description, image } = post.metadata
          |   let ogImage = image ? image : `${baseUrl}/og?title=${encodeURIComponent(title)}`
          | 
          |   return {
          |     title,
          |     description,
          |     openGraph: {
          |       title,
          |       description,
          |       type: 'article',
          |       publishedTime,
          |       url: `${baseUrl}/${lang}/blog/${slug}`,
          |       images: [{ url: ogImage, width: 1200, height: 630 }],
          |     },
          |     twitter: {
          |       card: 'summary_large_image',
          |       title,
          |       description,
          |       images: [ogImage],
          |     },
          |   }
          | }
          | 
          | // 3. FIX: Main Blog Page component
          | export default async function Blog({ 
          |   params: paramsPromise 
          | }: { 
          |   params: Promise<{ slug: string; lang: string }> 
          | }) {
          |   const { slug, lang } = await paramsPromise; // ‚¨ÖÔ∏è Await the promise
          |   
          |   // Pass 'lang' to getBlogPosts to fetch from the correct folder
          |   const post = getBlogPosts(lang).find((post) => post.slug === slug);
          | 
          |   if (!post) {
          |     notFound();
          |   }
          | 
          |   const { title, publishedAt, headerImage, summary } = post.metadata;
          | 
          |   return (
          |     <section>
          |       <script
          |         type="application/ld+json"
          |         suppressHydrationWarning
          |         dangerouslySetInnerHTML={{
          |           __html: JSON.stringify({
          |             '@context': 'https://schema.org',
          |             '@type': 'BlogPosting',
          |             headline: title,
          |             datePublished: publishedAt,
          |             description: summary,
          |             image: post.metadata.image
          |               ? `${baseUrl}${post.metadata.image}`
          |               : `${baseUrl}/og?title=${encodeURIComponent(title)}`,
          |             url: `${baseUrl}/${lang}/blog/${post.slug}`,
          |             author: {
          |               '@type': 'Person',
          |               name: 'Arman Ayva',
          |             },
          |           }),
          |         }}
          |       />
          |       
          |       <h1 className="title font-semibold text-2xl tracking-tighter text-neutral-600 dark:text-neutral-50 mb-8">
          |         {title}
          |       </h1>        
          | 
          |       {headerImage && (
          |         <div className="relative w-full overflow-hidden mb-8 rounded-lg" style={{ height: '250px' }}>
          |           <Image
          |             src={headerImage}
          |             alt={title} 
          |             fill
          |             sizes="100vw"
          |             className="object-cover" 
          |             priority
          |           />
          |         </div>
          |       )}
          |       
          |       <div className="flex justify-between items-center mt-2 mb-8 text-sm">
          |         <p className="text-sm text-neutral-600 dark:text-neutral-50">
          |           {formatDate(publishedAt)}
          |         </p>
          |       </div>
          | 
          |       <article className="prose prose-neutral dark:prose-invert max-w-none">
          |         <CustomMDX source={post.content} />
          |       </article>
          |     </section>
          |   )
          | }
          | --- END ---

      ‚îú‚îÄ‚îÄ page.tsx
        | --- START: [lang]/videos/page.tsx ---
        | export default function VideosPage() {
        |   const videoEmbeds = [
        |     {
        |       title: "Arman Ayva ‚Äì Topic Channel",
        |       description: "Official auto-generated Topic channel for full catalog listening.",
        |       embedId: "videoseries?list=PLdh9NdS_IkkUwmhmrqNy0oQTtjxr683kC", 
        |       isPlaylist: true,
        |     },
        |     {
        |       title: "Classic Folk Armenian",
        |       description: "Humanity is stepping into the AI age‚Äîit‚Äôs only the beginning. Some are frightened, some resist, but me? I‚Äôm excited. I can‚Äôt wait for the day I see an intelligent robot walking down the street.",
        | embedId: "videoseries?list=PLdh9NdS_IkkVM3UatJqXqwod_4a8LxRTJ&si", 
        |       isPlaylist: false,
        |     },
        |     {
        |       title: "The Shrink-Ep.1 -And The Journey Begins (Pilot) - Satirical Sci-Fi",
        |       description: "The full musical crime story in one visual experience.",
        |       // FIXED: Inserted the correct video ID and the start time parameter
        |       embedId: "3JD0fx0gqqY?start=0", 
        |       isPlaylist: false,
        |     },
        |     {
        |       title: "Stuck in the Past ‚Äì Jazz Funk Fusion by Arman Ayva (Official Video)",
        |       description: "The original instrumental jazz score capturing.  Release Date: Sep 1- 2025. Spotify: Arman Ayva",
        |       embedId: "ycXxiJdXSbw", // ‚ö†Ô∏è Replace with the actual video ID
        |       isPlaylist: false,
        |     },
        |   ];
        | 
        |   return (
        |     <section className="py-8">
        |       <h1 className="font-bold text-4xl font-serif mb-6 tracking-tighter">
        |         Watch & Listen: Arman Ayva on YouTube üé•
        |       </h1>
        |       
        |       <div className="prose prose-neutral dark:prose-invert mb-10">
        |         <p className="text-lg">
        |           Dive into my visual and sonic stories. From full-length album visualizers to official Topic
        |           channel playlists, explore the cinematic jazz fusion of Arman Ayva.
        |         </p>
        |       </div>
        | 
        |       {/* Responsive Grid for Video Embeds */}
        |       <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
        |         {videoEmbeds.map((video) => (
        |           <div key={video.embedId} className="space-y-3">
        |             <h2 className="font-bold text-xl tracking-tight">
        |               {video.title}
        |             </h2>
        |             <div className="aspect-w-16 aspect-h-9 w-full rounded-xl overflow-hidden shadow-2xl">
        |               {/* YouTube Embed Setup: using 16:9 aspect ratio */}
        |               <iframe
        |                 className="w-full h-full"
        |                 src={`https://www.youtube.com/embed/${video.embedId}`}
        |                 title={`YouTube video player for ${video.title}`}
        |                 frameBorder="0"
        |                 allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        |                 allowFullScreen
        |               />
        |             </div>
        |             <p className="text-sm text-neutral-600 dark:text-neutral-400">
        |               {video.description}
        |             </p>
        |           </div>
        |         ))}
        |       </div>
        |     </section>
        |   );
        | }
        | --- END ---

      ‚îú‚îÄ‚îÄ page.tsx
        | --- START: [lang]/music-production-disclaimer/page.tsx ---
        | import Link from 'next/link';
        | 
        | export default function MusicProductionDisclaimerPage() {
        |   return (
        |     <section className="py-8">
        |       <h1 className="font-bold text-4xl font-serif mb-6 tracking-tighter">
        |         Music Production & Licensing Disclaimer
        |       </h1>
        |       
        |       <div className="prose prose-neutral dark:prose-invert">
        |         
        |         <p className="lead text-lg">
        |           All music compositions, recordings, and soundtracks presented on this website are **original works** produced by **Arman Ayva**. We adhere to the highest standards of artistic and legal integrity.
        |         </p>
        | 
        |         <hr />
        |         
        |         <h2>Technical Production Details</h2>
        |         <p>
        |           These works are created primarily using **Apple Logic Pro (version 10.7.9)** and other professional 
        |           digital audio tools. 
        |         </p>
        |         <p>
        |           Some compositions may include sounds, loops, or samples that come pre-installed within Logic Pro‚Äôs 
        |           software library.
        |         </p>
        |         
        |         <h2>Royalty-Free Usage (Apple Logic Pro)</h2>
        |         <p>
        |           According to **Apple Inc.‚Äôs Logic Pro Software License Agreement (Section C ‚Äì Sample Content)**, 
        |           all Apple-provided loops and samples are **royalty-free** for use in original compositions and 
        |           can be **distributed, broadcast, and monetized** as part of a complete musical or audiovisual work.
        |         </p>
        |         
        |         <blockquote className="border-l-4 border-blue-500 pl-4 italic text-neutral-600 dark:text-neutral-400">
        |           <p>
        |             ‚ÄúAll Sample Content included in the Apple Software may be used on a royalty-free basis to create your own original soundtracks for your film, video and audio projects. You may broadcast and/or distribute your own soundtracks that were created using the Sample Content‚Ä¶‚Äù
        |           </p>
        |         </blockquote>
        | 
        |         <h2>Artistic Integrity Guarantee</h2>
        |         <p>
        |           **No individual Apple loops, samples, or sound assets are redistributed or sold on a standalone basis.** Every track published by Arman Ayva represents an **original artistic composition** that has been 
        |           significantly transformed and arranged.
        |         </p>
        |       </div>
        | 
        |       <div className="mt-12 text-sm text-neutral-500 dark:text-neutral-400">
        |         <p>
        |           For licensing inquiries regarding commercial use of Arman Ayva's compositions, please visit the 
        |           <Link href="/contact" className="underline hover:text-blue-500">Contact page</Link>.
        |         </p>
        |       </div>
        |     </section>
        |   );
        | }
        | --- END ---

